var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);
/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
/*! #__NO_SIDE_EFFECTS__ */
function n(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return e=>e in t}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const r={},s=[],i=()=>{},o=()=>!1,a=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),c=e=>e.startsWith("onUpdate:"),l=Object.assign,u=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},h=Object.prototype.hasOwnProperty,d=(e,t)=>h.call(e,t),f=Array.isArray,p=e=>"[object Map]"===T(e),m=e=>"[object Set]"===T(e),g=e=>"[object Date]"===T(e),y=e=>"function"==typeof e,v=e=>"string"==typeof e,w=e=>"symbol"==typeof e,b=e=>null!==e&&"object"==typeof e,_=e=>(b(e)||y(e))&&y(e.then)&&y(e.catch),I=Object.prototype.toString,T=e=>I.call(e),E=e=>"[object Object]"===T(e),S=e=>v(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,k=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),x=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},C=/-(\w)/g,A=x(e=>e.replace(C,(e,t)=>t?t.toUpperCase():"")),D=/\B([A-Z])/g,N=x(e=>e.replace(D,"-$1").toLowerCase()),R=x(e=>e.charAt(0).toUpperCase()+e.slice(1)),O=x(e=>e?`on${R(e)}`:""),P=(e,t)=>!Object.is(e,t),L=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},M=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},F=e=>{const t=parseFloat(e);return isNaN(t)?e:t},U=e=>{const t=v(e)?Number(e):NaN;return isNaN(t)?e:t};let V;const j=()=>V||(V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function B(e){if(f(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=v(r)?H(r):B(r);if(s)for(const e in s)t[e]=s[e]}return t}if(v(e)||b(e))return e}const q=/;(?![^(]*\))/g,$=/:([^]+)/,z=/\/\*[^]*?\*\//g;function H(e){const t={};return e.replace(z,"").split(q).forEach(e=>{if(e){const n=e.split($);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function G(e){let t="";if(v(e))t=e;else if(f(e))for(let n=0;n<e.length;n++){const r=G(e[n]);r&&(t+=r+" ")}else if(b(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const K=n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function W(e){return!!e||""===e}function Q(e,t){if(e===t)return!0;let n=g(e),r=g(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=w(e),r=w(t),n||r)return e===t;if(n=f(e),r=f(t),n||r)return!(!n||!r)&&function(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Q(e[r],t[r]);return n}(e,t);if(n=b(e),r=b(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),s=t.hasOwnProperty(n);if(r&&!s||!r&&s||!Q(e[n],t[n]))return!1}}return String(e)===String(t)}function J(e,t){return e.findIndex(e=>Q(e,t))}const Y=e=>!(!e||!0!==e.__v_isRef),X=e=>v(e)?e:null==e?"":f(e)||b(e)&&(e.toString===I||!y(e.toString))?Y(e)?X(e.value):JSON.stringify(e,Z,2):String(e),Z=(e,t)=>Y(t)?Z(e,t.value):p(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[ee(t,r)+" =>"]=n,e),{})}:m(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>ee(e))}:w(t)?ee(t):!b(t)||f(t)||E(t)?t:String(t),ee=(e,t="")=>{var n;return w(e)?`Symbol(${null!=(n=e.description)?n:t})`:e};
/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
let te,ne;class re{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=te,!e&&te&&(this.index=(te.scopes||(te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let e,t;if(this._isPaused=!0,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){let e,t;if(this._isPaused=!1,this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=te;try{return te=this,e()}finally{te=t}}}on(){1===++this._on&&(this.prevScope=te,te=this)}off(){this._on>0&&0===--this._on&&(te=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){let t,n;for(this._active=!1,t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}}function se(e){return new re(e)}function ie(){return te}const oe=new WeakSet;class ae{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,te&&te.active&&te.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,oe.has(this)&&(oe.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||he(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,Ee(this),pe(this);const e=ne,t=be;ne=this,be=!0;try{return this.fn()}finally{me(this),ne=e,be=t,this.flags&=-3}}stop(){if(1&this.flags){for(let e=this.deps;e;e=e.nextDep)ve(e);this.deps=this.depsTail=void 0,Ee(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?oe.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ge(this)&&this.run()}get dirty(){return ge(this)}}let ce,le,ue=0;function he(e,t=!1){if(e.flags|=8,t)return e.next=le,void(le=e);e.next=ce,ce=e}function de(){ue++}function fe(){if(--ue>0)return;if(le){let e=le;for(le=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;ce;){let n=ce;for(ce=void 0;n;){const r=n.next;if(n.next=void 0,n.flags&=-9,1&n.flags)try{n.trigger()}catch(t){e||(e=t)}n=r}}if(e)throw e}function pe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function me(e){let t,n=e.depsTail,r=n;for(;r;){const e=r.prevDep;-1===r.version?(r===n&&(n=e),ve(r),we(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function ge(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ye(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ye(e){if(4&e.flags&&!(16&e.flags))return;if(e.flags&=-17,e.globalVersion===Se)return;if(e.globalVersion=Se,!e.isSSR&&128&e.flags&&(!e.deps&&!e._dirty||!ge(e)))return;e.flags|=2;const t=e.dep,n=ne,r=be;ne=e,be=!0;try{pe(e);const n=e.fn(e._value);(0===t.version||P(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(s){throw t.version++,s}finally{ne=n,be=r,me(e),e.flags&=-3}}function ve(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)ve(e,!0)}t||--n.sc||!n.map||n.map.delete(n.key)}function we(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let be=!0;const _e=[];function Ie(){_e.push(be),be=!1}function Te(){const e=_e.pop();be=void 0===e||e}function Ee(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const e=ne;ne=void 0;try{t()}finally{ne=e}}}let Se=0;class ke{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class xe{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ne||!be||ne===this.computed)return;let t=this.activeLink;if(void 0===t||t.sub!==ne)t=this.activeLink=new ke(ne,this),ne.deps?(t.prevDep=ne.depsTail,ne.depsTail.nextDep=t,ne.depsTail=t):ne.deps=ne.depsTail=t,Ce(t);else if(-1===t.version&&(t.version=this.version,t.nextDep)){const e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=ne.depsTail,t.nextDep=void 0,ne.depsTail.nextDep=t,ne.depsTail=t,ne.deps===t&&(ne.deps=e)}return t}trigger(e){this.version++,Se++,this.notify(e)}notify(e){de();try{0;for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{fe()}}}function Ce(e){if(e.dep.sc++,4&e.sub.flags){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)Ce(e)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ae=new WeakMap,De=Symbol(""),Ne=Symbol(""),Re=Symbol("");function Oe(e,t,n){if(be&&ne){let t=Ae.get(e);t||Ae.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new xe),r.map=t,r.key=n),r.track()}}function Pe(e,t,n,r,s,i){const o=Ae.get(e);if(!o)return void Se++;const a=e=>{e&&e.trigger()};if(de(),"clear"===t)o.forEach(a);else{const s=f(e),i=s&&S(n);if(s&&"length"===n){const e=Number(r);o.forEach((t,n)=>{("length"===n||n===Re||!w(n)&&n>=e)&&a(t)})}else switch((void 0!==n||o.has(void 0))&&a(o.get(n)),i&&a(o.get(Re)),t){case"add":s?i&&a(o.get("length")):(a(o.get(De)),p(e)&&a(o.get(Ne)));break;case"delete":s||(a(o.get(De)),p(e)&&a(o.get(Ne)));break;case"set":p(e)&&a(o.get(De))}}fe()}function Le(e){const t=bt(e);return t===e?t:(Oe(t,0,Re),vt(e)?t:t.map(It))}function Me(e){return Oe(e=bt(e),0,Re),e}const Fe={__proto__:null,[Symbol.iterator](){return Ue(this,Symbol.iterator,It)},concat(...e){return Le(this).concat(...e.map(e=>f(e)?Le(e):e))},entries(){return Ue(this,"entries",e=>(e[1]=It(e[1]),e))},every(e,t){return je(this,"every",e,t,void 0,arguments)},filter(e,t){return je(this,"filter",e,t,e=>e.map(It),arguments)},find(e,t){return je(this,"find",e,t,It,arguments)},findIndex(e,t){return je(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return je(this,"findLast",e,t,It,arguments)},findLastIndex(e,t){return je(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return je(this,"forEach",e,t,void 0,arguments)},includes(...e){return qe(this,"includes",e)},indexOf(...e){return qe(this,"indexOf",e)},join(e){return Le(this).join(e)},lastIndexOf(...e){return qe(this,"lastIndexOf",e)},map(e,t){return je(this,"map",e,t,void 0,arguments)},pop(){return $e(this,"pop")},push(...e){return $e(this,"push",e)},reduce(e,...t){return Be(this,"reduce",e,t)},reduceRight(e,...t){return Be(this,"reduceRight",e,t)},shift(){return $e(this,"shift")},some(e,t){return je(this,"some",e,t,void 0,arguments)},splice(...e){return $e(this,"splice",e)},toReversed(){return Le(this).toReversed()},toSorted(e){return Le(this).toSorted(e)},toSpliced(...e){return Le(this).toSpliced(...e)},unshift(...e){return $e(this,"unshift",e)},values(){return Ue(this,"values",It)}};function Ue(e,t,n){const r=Me(e),s=r[t]();return r===e||vt(e)||(s._next=s.next,s.next=()=>{const e=s._next();return e.value&&(e.value=n(e.value)),e}),s}const Ve=Array.prototype;function je(e,t,n,r,s,i){const o=Me(e),a=o!==e&&!vt(e),c=o[t];if(c!==Ve[t]){const t=c.apply(e,i);return a?It(t):t}let l=n;o!==e&&(a?l=function(t,r){return n.call(this,It(t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));const u=c.call(o,l,r);return a&&s?s(u):u}function Be(e,t,n,r){const s=Me(e);let i=n;return s!==e&&(vt(e)?n.length>3&&(i=function(t,r,s){return n.call(this,t,r,s,e)}):i=function(t,r,s){return n.call(this,t,It(r),s,e)}),s[t](i,...r)}function qe(e,t,n){const r=bt(e);Oe(r,0,Re);const s=r[t](...n);return-1!==s&&!1!==s||!wt(n[0])?s:(n[0]=bt(n[0]),r[t](...n))}function $e(e,t,n=[]){Ie(),de();const r=bt(e)[t].apply(e,n);return fe(),Te(),r}const ze=n("__proto__,__v_isRef,__isVue"),He=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>"arguments"!==e&&"caller"!==e).map(e=>Symbol[e]).filter(w));function Ge(e){w(e)||(e=String(e));const t=bt(this);return Oe(t,0,e),t.hasOwnProperty(e)}class Ke{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if("__v_skip"===t)return e.__v_skip;const r=this._isReadonly,s=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return s;if("__v_raw"===t)return n===(r?s?ut:lt:s?ct:at).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=f(e);if(!r){let e;if(i&&(e=Fe[t]))return e;if("hasOwnProperty"===t)return Ge}const o=Reflect.get(e,t,Et(e)?e:n);return(w(t)?He.has(t):ze(t))?o:(r||Oe(e,0,t),s?o:Et(o)?i&&S(t)?o:o.value:b(o)?r?pt(o):dt(o):o)}}class We extends Ke{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const t=yt(s);if(vt(n)||yt(n)||(s=bt(s),n=bt(n)),!f(e)&&Et(s)&&!Et(n))return!t&&(s.value=n,!0)}const i=f(e)&&S(t)?Number(t)<e.length:d(e,t),o=Reflect.set(e,t,n,Et(e)?e:r);return e===bt(r)&&(i?P(n,s)&&Pe(e,"set",t,n):Pe(e,"add",t,n)),o}deleteProperty(e,t){const n=d(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Pe(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return w(t)&&He.has(t)||Oe(e,0,t),n}ownKeys(e){return Oe(e,0,f(e)?"length":De),Reflect.ownKeys(e)}}class Qe extends Ke{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Je=new We,Ye=new Qe,Xe=new We(!0),Ze=e=>e,et=e=>Reflect.getPrototypeOf(e);function tt(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function nt(e,t){const n={get(n){const r=this.__v_raw,s=bt(r),i=bt(n);e||(P(n,i)&&Oe(s,0,n),Oe(s,0,i));const{has:o}=et(s),a=t?Ze:e?Tt:It;return o.call(s,n)?a(r.get(n)):o.call(s,i)?a(r.get(i)):void(r!==s&&r.get(n))},get size(){const t=this.__v_raw;return!e&&Oe(bt(t),0,De),Reflect.get(t,"size",t)},has(t){const n=this.__v_raw,r=bt(n),s=bt(t);return e||(P(t,s)&&Oe(r,0,t),Oe(r,0,s)),t===s?n.has(t):n.has(t)||n.has(s)},forEach(n,r){const s=this,i=s.__v_raw,o=bt(i),a=t?Ze:e?Tt:It;return!e&&Oe(o,0,De),i.forEach((e,t)=>n.call(r,a(e),a(t),s))}};l(n,e?{add:tt("add"),set:tt("set"),delete:tt("delete"),clear:tt("clear")}:{add(e){t||vt(e)||yt(e)||(e=bt(e));const n=bt(this);return et(n).has.call(n,e)||(n.add(e),Pe(n,"add",e,e)),this},set(e,n){t||vt(n)||yt(n)||(n=bt(n));const r=bt(this),{has:s,get:i}=et(r);let o=s.call(r,e);o||(e=bt(e),o=s.call(r,e));const a=i.call(r,e);return r.set(e,n),o?P(n,a)&&Pe(r,"set",e,n):Pe(r,"add",e,n),this},delete(e){const t=bt(this),{has:n,get:r}=et(t);let s=n.call(t,e);s||(e=bt(e),s=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return s&&Pe(t,"delete",e,void 0),i},clear(){const e=bt(this),t=0!==e.size,n=e.clear();return t&&Pe(e,"clear",void 0,void 0),n}});return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=function(e,t,n){return function(...r){const s=this.__v_raw,i=bt(s),o=p(i),a="entries"===e||e===Symbol.iterator&&o,c="keys"===e&&o,l=s[e](...r),u=n?Ze:t?Tt:It;return!t&&Oe(i,0,c?Ne:De),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:a?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}(r,e,t)}),n}function rt(e,t){const n=nt(e,t);return(t,r,s)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(d(n,r)&&r in t?n:t,r,s)}const st={get:rt(!1,!1)},it={get:rt(!1,!0)},ot={get:rt(!0,!1)},at=new WeakMap,ct=new WeakMap,lt=new WeakMap,ut=new WeakMap;function ht(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>T(e).slice(8,-1))(e))}function dt(e){return yt(e)?e:mt(e,!1,Je,st,at)}function ft(e){return mt(e,!1,Xe,it,ct)}function pt(e){return mt(e,!0,Ye,ot,lt)}function mt(e,t,n,r,s){if(!b(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=ht(e);if(0===i)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,2===i?r:n);return s.set(e,a),a}function gt(e){return yt(e)?gt(e.__v_raw):!(!e||!e.__v_isReactive)}function yt(e){return!(!e||!e.__v_isReadonly)}function vt(e){return!(!e||!e.__v_isShallow)}function wt(e){return!!e&&!!e.__v_raw}function bt(e){const t=e&&e.__v_raw;return t?bt(t):e}function _t(e){return!d(e,"__v_skip")&&Object.isExtensible(e)&&M(e,"__v_skip",!0),e}const It=e=>b(e)?dt(e):e,Tt=e=>b(e)?pt(e):e;function Et(e){return!!e&&!0===e.__v_isRef}function St(e){return xt(e,!1)}function kt(e){return xt(e,!0)}function xt(e,t){return Et(e)?e:new Ct(e,t)}class Ct{constructor(e,t){this.dep=new xe,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:bt(e),this._value=t?e:It(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||vt(e)||yt(e);e=n?e:bt(e),P(e,t)&&(this._rawValue=e,this._value=n?e:It(e),this.dep.trigger())}}function At(e){return Et(e)?e.value:e}const Dt={get:(e,t,n)=>"__v_raw"===t?e:At(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Et(s)&&!Et(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function Nt(e){return gt(e)?e:new Proxy(e,Dt)}class Rt{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return function(e,t){const n=Ae.get(e);return n&&n.get(t)}(bt(this._object),this._key)}}class Ot{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pt(e,t,n){const r=e[t];return Et(r)?r:new Rt(e,t,n)}class Lt{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new xe(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Se-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(8&this.flags)&&ne!==this)return he(this,!0),!0}get value(){const e=this.dep.track();return ye(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}const Mt={},Ft=new WeakMap;let Ut;function Vt(e,t,n=r){const{immediate:s,deep:o,once:a,scheduler:c,augmentJob:l,call:h}=n,d=e=>o?e:vt(e)||!1===o||0===o?jt(e,1):jt(e);let p,m,g,v,w=!1,b=!1;if(Et(e)?(m=()=>e.value,w=vt(e)):gt(e)?(m=()=>d(e),w=!0):f(e)?(b=!0,w=e.some(e=>gt(e)||vt(e)),m=()=>e.map(e=>Et(e)?e.value:gt(e)?d(e):y(e)?h?h(e,2):e():void 0)):m=y(e)?t?h?()=>h(e,2):e:()=>{if(g){Ie();try{g()}finally{Te()}}const t=Ut;Ut=p;try{return h?h(e,3,[v]):e(v)}finally{Ut=t}}:i,t&&o){const e=m,t=!0===o?1/0:o;m=()=>jt(e(),t)}const _=ie(),I=()=>{p.stop(),_&&_.active&&u(_.effects,p)};if(a&&t){const e=t;t=(...t)=>{e(...t),I()}}let T=b?new Array(e.length).fill(Mt):Mt;const E=e=>{if(1&p.flags&&(p.dirty||e))if(t){const e=p.run();if(o||w||(b?e.some((e,t)=>P(e,T[t])):P(e,T))){g&&g();const n=Ut;Ut=p;try{const n=[e,T===Mt?void 0:b&&T[0]===Mt?[]:T,v];T=e,h?h(t,3,n):t(...n)}finally{Ut=n}}}else p.run()};return l&&l(E),p=new ae(m),p.scheduler=c?()=>c(E,!1):E,v=e=>function(e,t=!1,n=Ut){if(n){let t=Ft.get(n);t||Ft.set(n,t=[]),t.push(e)}}(e,!1,p),g=p.onStop=()=>{const e=Ft.get(p);if(e){if(h)h(e,4);else for(const t of e)t();Ft.delete(p)}},t?s?E(!0):T=p.run():c?c(E.bind(null,!0),!0):p.run(),I.pause=p.pause.bind(p),I.resume=p.resume.bind(p),I.stop=I,I}function jt(e,t=1/0,n){if(t<=0||!b(e)||e.__v_skip)return e;if((n=n||new Set).has(e))return e;if(n.add(e),t--,Et(e))jt(e.value,t,n);else if(f(e))for(let r=0;r<e.length;r++)jt(e[r],t,n);else if(m(e)||p(e))e.forEach(e=>{jt(e,t,n)});else if(E(e)){for(const r in e)jt(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&jt(e[r],t,n)}return e}
/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Bt(e,t,n,r){try{return r?e(...r):e()}catch(s){$t(s,t,n)}}function qt(e,t,n,r){if(y(e)){const s=Bt(e,t,n,r);return s&&_(s)&&s.catch(e=>{$t(e,t,n)}),s}if(f(e)){const s=[];for(let i=0;i<e.length;i++)s.push(qt(e[i],t,n,r));return s}}function $t(e,t,n,s=!0){t&&t.vnode;const{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||r;if(t){let r=t.parent;const s=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,s,o))return;r=r.parent}if(i)return Ie(),Bt(i,null,10,[e,s,o]),void Te()}!function(e,t,n,r=!0,s=!1){if(s)throw e}(e,0,0,s,o)}const zt=[];let Ht=-1;const Gt=[];let Kt=null,Wt=0;const Qt=Promise.resolve();let Jt=null;function Yt(e){const t=Jt||Qt;return e?t.then(this?e.bind(this):e):t}function Xt(e){if(!(1&e.flags)){const t=rn(e),n=zt[zt.length-1];!n||!(2&e.flags)&&t>=rn(n)?zt.push(e):zt.splice(function(e){let t=Ht+1,n=zt.length;for(;t<n;){const r=t+n>>>1,s=zt[r],i=rn(s);i<e||i===e&&2&s.flags?t=r+1:n=r}return t}(t),0,e),e.flags|=1,Zt()}}function Zt(){Jt||(Jt=Qt.then(sn))}function en(e){f(e)?Gt.push(...e):Kt&&-1===e.id?Kt.splice(Wt+1,0,e):1&e.flags||(Gt.push(e),e.flags|=1),Zt()}function tn(e,t,n=Ht+1){for(;n<zt.length;n++){const t=zt[n];if(t&&2&t.flags){if(e&&t.id!==e.uid)continue;zt.splice(n,1),n--,4&t.flags&&(t.flags&=-2),t(),4&t.flags||(t.flags&=-2)}}}function nn(e){if(Gt.length){const e=[...new Set(Gt)].sort((e,t)=>rn(e)-rn(t));if(Gt.length=0,Kt)return void Kt.push(...e);for(Kt=e,Wt=0;Wt<Kt.length;Wt++){const e=Kt[Wt];4&e.flags&&(e.flags&=-2),8&e.flags||e(),e.flags&=-2}Kt=null,Wt=0}}const rn=e=>null==e.id?2&e.flags?-1:1/0:e.id;function sn(e){try{for(Ht=0;Ht<zt.length;Ht++){const e=zt[Ht];!e||8&e.flags||(4&e.flags&&(e.flags&=-2),Bt(e,e.i,e.i?15:14),4&e.flags||(e.flags&=-2))}}finally{for(;Ht<zt.length;Ht++){const e=zt[Ht];e&&(e.flags&=-2)}Ht=-1,zt.length=0,nn(),Jt=null,(zt.length||Gt.length)&&sn()}}let on=null,an=null;function cn(e){const t=on;return on=e,an=e&&e.type.__scopeId||null,t}function ln(e,t=on,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&Js(-1);const s=cn(t);let i;try{i=e(...n)}finally{cn(s),r._d&&Js(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function un(e,t){if(null===on)return e;const n=xi(on),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,o,a,c=r]=t[i];e&&(y(e)&&(e={mounted:e,updated:e}),e.deep&&jt(o),s.push({dir:e,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function hn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Ie(),qt(c,n,8,[e.el,a,e,t]),Te())}}const dn=Symbol("_vte"),fn=e=>e.__isTeleport,pn=e=>e&&(e.disabled||""===e.disabled),mn=e=>e&&(e.defer||""===e.defer),gn=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,yn=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,vn=(e,t)=>{const n=e&&e.to;if(v(n)){if(t){return t(n)}return null}return n},wn={name:"Teleport",__isTeleport:!0,process(e,t,n,r,s,i,o,a,c,l){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:m,createComment:g}}=l,y=pn(t.props);let{shapeFlag:v,children:w,dynamicChildren:b}=t;if(null==e){const e=t.el=m(""),l=t.anchor=m("");f(e,n,r),f(l,n,r);const h=(e,t)=>{16&v&&(s&&s.isCE&&(s.ce._teleportTarget=e),u(w,e,t,s,i,o,a,c))},d=()=>{const e=t.target=vn(t.props,p),n=Tn(e,t,m,f);e&&("svg"!==o&&gn(e)?o="svg":"mathml"!==o&&yn(e)&&(o="mathml"),y||(h(e,n),In(t,!1)))};y&&(h(n,l),In(t,!0)),mn(t.props)?(t.el.__isMounted=!1,us(()=>{d(),delete t.el.__isMounted},i)):d()}else{if(mn(t.props)&&!1===e.el.__isMounted)return void us(()=>{wn.process(e,t,n,r,s,i,o,a,c,l)},i);t.el=e.el,t.targetStart=e.targetStart;const u=t.anchor=e.anchor,f=t.target=e.target,m=t.targetAnchor=e.targetAnchor,g=pn(e.props),v=g?n:f,w=g?u:m;if("svg"===o||gn(f)?o="svg":("mathml"===o||yn(f))&&(o="mathml"),b?(d(e.dynamicChildren,b,v,s,i,o,a),ms(e,t,!0)):c||h(e,t,v,w,s,i,o,a,!1),y)g?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):bn(t,n,u,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=vn(t.props,p);e&&bn(t,e,null,l,0)}else g&&bn(t,f,m,l,1);In(t,y)}},remove(e,t,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:c,targetStart:l,targetAnchor:u,target:h,props:d}=e;if(h&&(s(l),s(u)),i&&s(c),16&o){const e=i||!pn(d);for(let s=0;s<a.length;s++){const i=a[s];r(i,t,n,e,!!i.dynamicChildren)}}},move:bn,hydrate:function(e,t,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c,insert:l,createText:u}},h){const d=t.target=vn(t.props,c);if(d){const c=pn(t.props),f=d._lpa||d.firstChild;if(16&t.shapeFlag)if(c)t.anchor=h(o(e),t,a(e),n,r,s,i),t.targetStart=f,t.targetAnchor=f&&o(f);else{t.anchor=o(e);let a=f;for(;a;){if(a&&8===a.nodeType)if("teleport start anchor"===a.data)t.targetStart=a;else if("teleport anchor"===a.data){t.targetAnchor=a,d._lpa=t.targetAnchor&&o(t.targetAnchor);break}a=o(a)}t.targetAnchor||Tn(d,t,u,l),h(f&&o(f),t,d,n,r,s,i)}In(t,c)}return t.anchor&&o(t.anchor)}};function bn(e,t,n,{o:{insert:r},m:s},i=2){0===i&&r(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:c,children:l,props:u}=e,h=2===i;if(h&&r(o,t,n),(!h||pn(u))&&16&c)for(let d=0;d<l.length;d++)s(l[d],t,n,2);h&&r(a,t,n)}const _n=wn;function In(e,t){const n=e.ctx;if(n&&n.ut){let r,s;for(t?(r=e.el,s=e.anchor):(r=e.targetStart,s=e.targetAnchor);r&&r!==s;)1===r.nodeType&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Tn(e,t,n,r){const s=t.targetStart=n(""),i=t.targetAnchor=n("");return s[dn]=i,e&&(r(s,e),r(i,e)),i}const En=Symbol("_leaveCb"),Sn=Symbol("_enterCb");const kn=[Function,Array],xn={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:kn,onEnter:kn,onAfterEnter:kn,onEnterCancelled:kn,onBeforeLeave:kn,onLeave:kn,onAfterLeave:kn,onLeaveCancelled:kn,onBeforeAppear:kn,onAppear:kn,onAfterAppear:kn,onAppearCancelled:kn},Cn=e=>{const t=e.subTree;return t.component?Cn(t.component):t};function An(e){let t=e[0];if(e.length>1)for(const n of e)if(n.type!==$s){t=n;break}return t}const Dn={name:"BaseTransition",props:xn,setup(e,{slots:t}){const n=yi(),r=function(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return lr(()=>{e.isMounted=!0}),dr(()=>{e.isUnmounting=!0}),e}();return()=>{const s=t.default&&Mn(t.default(),!0);if(!s||!s.length)return;const i=An(s),o=bt(e),{mode:a}=o;if(r.isLeaving)return On(i);const c=Pn(i);if(!c)return On(i);let l=Rn(c,o,r,n,e=>l=e);c.type!==$s&&Ln(c,l);let u=n.subTree&&Pn(n.subTree);if(u&&u.type!==$s&&!ti(c,u)&&Cn(n).type!==$s){let e=Rn(u,o,r,n);if(Ln(u,e),"out-in"===a&&c.type!==$s)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,8&n.job.flags||n.update(),delete e.afterLeave,u=void 0},On(i);"in-out"===a&&c.type!==$s?e.delayLeave=(e,t,n)=>{Nn(r,u)[String(u.key)]=u,e[En]=()=>{t(),e[En]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{n(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Nn(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Rn(e,t,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:p,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:y,onAppear:v,onAfterAppear:w,onAppearCancelled:b}=t,_=String(e.key),I=Nn(n,e),T=(e,t)=>{e&&qt(e,r,9,t)},E=(e,t)=>{const n=t[1];T(e,t),f(e)?e.every(e=>e.length<=1)&&n():e.length<=1&&n()},S={mode:o,persisted:a,beforeEnter(t){let r=c;if(!n.isMounted){if(!i)return;r=y||c}t[En]&&t[En](!0);const s=I[_];s&&ti(e,s)&&s.el[En]&&s.el[En](),T(r,[t])},enter(e){let t=l,r=u,s=h;if(!n.isMounted){if(!i)return;t=v||l,r=w||u,s=b||h}let o=!1;const a=e[Sn]=t=>{o||(o=!0,T(t?s:r,[e]),S.delayedLeave&&S.delayedLeave(),e[Sn]=void 0)};t?E(t,[e,a]):a()},leave(t,r){const s=String(e.key);if(t[Sn]&&t[Sn](!0),n.isUnmounting)return r();T(d,[t]);let i=!1;const o=t[En]=n=>{i||(i=!0,r(),T(n?g:m,[t]),t[En]=void 0,I[s]===e&&delete I[s])};I[s]=e,p?E(p,[t,o]):o()},clone(e){const i=Rn(e,t,n,r,s);return s&&s(i),i}};return S}function On(e){if(Yn(e))return(e=oi(e)).children=null,e}function Pn(e){if(!Yn(e))return fn(e.type)&&e.children?An(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(16&t)return n[0];if(32&t&&y(n.default))return n.default()}}function Ln(e,t){6&e.shapeFlag&&e.component?(e.transition=t,Ln(e.component.subTree,t)):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Mn(e,t=!1,n){let r=[],s=0;for(let i=0;i<e.length;i++){let o=e[i];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:i);o.type===Bs?(128&o.patchFlag&&s++,r=r.concat(Mn(o.children,t,a))):(t||o.type!==$s)&&r.push(null!=a?oi(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}
/*! #__NO_SIDE_EFFECTS__ */function Fn(e,t){return y(e)?(()=>l({name:e.name},t,{setup:e}))():e}function Un(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Vn(e,t,n,s,i=!1){if(f(e))return void e.forEach((e,r)=>Vn(e,t&&(f(t)?t[r]:t),n,s,i));if(Wn(s)&&!i)return void(512&s.shapeFlag&&s.type.__asyncResolved&&s.component.subTree.component&&Vn(e,t,n,s.component.subTree));const o=4&s.shapeFlag?xi(s.component):s.el,a=i?null:o,{i:c,r:l}=e,h=t&&t.r,p=c.refs===r?c.refs={}:c.refs,m=c.setupState,g=bt(m),w=m===r?()=>!1:e=>d(g,e);if(null!=h&&h!==l&&(v(h)?(p[h]=null,w(h)&&(m[h]=null)):Et(h)&&(h.value=null)),y(l))Bt(l,c,12,[a,p]);else{const t=v(l),r=Et(l);if(t||r){const s=()=>{if(e.f){const n=t?w(l)?m[l]:p[l]:l.value;i?f(n)&&u(n,o):f(n)?n.includes(o)||n.push(o):t?(p[l]=[o],w(l)&&(m[l]=p[l])):(l.value=[o],e.k&&(p[e.k]=l.value))}else t?(p[l]=a,w(l)&&(m[l]=a)):r&&(l.value=a,e.k&&(p[e.k]=a))};a?(s.id=-1,us(s,n)):s()}}}let jn=!1;const Bn=()=>{jn||(jn=!0)},qn=e=>{if(1===e.nodeType)return(e=>e.namespaceURI.includes("svg")&&"foreignObject"!==e.tagName)(e)?"svg":(e=>e.namespaceURI.includes("MathML"))(e)?"mathml":void 0},$n=e=>8===e.nodeType;function zn(e){const{mt:t,p:n,o:{patchProp:r,createText:s,nextSibling:i,parentNode:o,remove:c,insert:l,createComment:u}}=e,h=(n,r,a,c,u,w=!1)=>{w=w||!!r.dynamicChildren;const b=$n(n)&&"["===n.data,_=()=>m(n,r,a,c,u,b),{type:I,ref:T,shapeFlag:E,patchFlag:S}=r;let k=n.nodeType;r.el=n,-2===S&&(w=!1,r.dynamicChildren=null);let x=null;switch(I){case qs:3!==k?""===r.children?(l(r.el=s(""),o(n),n),x=n):x=_():(n.data!==r.children&&(Bn(),n.data=r.children),x=i(n));break;case $s:v(n)?(x=i(n),y(r.el=n.content.firstChild,n,a)):x=8!==k||b?_():i(n);break;case zs:if(b&&(k=(n=i(n)).nodeType),1===k||3===k){x=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=1===x.nodeType?x.outerHTML:x.data),t===r.staticCount-1&&(r.anchor=x),x=i(x);return b?i(x):x}_();break;case Bs:x=b?p(n,r,a,c,u,w):_();break;default:if(1&E)x=1===k&&r.type.toLowerCase()===n.tagName.toLowerCase()||v(n)?d(n,r,a,c,u,w):_();else if(6&E){r.slotScopeIds=u;const e=o(n);if(x=b?g(n):$n(n)&&"teleport start"===n.data?g(n,n.data,"teleport end"):i(n),t(r,e,null,a,c,qn(e),w),Wn(r)&&!r.type.__asyncResolved){let t;b?(t=ii(Bs),t.anchor=x?x.previousSibling:e.lastChild):t=3===n.nodeType?ai(""):ii("div"),t.el=n,r.component.subTree=t}}else 64&E?x=8!==k?_():r.type.hydrate(n,r,a,c,u,w,e,f):128&E&&(x=r.type.hydrate(n,r,a,c,qn(o(n)),u,w,e,h))}return null!=T&&Vn(T,null,c,r),x},d=(e,t,n,s,i,o)=>{o=o||!!t.dynamicChildren;const{type:l,props:u,patchFlag:h,shapeFlag:d,dirs:p,transition:m}=t,g="input"===l||"option"===l;if(g||-1!==h){p&&hn(t,null,n,"created");let l,w=!1;if(v(e)){w=ps(null,m)&&n&&n.vnode.props&&n.vnode.props.appear;const r=e.content.firstChild;if(w){const e=r.getAttribute("class");e&&(r.$cls=e),m.beforeEnter(r)}y(r,e,n),t.el=e=r}if(16&d&&(!u||!u.innerHTML&&!u.textContent)){let r=f(e.firstChild,t,e,n,s,i,o);for(;r;){Kn(e,1)||Bn();const t=r;r=r.nextSibling,c(t)}}else if(8&d){let n=t.children;"\n"!==n[0]||"PRE"!==e.tagName&&"TEXTAREA"!==e.tagName||(n=n.slice(1)),e.textContent!==n&&(Kn(e,0)||Bn(),e.textContent=t.children)}if(u)if(g||!o||48&h){const t=e.tagName.includes("-");for(const s in u)(g&&(s.endsWith("value")||"indeterminate"===s)||a(s)&&!k(s)||"."===s[0]||t)&&r(e,s,null,u[s],void 0,n)}else if(u.onClick)r(e,"onClick",null,u.onClick,void 0,n);else if(4&h&&gt(u.style))for(const e in u.style)u.style[e];(l=u&&u.onVnodeBeforeMount)&&fi(l,n,t),p&&hn(t,null,n,"beforeMount"),((l=u&&u.onVnodeMounted)||p||w)&&Vs(()=>{l&&fi(l,n,t),w&&m.enter(e),p&&hn(t,null,n,"mounted")},s)}return e.nextSibling},f=(e,t,r,o,a,c,u)=>{u=u||!!t.dynamicChildren;const d=t.children,f=d.length;for(let p=0;p<f;p++){const t=u?d[p]:d[p]=li(d[p]),m=t.type===qs;e?(m&&!u&&p+1<f&&li(d[p+1]).type===qs&&(l(s(e.data.slice(t.children.length)),r,i(e)),e.data=t.children),e=h(e,t,o,a,c,u)):m&&!t.children?l(t.el=s(""),r):(Kn(r,1)||Bn(),n(null,t,r,null,o,a,qn(r),c))}return e},p=(e,t,n,r,s,a)=>{const{slotScopeIds:c}=t;c&&(s=s?s.concat(c):c);const h=o(e),d=f(i(e),t,h,n,r,s,a);return d&&$n(d)&&"]"===d.data?i(t.anchor=d):(Bn(),l(t.anchor=u("]"),h,d),d)},m=(e,t,r,s,a,l)=>{if(Kn(e.parentElement,1)||Bn(),t.el=null,l){const t=g(e);for(;;){const n=i(e);if(!n||n===t)break;c(n)}}const u=i(e),h=o(e);return c(e),n(null,t,h,u,r,s,qn(h),a),r&&(r.vnode.el=t.el,Rs(r,t.el)),u},g=(e,t="[",n="]")=>{let r=0;for(;e;)if((e=i(e))&&$n(e)&&(e.data===t&&r++,e.data===n)){if(0===r)return i(e);r--}return e},y=(e,t,n)=>{const r=t.parentNode;r&&r.replaceChild(e,t);let s=n;for(;s;)s.vnode.el===t&&(s.vnode.el=s.subTree.el=e),s=s.parent},v=e=>1===e.nodeType&&"TEMPLATE"===e.tagName;return[(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),nn(),void(t._vnode=e);h(t.firstChild,e,null,null,null),nn(),t._vnode=e},h]}const Hn="data-allow-mismatch",Gn={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Kn(e,t){if(0===t||1===t)for(;e&&!e.hasAttribute(Hn);)e=e.parentElement;const n=e&&e.getAttribute(Hn);if(null==n)return!1;if(""===n)return!0;{const e=n.split(",");return!(0!==t||!e.includes("children"))||e.includes(Gn[t])}}j().requestIdleCallback,j().cancelIdleCallback;const Wn=e=>!!e.type.__asyncLoader;
/*! #__NO_SIDE_EFFECTS__ */function Qn(e){y(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:s=200,hydrate:i,timeout:o,suspensible:a=!0,onError:c}=e;let l,u=null,h=0;const d=()=>{let e;return u||(e=u=t().catch(e=>{if(e=e instanceof Error?e:new Error(String(e)),c)return new Promise((t,n)=>{c(e,()=>t((h++,u=null,d())),()=>n(e),h+1)});throw e}).then(t=>e!==u&&u?u:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),l=t,t)))};return Fn({name:"AsyncComponentWrapper",__asyncLoader:d,__asyncHydrate(e,t,n){let r=!1;(t.bu||(t.bu=[])).push(()=>r=!0);const s=()=>{r||n()},o=i?()=>{const n=i(s,t=>function(e,t){if($n(e)&&"["===e.data){let n=1,r=e.nextSibling;for(;r;){if(1===r.nodeType){if(!1===t(r))break}else if($n(r))if("]"===r.data){if(0===--n)break}else"["===r.data&&n++;r=r.nextSibling}}else t(e)}(e,t));n&&(t.bum||(t.bum=[])).push(n)}:s;l?o():d().then(()=>!t.isUnmounted&&o())},get __asyncResolved(){return l},setup(){const e=gi;if(Un(e),l)return()=>Jn(l,e);const t=t=>{u=null,$t(t,e,13,!r)};if(a&&e.suspense||Ti)return d().then(t=>()=>Jn(t,e)).catch(e=>(t(e),()=>r?ii(r,{error:e}):null));const i=St(!1),c=St(),h=St(!!s);return s&&setTimeout(()=>{h.value=!1},s),null!=o&&setTimeout(()=>{if(!i.value&&!c.value){const e=new Error(`Async component timed out after ${o}ms.`);t(e),c.value=e}},o),d().then(()=>{i.value=!0,e.parent&&Yn(e.parent.vnode)&&e.parent.update()}).catch(e=>{t(e),c.value=e}),()=>i.value&&l?Jn(l,e):c.value&&r?ii(r,{error:c.value}):n&&!h.value?ii(n):void 0}})}function Jn(e,t){const{ref:n,props:r,children:s,ce:i}=t.vnode,o=ii(e,r,s);return o.ref=n,o.ce=i,delete t.vnode.ce,o}const Yn=e=>e.type.__isKeepAlive,Xn={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=yi(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const s=new Map,i=new Set;let o=null;const a=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:h}}}=r,d=h("div");function f(e){sr(e),u(e,n,a,!0)}function p(e){s.forEach((t,n)=>{const r=Ci(t.type);r&&!e(r)&&m(n)})}function m(e){const t=s.get(e);!t||o&&ti(t,o)?o&&sr(o):f(t),s.delete(e),i.delete(e)}r.activate=(e,t,n,r,s)=>{const i=e.component;l(e,t,n,0,a),c(i.vnode,e,t,n,i,a,r,e.slotScopeIds,s),us(()=>{i.isDeactivated=!1,i.a&&L(i.a);const t=e.props&&e.props.onVnodeMounted;t&&fi(t,i.parent,e)},a)},r.deactivate=e=>{const t=e.component;ys(t.m),ys(t.a),l(e,d,null,1,a),us(()=>{t.da&&L(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&fi(n,t.parent,e),t.isDeactivated=!0},a)},bs(()=>[e.include,e.exclude],([e,t])=>{e&&p(t=>Zn(e,t)),t&&p(e=>!Zn(t,e))},{flush:"post",deep:!0});let g=null;const y=()=>{null!=g&&(Os(n.subTree.type)?us(()=>{s.set(g,ir(n.subTree))},n.subTree.suspense):s.set(g,ir(n.subTree)))};return lr(y),hr(y),dr(()=>{s.forEach(e=>{const{subTree:t,suspense:r}=n,s=ir(t);if(e.type===s.type&&e.key===s.key){sr(s);const e=s.component.da;return void(e&&us(e,r))}f(e)})}),()=>{if(g=null,!t.default)return o=null;const n=t.default(),r=n[0];if(n.length>1)return o=null,n;if(!(ei(r)&&(4&r.shapeFlag||128&r.shapeFlag)))return o=null,r;let a=ir(r);if(a.type===$s)return o=null,a;const c=a.type,l=Ci(Wn(a)?a.type.__asyncResolved||{}:c),{include:u,exclude:h,max:d}=e;if(u&&(!l||!Zn(u,l))||h&&l&&Zn(h,l))return a.shapeFlag&=-257,o=a,r;const f=null==a.key?c:a.key,p=s.get(f);return a.el&&(a=oi(a),128&r.shapeFlag&&(r.ssContent=a)),g=f,p?(a.el=p.el,a.component=p.component,a.transition&&Ln(a,a.transition),a.shapeFlag|=512,i.delete(f),i.add(f)):(i.add(f),d&&i.size>parseInt(d,10)&&m(i.values().next().value)),a.shapeFlag|=256,o=a,Os(r.type)?r:a}}};function Zn(e,t){return f(e)?e.some(e=>Zn(e,t)):v(e)?e.split(",").includes(t):"[object RegExp]"===T(e)&&(e.lastIndex=0,e.test(t))}function er(e,t){nr(e,"a",t)}function tr(e,t){nr(e,"da",t)}function nr(e,t,n=gi){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(or(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Yn(e.parent.vnode)&&rr(r,t,n,e),e=e.parent}}function rr(e,t,n,r){const s=or(t,e,r,!0);fr(()=>{u(r[t],s)},n)}function sr(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ir(e){return 128&e.shapeFlag?e.ssContent:e}function or(e,t,n=gi,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{Ie();const s=bi(n),i=qt(t,n,e,r);return s(),Te(),i});return r?s.unshift(i):s.push(i),i}}const ar=e=>(t,n=gi)=>{Ti&&"sp"!==e||or(e,(...e)=>t(...e),n)},cr=ar("bm"),lr=ar("m"),ur=ar("bu"),hr=ar("u"),dr=ar("bum"),fr=ar("um"),pr=ar("sp"),mr=ar("rtg"),gr=ar("rtc");function yr(e,t=gi){or("ec",e,t)}const vr="components";function wr(e,t){return _r(vr,e,!0,t)||e}const br=Symbol.for("v-ndc");function _r(e,t,n=!0,r=!1){const s=on||gi;if(s){const n=s.type;{const e=Ci(n,!1);if(e&&(e===t||e===A(t)||e===R(A(t))))return n}const i=Ir(s[e]||n[e],t)||Ir(s.appContext[e],t);return!i&&r?n:i}}function Ir(e,t){return e&&(e[t]||e[A(t)]||e[R(A(t))])}function Tr(e,t,n,r){let s;const i=n,o=f(e);if(o||v(e)){let n=!1,r=!1;o&&gt(e)&&(n=!vt(e),r=yt(e),e=Me(e)),s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(n?r?Tt(It(e[o])):It(e[o]):e[o],o,void 0,i)}else if("number"==typeof e){s=new Array(e);for(let n=0;n<e;n++)s[n]=t(n+1,n,void 0,i)}else if(b(e))if(e[Symbol.iterator])s=Array.from(e,(e,n)=>t(e,n,void 0,i));else{const n=Object.keys(e);s=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];s[r]=t(e[o],o,r,i)}}else s=[];return s}function Er(e,t,n={},r,s){if(on.ce||on.parent&&Wn(on.parent)&&on.parent.ce)return Ks(),Zs(Bs,null,[ii("slot",n,r)],64);let i=e[t];i&&i._c&&(i._d=!1),Ks();const o=i&&Sr(i(n)),a=n.key||o&&o.key,c=Zs(Bs,{key:(a&&!w(a)?a:`_${t}`)+(!o&&r?"_fb":"")},o||[],o&&1===e._?64:-2);return i&&i._c&&(i._d=!0),c}function Sr(e){return e.some(e=>!ei(e)||e.type!==$s&&!(e.type===Bs&&!Sr(e.children)))?e:null}const kr=e=>e?Ii(e)?xi(e):kr(e.parent):null,xr=l(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kr(e.parent),$root:e=>kr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Lr(e),$forceUpdate:e=>e.f||(e.f=()=>{Xt(e.update)}),$nextTick:e=>e.n||(e.n=Yt.bind(e.proxy)),$watch:e=>Is.bind(e)}),Cr=(e,t)=>e!==r&&!e.__isScriptSetup&&d(e,t),Ar={get({_:e},t){if("__v_skip"===t)return!0;const{ctx:n,setupState:s,data:i,props:o,accessCache:a,type:c,appContext:l}=e;let u;if("$"!==t[0]){const c=a[t];if(void 0!==c)switch(c){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Cr(s,t))return a[t]=1,s[t];if(i!==r&&d(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&d(u,t))return a[t]=3,o[t];if(n!==r&&d(n,t))return a[t]=4,n[t];Nr&&(a[t]=0)}}const h=xr[t];let f,p;return h?("$attrs"===t&&Oe(e.attrs,0,""),h(e)):(f=c.__cssModules)&&(f=f[t])?f:n!==r&&d(n,t)?(a[t]=4,n[t]):(p=l.config.globalProperties,d(p,t)?p[t]:void 0)},set({_:e},t,n){const{data:s,setupState:i,ctx:o}=e;return Cr(i,t)?(i[t]=n,!0):s!==r&&d(s,t)?(s[t]=n,!0):!d(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:o}},a){let c;return!!n[a]||e!==r&&d(e,a)||Cr(t,a)||(c=o[0])&&d(c,a)||d(s,a)||d(xr,a)||d(i.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:d(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Dr(e){return f(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}let Nr=!0;function Rr(e){const t=Lr(e),n=e.proxy,r=e.ctx;Nr=!1,t.beforeCreate&&Or(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:a,watch:c,provide:l,inject:u,created:h,beforeMount:d,mounted:p,beforeUpdate:m,updated:g,activated:v,deactivated:w,beforeDestroy:_,beforeUnmount:I,destroyed:T,unmounted:E,render:S,renderTracked:k,renderTriggered:x,errorCaptured:C,serverPrefetch:A,expose:D,inheritAttrs:N,components:R,directives:O,filters:P}=t;if(u&&function(e,t){f(e)&&(e=Vr(e));for(const n in e){const r=e[n];let s;s=b(r)?"default"in r?Wr(r.from||n,r.default,!0):Wr(r.from||n):Wr(r),Et(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[n]=s}}(u,r,null),a)for(const i in a){const e=a[i];y(e)&&(r[i]=e.bind(n))}if(s){const t=s.call(n,n);b(t)&&(e.data=dt(t))}if(Nr=!0,o)for(const f in o){const e=o[f],t=y(e)?e.bind(n,n):y(e.get)?e.get.bind(n,n):i,s=!y(e)&&y(e.set)?e.set.bind(n):i,a=Ai({get:t,set:s});Object.defineProperty(r,f,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(c)for(const i in c)Pr(c[i],r,n,i);if(l){const e=y(l)?l.call(n):l;Reflect.ownKeys(e).forEach(t=>{Kr(t,e[t])})}function L(e,t){f(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(h&&Or(h,e,"c"),L(cr,d),L(lr,p),L(ur,m),L(hr,g),L(er,v),L(tr,w),L(yr,C),L(gr,k),L(mr,x),L(dr,I),L(fr,E),L(pr,A),f(D))if(D.length){const t=e.exposed||(e.exposed={});D.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===i&&(e.render=S),null!=N&&(e.inheritAttrs=N),R&&(e.components=R),O&&(e.directives=O),A&&Un(e)}function Or(e,t,n){qt(f(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function Pr(e,t,n,r){let s=r.includes(".")?Ts(n,r):()=>n[r];if(v(e)){const n=t[e];y(n)&&bs(s,n)}else if(y(e))bs(s,e.bind(n));else if(b(e))if(f(e))e.forEach(e=>Pr(e,t,n,r));else{const r=y(e.handler)?e.handler.bind(n):t[e.handler];y(r)&&bs(s,r,e)}}function Lr(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let c;return a?c=a:s.length||n||r?(c={},s.length&&s.forEach(e=>Mr(c,e,o,!0)),Mr(c,t,o)):c=t,b(t)&&i.set(t,c),c}function Mr(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Mr(e,i,n,!0),s&&s.forEach(t=>Mr(e,t,n,!0));for(const o in t)if(r&&"expose"===o);else{const r=Fr[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}const Fr={data:Ur,props:qr,emits:qr,methods:Br,computed:Br,beforeCreate:jr,created:jr,beforeMount:jr,mounted:jr,beforeUpdate:jr,updated:jr,beforeDestroy:jr,beforeUnmount:jr,destroyed:jr,unmounted:jr,activated:jr,deactivated:jr,errorCaptured:jr,serverPrefetch:jr,components:Br,directives:Br,watch:function(e,t){if(!e)return t;if(!t)return e;const n=l(Object.create(null),e);for(const r in t)n[r]=jr(e[r],t[r]);return n},provide:Ur,inject:function(e,t){return Br(Vr(e),Vr(t))}};function Ur(e,t){return t?e?function(){return l(y(e)?e.call(this,this):e,y(t)?t.call(this,this):t)}:t:e}function Vr(e){if(f(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function jr(e,t){return e?[...new Set([].concat(e,t))]:t}function Br(e,t){return e?l(Object.create(null),e,t):t}function qr(e,t){return e?f(e)&&f(t)?[...new Set([...e,...t])]:l(Object.create(null),Dr(e),Dr(null!=t?t:{})):t}function $r(){return{app:null,config:{isNativeTag:o,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zr=0;function Hr(e,t){return function(n,r=null){y(n)||(n=l({},n)),null==r||b(r)||(r=null);const s=$r(),i=new WeakSet,o=[];let a=!1;const c=s.app={_uid:zr++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:Ni,get config(){return s.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&y(e.install)?(i.add(e),e.install(c,...t)):y(e)&&(i.add(e),e(c,...t))),c),mixin:e=>(s.mixins.includes(e)||s.mixins.push(e),c),component:(e,t)=>t?(s.components[e]=t,c):s.components[e],directive:(e,t)=>t?(s.directives[e]=t,c):s.directives[e],mount(i,o,l){if(!a){const u=c._ceVNode||ii(n,r);return u.appContext=s,!0===l?l="svg":!1===l&&(l=void 0),o&&t?t(u,i):e(u,i,l),a=!0,c._container=i,i.__vue_app__=c,xi(u.component)}},onUnmount(e){o.push(e)},unmount(){a&&(qt(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide:(e,t)=>(s.provides[e]=t,c),runWithContext(e){const t=Gr;Gr=c;try{return e()}finally{Gr=t}}};return c}}let Gr=null;function Kr(e,t){if(gi){let n=gi.provides;const r=gi.parent&&gi.parent.provides;r===n&&(n=gi.provides=Object.create(r)),n[e]=t}else;}function Wr(e,t,n=!1){const r=yi();if(r||Gr){let s=Gr?Gr._context.provides:r?null==r.parent||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&y(t)?t.call(r&&r.proxy):t}}function Qr(){return!(!yi()&&!Gr)}const Jr={},Yr=()=>Object.create(Jr),Xr=e=>Object.getPrototypeOf(e)===Jr;function Zr(e,t,n,s){const[i,o]=e.propsOptions;let a,c=!1;if(t)for(let r in t){if(k(r))continue;const l=t[r];let u;i&&d(i,u=A(r))?o&&o.includes(u)?(a||(a={}))[u]=l:n[u]=l:xs(e.emitsOptions,r)||r in s&&l===s[r]||(s[r]=l,c=!0)}if(o){const t=bt(n),s=a||r;for(let r=0;r<o.length;r++){const a=o[r];n[a]=es(i,t,a,s[a],e,!d(s,a))}}return c}function es(e,t,n,r,s,i){const o=e[n];if(null!=o){const e=d(o,"default");if(e&&void 0===r){const e=o.default;if(o.type!==Function&&!o.skipFactory&&y(e)){const{propsDefaults:i}=s;if(n in i)r=i[n];else{const o=bi(s);r=i[n]=e.call(null,t),o()}}else r=e;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!e?r=!1:!o[1]||""!==r&&r!==N(n)||(r=!0))}return r}const ts=new WeakMap;function ns(e,t,n=!1){const i=n?ts:t.propsCache,o=i.get(e);if(o)return o;const a=e.props,c={},u=[];let h=!1;if(!y(e)){const r=e=>{h=!0;const[n,r]=ns(e,t,!0);l(c,n),r&&u.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!h)return b(e)&&i.set(e,s),s;if(f(a))for(let s=0;s<a.length;s++){const e=A(a[s]);rs(e)&&(c[e]=r)}else if(a)for(const r in a){const e=A(r);if(rs(e)){const t=a[r],n=c[e]=f(t)||y(t)?{type:t}:l({},t),s=n.type;let i=!1,o=!0;if(f(s))for(let e=0;e<s.length;++e){const t=s[e],n=y(t)&&t.name;if("Boolean"===n){i=!0;break}"String"===n&&(o=!1)}else i=y(s)&&"Boolean"===s.name;n[0]=i,n[1]=o,(i||d(n,"default"))&&u.push(e)}}const p=[c,u];return b(e)&&i.set(e,p),p}function rs(e){return"$"!==e[0]&&!k(e)}const ss=e=>"_"===e||"__"===e||"_ctx"===e||"$stable"===e,is=e=>f(e)?e.map(li):[li(e)],os=(e,t,n)=>{if(t._n)return t;const r=ln((...e)=>is(t(...e)),n);return r._c=!1,r},as=(e,t,n)=>{const r=e._ctx;for(const s in e){if(ss(s))continue;const n=e[s];if(y(n))t[s]=os(0,n,r);else if(null!=n){const e=is(n);t[s]=()=>e}}},cs=(e,t)=>{const n=is(t);e.slots.default=()=>n},ls=(e,t,n)=>{for(const r in t)!n&&ss(r)||(e[r]=t[r])},us=Vs;function hs(e,t){j().__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:c,createText:l,createComment:u,setText:h,setElementText:p,parentNode:m,nextSibling:g,setScopeId:y=i,insertStaticContent:v}=e,w=(e,t,n,r=null,s=null,i=null,o=void 0,a=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!ti(e,t)&&(r=X(e),K(e,s,i,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:h}=t;switch(l){case qs:b(e,t,n,r);break;case $s:I(e,t,n,r);break;case zs:null==e&&T(t,n,r,o);break;case Bs:P(e,t,n,r,s,i,o,a,c);break;default:1&h?E(e,t,n,r,s,i,o,a,c):6&h?F(e,t,n,r,s,i,o,a,c):(64&h||128&h)&&l.process(e,t,n,r,s,i,o,a,c,te)}null!=u&&s?Vn(u,e&&e.ref,i,t||e,!t):null==u&&e&&null!=e.ref&&Vn(e.ref,null,i,e,!0)},b=(e,t,r,s)=>{if(null==e)n(t.el=l(t.children),r,s);else{const n=t.el=e.el;t.children!==e.children&&h(n,t.children)}},I=(e,t,r,s)=>{null==e?n(t.el=u(t.children||""),r,s):t.el=e.el},T=(e,t,n,r)=>{[e.el,e.anchor]=v(e.children,t,n,r,e.el,e.anchor)},E=(e,t,n,r,s,i,o,a,c)=>{"svg"===t.type?o="svg":"math"===t.type&&(o="mathml"),null==e?S(t,n,r,s,i,o,a,c):D(e,t,s,i,o,a,c)},S=(e,t,r,s,i,o,l,u)=>{let h,d;const{props:f,shapeFlag:m,transition:g,dirs:y}=e;if(h=e.el=c(e.type,o,f&&f.is,f),8&m?p(h,e.children):16&m&&C(e.children,h,null,s,i,ds(e,o),l,u),y&&hn(e,null,s,"created"),x(h,e,e.scopeId,l,s),f){for(const e in f)"value"===e||k(e)||a(h,e,null,f[e],o,s);"value"in f&&a(h,"value",null,f.value,o),(d=f.onVnodeBeforeMount)&&fi(d,s,e)}y&&hn(e,null,s,"beforeMount");const v=ps(i,g);v&&g.beforeEnter(h),n(h,t,r),((d=f&&f.onVnodeMounted)||v||y)&&us(()=>{d&&fi(d,s,e),v&&g.enter(h),y&&hn(e,null,s,"mounted")},i)},x=(e,t,n,r,s)=>{if(n&&y(e,n),r)for(let i=0;i<r.length;i++)y(e,r[i]);if(s){let n=s.subTree;if(t===n||Os(n.type)&&(n.ssContent===t||n.ssFallback===t)){const t=s.vnode;x(e,t,t.scopeId,t.slotScopeIds,s.parent)}}},C=(e,t,n,r,s,i,o,a,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=a?ui(e[l]):li(e[l]);w(null,c,t,n,r,s,i,o,a)}},D=(e,t,n,s,i,o,c)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:d}=t;u|=16&e.patchFlag;const f=e.props||r,m=t.props||r;let g;if(n&&fs(n,!1),(g=m.onVnodeBeforeUpdate)&&fi(g,n,t,e),d&&hn(t,e,n,"beforeUpdate"),n&&fs(n,!0),(f.innerHTML&&null==m.innerHTML||f.textContent&&null==m.textContent)&&p(l,""),h?R(e.dynamicChildren,h,l,n,s,ds(t,i),o):c||$(e,t,l,null,n,s,ds(t,i),o,!1),u>0){if(16&u)O(l,f,m,n,i);else if(2&u&&f.class!==m.class&&a(l,"class",null,m.class,i),4&u&&a(l,"style",f.style,m.style,i),8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],s=f[r],o=m[r];o===s&&"value"!==r||a(l,r,s,o,i,n)}}1&u&&e.children!==t.children&&p(l,t.children)}else c||null!=h||O(l,f,m,n,i);((g=m.onVnodeUpdated)||d)&&us(()=>{g&&fi(g,n,t,e),d&&hn(t,e,n,"updated")},s)},R=(e,t,n,r,s,i,o)=>{for(let a=0;a<t.length;a++){const c=e[a],l=t[a],u=c.el&&(c.type===Bs||!ti(c,l)||198&c.shapeFlag)?m(c.el):n;w(c,l,u,null,r,s,i,o,!0)}},O=(e,t,n,s,i)=>{if(t!==n){if(t!==r)for(const r in t)k(r)||r in n||a(e,r,t[r],null,i,s);for(const r in n){if(k(r))continue;const o=n[r],c=t[r];o!==c&&"value"!==r&&a(e,r,c,o,i,s)}"value"in n&&a(e,"value",t.value,n.value,i)}},P=(e,t,r,s,i,o,a,c,u)=>{const h=t.el=e?e.el:l(""),d=t.anchor=e?e.anchor:l("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:m}=t;m&&(c=c?c.concat(m):m),null==e?(n(h,r,s),n(d,r,s),C(t.children||[],r,d,i,o,a,c,u)):f>0&&64&f&&p&&e.dynamicChildren?(R(e.dynamicChildren,p,r,i,o,a,c),(null!=t.key||i&&t===i.subTree)&&ms(e,t,!0)):$(e,t,r,d,i,o,a,c,u)},F=(e,t,n,r,s,i,o,a,c)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?s.ctx.activate(t,n,r,o,c):U(t,n,r,s,i,o,c):V(e,t,c)},U=(e,t,n,s,i,o,a)=>{const c=e.component=function(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||pi,o={uid:mi++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new re(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ns(s,i),emitsOptions:ks(s,i),emit:null,emitted:null,propsDefaults:r,inheritAttrs:s.inheritAttrs,ctx:r,data:r,props:r,attrs:r,slots:r,refs:r,setupState:r,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};o.ctx={_:o},o.root=t?t.root:o,o.emit=Ss.bind(null,o),e.ce&&e.ce(o);return o}(e,s,i);if(Yn(e)&&(c.ctx.renderer=te),function(e,t=!1,n=!1){t&&wi(t);const{props:r,children:s}=e.vnode,i=Ii(e);(function(e,t,n,r=!1){const s={},i=Yr();e.propsDefaults=Object.create(null),Zr(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:ft(s):e.type.props?e.props=s:e.props=i,e.attrs=i})(e,r,i,t),((e,t,n)=>{const r=e.slots=Yr();if(32&e.vnode.shapeFlag){const e=t.__;e&&M(r,"__",e,!0);const s=t._;s?(ls(r,t,n),n&&M(r,"_",s,!0)):as(t,r)}else t&&cs(e,t)})(e,s,n||t);const o=i?function(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ar);const{setup:r}=n;if(r){Ie();const n=e.setupContext=r.length>1?function(e){const t=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,ki),slots:e.slots,emit:e.emit,expose:t}}(e):null,s=bi(e),i=Bt(r,e,0,[e.props,n]),o=_(i);if(Te(),s(),!o&&!e.sp||Wn(e)||Un(e),o){if(i.then(_i,_i),t)return i.then(t=>{Ei(e,t)}).catch(t=>{$t(t,e,0)});e.asyncDep=i}else Ei(e,i)}else Si(e)}(e,t):void 0;t&&wi(!1)}(c,!1,a),c.asyncDep){if(i&&i.registerDep(c,B,a),!e.el){const r=c.subTree=ii($s);I(null,r,t,n),e.placeholder=r.el}}else B(c,e,t,n,i,o,a)},V=(e,t,n)=>{const r=t.component=e.component;if(function(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!s&&!a||a&&a.$stable)||r!==o&&(r?!o||Ns(r,o,l):!!o);if(1024&c)return!0;if(16&c)return r?Ns(r,o,l):!!o;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(o[n]!==r[n]&&!xs(l,n))return!0}}return!1}(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void q(r,t,n);r.next=t,r.update()}else t.el=e.el,r.vnode=t},B=(e,t,n,r,s,i,o)=>{const a=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{const n=gs(e);if(n)return t&&(t.el=l.el,q(e,t,o)),void n.asyncDep.then(()=>{e.isUnmounted||a()})}let u,h=t;fs(e,!1),t?(t.el=l.el,q(e,t,o)):t=l,n&&L(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&fi(u,c,t,l),fs(e,!0);const d=Cs(e),f=e.subTree;e.subTree=d,w(f,d,m(f.el),X(f),e,s,i),t.el=d.el,null===h&&Rs(e,d.el),r&&us(r,s),(u=t.props&&t.props.onVnodeUpdated)&&us(()=>fi(u,c,t,l),s)}else{let o;const{el:a,props:c}=t,{bm:l,m:u,parent:h,root:d,type:f}=e,p=Wn(t);if(fs(e,!1),l&&L(l),!p&&(o=c&&c.onVnodeBeforeMount)&&fi(o,h,t),fs(e,!0),a&&se){const t=()=>{e.subTree=Cs(e),se(a,e.subTree,e,s,null)};p&&f.__asyncHydrate?f.__asyncHydrate(a,e,t):t()}else{d.ce&&!1!==d.ce._def.shadowRoot&&d.ce._injectChildStyle(f);const o=e.subTree=Cs(e);w(null,o,n,r,e,s,i),t.el=o.el}if(u&&us(u,s),!p&&(o=c&&c.onVnodeMounted)){const e=t;us(()=>fi(o,h,e),s)}(256&t.shapeFlag||h&&Wn(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&us(e.a,s),e.isMounted=!0,t=n=r=null}};e.scope.on();const c=e.effect=new ae(a);e.scope.off();const l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>Xt(u),fs(e,!0),l()},q=(e,t,n)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=bt(s),[c]=e.propsOptions;let l=!1;if(!(r||o>0)||16&o){let r;Zr(e,t,s,i)&&(l=!0);for(const i in a)t&&(d(t,i)||(r=N(i))!==i&&d(t,r))||(c?!n||void 0===n[i]&&void 0===n[r]||(s[i]=es(c,a,i,void 0,e,!0)):delete s[i]);if(i!==a)for(const e in i)t&&d(t,e)||(delete i[e],l=!0)}else if(8&o){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(xs(e.emitsOptions,o))continue;const u=t[o];if(c)if(d(i,o))u!==i[o]&&(i[o]=u,l=!0);else{const t=A(o);s[t]=es(c,a,t,u,e,!1)}else u!==i[o]&&(i[o]=u,l=!0)}}l&&Pe(e.attrs,"set","")}(e,t.props,s,n),((e,t,n)=>{const{vnode:s,slots:i}=e;let o=!0,a=r;if(32&s.shapeFlag){const e=t._;e?n&&1===e?o=!1:ls(i,t,n):(o=!t.$stable,as(t,i)),a=t}else t&&(cs(e,t),a={default:1});if(o)for(const r in i)ss(r)||null!=a[r]||delete i[r]})(e,t.children,n),Ie(),tn(e),Te()},$=(e,t,n,r,s,i,o,a,c=!1)=>{const l=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:d,shapeFlag:f}=t;if(d>0){if(128&d)return void H(l,h,n,r,s,i,o,a,c);if(256&d)return void z(l,h,n,r,s,i,o,a,c)}8&f?(16&u&&Y(l,s,i),h!==l&&p(n,h)):16&u?16&f?H(l,h,n,r,s,i,o,a,c):Y(l,s,i,!0):(8&u&&p(n,""),16&f&&C(h,n,r,s,i,o,a,c))},z=(e,t,n,r,i,o,a,c,l)=>{t=t||s;const u=(e=e||s).length,h=t.length,d=Math.min(u,h);let f;for(f=0;f<d;f++){const r=t[f]=l?ui(t[f]):li(t[f]);w(e[f],r,n,null,i,o,a,c,l)}u>h?Y(e,i,o,!0,!1,d):C(t,n,r,i,o,a,c,l,d)},H=(e,t,n,r,i,o,a,c,l)=>{let u=0;const h=t.length;let d=e.length-1,f=h-1;for(;u<=d&&u<=f;){const r=e[u],s=t[u]=l?ui(t[u]):li(t[u]);if(!ti(r,s))break;w(r,s,n,null,i,o,a,c,l),u++}for(;u<=d&&u<=f;){const r=e[d],s=t[f]=l?ui(t[f]):li(t[f]);if(!ti(r,s))break;w(r,s,n,null,i,o,a,c,l),d--,f--}if(u>d){if(u<=f){const e=f+1,s=e<h?t[e].el:r;for(;u<=f;)w(null,t[u]=l?ui(t[u]):li(t[u]),n,s,i,o,a,c,l),u++}}else if(u>f)for(;u<=d;)K(e[u],i,o,!0),u++;else{const p=u,m=u,g=new Map;for(u=m;u<=f;u++){const e=t[u]=l?ui(t[u]):li(t[u]);null!=e.key&&g.set(e.key,u)}let y,v=0;const b=f-m+1;let _=!1,I=0;const T=new Array(b);for(u=0;u<b;u++)T[u]=0;for(u=p;u<=d;u++){const r=e[u];if(v>=b){K(r,i,o,!0);continue}let s;if(null!=r.key)s=g.get(r.key);else for(y=m;y<=f;y++)if(0===T[y-m]&&ti(r,t[y])){s=y;break}void 0===s?K(r,i,o,!0):(T[s-m]=u+1,s>=I?I=s:_=!0,w(r,t[s],n,null,i,o,a,c,l),v++)}const E=_?function(e){const t=e.slice(),n=[0];let r,s,i,o,a;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}i=n.length,o=n[i-1];for(;i-- >0;)n[i]=o,o=t[o];return n}(T):s;for(y=E.length-1,u=b-1;u>=0;u--){const e=m+u,s=t[e],d=t[e+1],f=e+1<h?d.el||d.placeholder:r;0===T[u]?w(null,s,n,f,i,o,a,c,l):_&&(y<0||u!==E[y]?G(s,n,f,2):y--)}}},G=(e,t,r,s,i=null)=>{const{el:a,type:c,transition:l,children:u,shapeFlag:h}=e;if(6&h)return void G(e.component.subTree,t,r,s);if(128&h)return void e.suspense.move(t,r,s);if(64&h)return void c.move(e,t,r,te);if(c===Bs){n(a,t,r);for(let e=0;e<u.length;e++)G(u[e],t,r,s);return void n(e.anchor,t,r)}if(c===zs)return void(({el:e,anchor:t},r,s)=>{let i;for(;e&&e!==t;)i=g(e),n(e,r,s),e=i;n(t,r,s)})(e,t,r);if(2!==s&&1&h&&l)if(0===s)l.beforeEnter(a),n(a,t,r),us(()=>l.enter(a),i);else{const{leave:s,delayLeave:i,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?o(a):n(a,t,r)},h=()=>{s(a,()=>{u(),c&&c()})};i?i(a,u,h):h()}else n(a,t,r)},K=(e,t,n,r=!1,s=!1)=>{const{type:i,props:o,ref:a,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:h,dirs:d,cacheIndex:f}=e;if(-2===h&&(s=!1),null!=a&&(Ie(),Vn(a,null,n,e,!0),Te()),null!=f&&(t.renderCache[f]=void 0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,m=!Wn(e);let g;if(m&&(g=o&&o.onVnodeBeforeUnmount)&&fi(g,t,e),6&u)J(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&hn(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,te,r):l&&!l.hasOnce&&(i!==Bs||h>0&&64&h)?Y(l,t,n,!1,!0):(i===Bs&&384&h||!s&&16&u)&&Y(c,t,n),r&&W(e)}(m&&(g=o&&o.onVnodeUnmounted)||p)&&us(()=>{g&&fi(g,t,e),p&&hn(e,null,t,"unmounted")},n)},W=e=>{const{type:t,el:n,anchor:r,transition:s}=e;if(t===Bs)return void Q(n,r);if(t===zs)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=g(e),o(e),e=n;o(t)})(e);const i=()=>{o(n),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:r}=s,o=()=>t(n,i);r?r(e.el,i,o):o()}else i()},Q=(e,t)=>{let n;for(;e!==t;)n=g(e),o(e),e=n;o(t)},J=(e,t,n)=>{const{bum:r,scope:s,job:i,subTree:o,um:a,m:c,a:l,parent:u,slots:{__:h}}=e;ys(c),ys(l),r&&L(r),u&&f(h)&&h.forEach(e=>{u.renderCache[e]=void 0}),s.stop(),i&&(i.flags|=8,K(o,e,t,n)),a&&us(a,t),us(()=>{e.isUnmounted=!0},t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Y=(e,t,n,r=!1,s=!1,i=0)=>{for(let o=i;o<e.length;o++)K(e[o],t,n,r,s)},X=e=>{if(6&e.shapeFlag)return X(e.component.subTree);if(128&e.shapeFlag)return e.suspense.next();const t=g(e.anchor||e.el),n=t&&t[dn];return n?g(n):t};let Z=!1;const ee=(e,t,n)=>{null==e?t._vnode&&K(t._vnode,null,null,!0):w(t._vnode||null,e,t,null,null,null,n),t._vnode=e,Z||(Z=!0,tn(),nn(),Z=!1)},te={p:w,um:K,m:G,r:W,mt:U,mc:C,pc:$,pbc:R,n:X,o:e};let ne,se;return t&&([ne,se]=t(te)),{render:ee,hydrate:ne,createApp:Hr(ee,ne)}}function ds({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fs({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ps(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ms(e,t,n=!1){const r=e.children,s=t.children;if(f(r)&&f(s))for(let i=0;i<r.length;i++){const e=r[i];let t=s[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=s[i]=ui(s[i]),t.el=e.el),n||-2===t.patchFlag||ms(e,t)),t.type===qs&&(t.el=e.el),t.type!==$s||t.el||(t.el=e.el)}}function gs(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gs(t)}function ys(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const vs=Symbol.for("v-scx"),ws=()=>Wr(vs);function bs(e,t,n){return _s(e,t,n)}function _s(e,t,n=r){const{immediate:s,deep:o,flush:a,once:c}=n,u=l({},n),h=t&&s||!t&&"post"!==a;let d;if(Ti)if("sync"===a){const e=ws();d=e.__watcherHandles||(e.__watcherHandles=[])}else if(!h){const e=()=>{};return e.stop=i,e.resume=i,e.pause=i,e}const f=gi;u.call=(e,t,n)=>qt(e,f,t,n);let p=!1;"post"===a?u.scheduler=e=>{us(e,f&&f.suspense)}:"sync"!==a&&(p=!0,u.scheduler=(e,t)=>{t?e():Xt(e)}),u.augmentJob=e=>{t&&(e.flags|=4),p&&(e.flags|=2,f&&(e.id=f.uid,e.i=f))};const m=Vt(e,t,u);return Ti&&(d?d.push(m):h&&m()),m}function Is(e,t,n){const r=this.proxy,s=v(e)?e.includes(".")?Ts(r,e):()=>r[e]:e.bind(r,r);let i;y(t)?i=t:(i=t.handler,n=t);const o=bi(this),a=_s(s,i.bind(r),n);return o(),a}function Ts(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}const Es=(e,t)=>"modelValue"===t||"model-value"===t?e.modelModifiers:e[`${t}Modifiers`]||e[`${A(t)}Modifiers`]||e[`${N(t)}Modifiers`];function Ss(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||r;let i=n;const o=t.startsWith("update:"),a=o&&Es(s,t.slice(7));let c;a&&(a.trim&&(i=n.map(e=>v(e)?e.trim():e)),a.number&&(i=n.map(F)));let l=s[c=O(t)]||s[c=O(A(t))];!l&&o&&(l=s[c=O(N(t))]),l&&qt(l,e,6,i);const u=s[c+"Once"];if(u){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,qt(u,e,6,i)}}function ks(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(void 0!==s)return s;const i=e.emits;let o={},a=!1;if(!y(e)){const r=e=>{const n=ks(e,t,!0);n&&(a=!0,l(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||a?(f(i)?i.forEach(e=>o[e]=null):l(o,i),b(e)&&r.set(e,o),o):(b(e)&&r.set(e,null),null)}function xs(e,t){return!(!e||!a(t))&&(t=t.slice(2).replace(/Once$/,""),d(e,t[0].toLowerCase()+t.slice(1))||d(e,N(t))||d(e,t))}function Cs(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:d,data:f,setupState:p,ctx:m,inheritAttrs:g}=e,y=cn(e);let v,w;try{if(4&n.shapeFlag){const e=s||r,t=e;v=li(u.call(t,e,h,d,p,f,m)),w=a}else{const e=t;0,v=li(e.length>1?e(d,{attrs:a,slots:o,emit:l}):e(d,null)),w=t.props?a:As(a)}}catch(_){Hs.length=0,$t(_,e,1),v=ii($s)}let b=v;if(w&&!1!==g){const e=Object.keys(w),{shapeFlag:t}=b;e.length&&7&t&&(i&&e.some(c)&&(w=Ds(w,i)),b=oi(b,w,!1,!0))}return n.dirs&&(b=oi(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&Ln(b,n.transition),v=b,cn(y),v}const As=e=>{let t;for(const n in e)("class"===n||"style"===n||a(n))&&((t||(t={}))[n]=e[n]);return t},Ds=(e,t)=>{const n={};for(const r in e)c(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function Ns(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!xs(n,i))return!0}return!1}function Rs({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}const Os=e=>e.__isSuspense;let Ps=0;const Ls={name:"Suspense",__isSuspense:!0,process(e,t,n,r,s,i,o,a,c,l){if(null==e)!function(e,t,n,r,s,i,o,a,c){const{p:l,o:{createElement:u}}=c,h=u("div"),d=e.suspense=Fs(e,s,r,t,h,n,i,o,a,c);l(null,d.pendingBranch=e.ssContent,h,null,r,d,i,o),d.deps>0?(Ms(e,"onPending"),Ms(e,"onFallback"),l(null,e.ssFallback,t,n,r,null,i,o),js(d,e.ssFallback)):d.resolve(!1,!0)}(t,n,r,s,i,o,a,c,l);else{if(i&&i.deps>0&&!e.suspense.isInFallback)return t.suspense=e.suspense,t.suspense.vnode=t,void(t.el=e.el);!function(e,t,n,r,s,i,o,a,{p:c,um:l,o:{createElement:u}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:m,isInFallback:g,isHydrating:y}=h;if(m)h.pendingBranch=d,ti(d,m)?(c(m,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():g&&(y||(c(p,f,n,r,s,null,i,o,a),js(h,f)))):(h.pendingId=Ps++,y?(h.isHydrating=!1,h.activeBranch=m):l(m,s,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),g?(c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0?h.resolve():(c(p,f,n,r,s,null,i,o,a),js(h,f))):p&&ti(d,p)?(c(p,d,n,r,s,h,i,o,a),h.resolve(!0)):(c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0&&h.resolve()));else if(p&&ti(d,p))c(p,d,n,r,s,h,i,o,a),js(h,d);else if(Ms(t,"onPending"),h.pendingBranch=d,512&d.shapeFlag?h.pendingId=d.component.suspenseId:h.pendingId=Ps++,c(null,d,h.hiddenContainer,null,s,h,i,o,a),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout(()=>{h.pendingId===t&&h.fallback(f)},e):0===e&&h.fallback(f)}}(e,t,n,r,s,o,a,c,l)}},hydrate:function(e,t,n,r,s,i,o,a,c){const l=t.suspense=Fs(t,r,n,e.parentNode,document.createElement("div"),null,s,i,o,a,!0),u=c(e,l.pendingBranch=t.ssContent,n,l,i,o);0===l.deps&&l.resolve(!1,!0);return u},normalize:function(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=Us(r?n.default:n),e.ssFallback=r?Us(n.fallback):ii($s)}};function Ms(e,t){const n=e.props&&e.props[t];y(n)&&n()}function Fs(e,t,n,r,s,i,o,a,c,l,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:m,remove:g}}=l;let y;const v=function(e){const t=e.props&&e.props.suspensible;return null!=t&&!1!==t}(e);v&&t&&t.pendingBranch&&(y=t.pendingId,t.deps++);const w=e.props?U(e.props.timeout):void 0,b=i,_={vnode:e,parent:t,parentComponent:n,namespace:o,container:r,hiddenContainer:s,deps:0,pendingId:Ps++,timeout:"number"==typeof w?w:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(e=!1,n=!1){const{vnode:r,activeBranch:s,pendingBranch:o,pendingId:a,effects:c,parentComponent:l,container:u}=_;let h=!1;_.isHydrating?_.isHydrating=!1:e||(h=s&&o.transition&&"out-in"===o.transition.mode,h&&(s.transition.afterLeave=()=>{a===_.pendingId&&(d(o,u,i===b?p(s):i,0),en(c))}),s&&(m(s.el)===u&&(i=p(s)),f(s,l,_,!0)),h||d(o,u,i,0)),js(_,o),_.pendingBranch=null,_.isInFallback=!1;let g=_.parent,w=!1;for(;g;){if(g.pendingBranch){g.effects.push(...c),w=!0;break}g=g.parent}w||h||en(c),_.effects=[],v&&t&&t.pendingBranch&&y===t.pendingId&&(t.deps--,0!==t.deps||n||t.resolve()),Ms(r,"onResolve")},fallback(e){if(!_.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:s,namespace:i}=_;Ms(t,"onFallback");const o=p(n),l=()=>{_.isInFallback&&(h(null,e,s,o,r,null,i,a,c),js(_,e))},u=e.transition&&"out-in"===e.transition.mode;u&&(n.transition.afterLeave=l),_.isInFallback=!0,f(n,r,null,!0),u||l()},move(e,t,n){_.activeBranch&&d(_.activeBranch,e,t,n),_.container=e},next:()=>_.activeBranch&&p(_.activeBranch),registerDep(e,t,n){const r=!!_.pendingBranch;r&&_.deps++;const s=e.vnode.el;e.asyncDep.catch(t=>{$t(t,e,0)}).then(i=>{if(e.isUnmounted||_.isUnmounted||_.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:a}=e;Ei(e,i),s&&(a.el=s);const c=!s&&e.subTree.el;t(e,a,m(s||e.subTree.el),s?null:p(e.subTree),_,o,n),c&&g(c),Rs(e,a.el),r&&0===--_.deps&&_.resolve()})},unmount(e,t){_.isUnmounted=!0,_.activeBranch&&f(_.activeBranch,n,e,t),_.pendingBranch&&f(_.pendingBranch,n,e,t)}};return _}function Us(e){let t;if(y(e)){const n=Qs&&e._c;n&&(e._d=!1,Ks()),e=e(),n&&(e._d=!0,t=Gs,Ws())}if(f(e)){const t=function(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!ei(r))return;if(r.type!==$s||"v-if"===r.children){if(t)return;t=r}}return t}(e);e=t}return e=li(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(t=>t!==e)),e}function Vs(e,t){t&&t.pendingBranch?f(e)?t.effects.push(...e):t.effects.push(e):en(e)}function js(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e;let s=t.el;for(;!s&&t.component;)s=(t=t.component.subTree).el;n.el=s,r&&r.subTree===n&&(r.vnode.el=s,Rs(r,s))}const Bs=Symbol.for("v-fgt"),qs=Symbol.for("v-txt"),$s=Symbol.for("v-cmt"),zs=Symbol.for("v-stc"),Hs=[];let Gs=null;function Ks(e=!1){Hs.push(Gs=e?null:[])}function Ws(){Hs.pop(),Gs=Hs[Hs.length-1]||null}let Qs=1;function Js(e,t=!1){Qs+=e,e<0&&Gs&&t&&(Gs.hasOnce=!0)}function Ys(e){return e.dynamicChildren=Qs>0?Gs||s:null,Ws(),Qs>0&&Gs&&Gs.push(e),e}function Xs(e,t,n,r,s,i){return Ys(si(e,t,n,r,s,i,!0))}function Zs(e,t,n,r,s){return Ys(ii(e,t,n,r,s,!0))}function ei(e){return!!e&&!0===e.__v_isVNode}function ti(e,t){return e.type===t.type&&e.key===t.key}const ni=({key:e})=>null!=e?e:null,ri=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?v(e)||Et(e)||y(e)?{i:on,r:e,k:t,f:!!n}:e:null);function si(e,t=null,n=null,r=0,s=null,i=(e===Bs?0:1),o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ni(t),ref:t&&ri(t),scopeId:an,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:on};return a?(hi(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=v(n)?8:16),Qs>0&&!o&&Gs&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&Gs.push(c),c}const ii=function(e,t=null,n=null,r=0,s=null,i=!1){e&&e!==br||(e=$s);if(ei(e)){const r=oi(e,t,!0);return n&&hi(r,n),Qs>0&&!i&&Gs&&(6&r.shapeFlag?Gs[Gs.indexOf(e)]=r:Gs.push(r)),r.patchFlag=-2,r}o=e,y(o)&&"__vccOpts"in o&&(e=e.__vccOpts);var o;if(t){t=function(e){return e?wt(e)||Xr(e)?l({},e):e:null}(t);let{class:e,style:n}=t;e&&!v(e)&&(t.class=G(e)),b(n)&&(wt(n)&&!f(n)&&(n=l({},n)),t.style=B(n))}const a=v(e)?1:Os(e)?128:fn(e)?64:b(e)?4:y(e)?2:0;return si(e,t,n,r,s,a,i,!0)};function oi(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=e,l=t?di(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&ni(l),ref:t&&t.ref?n&&i?f(i)?i.concat(ri(t)):[i,ri(t)]:ri(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Bs?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&oi(e.ssContent),ssFallback:e.ssFallback&&oi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Ln(u,c.clone(u)),u}function ai(e=" ",t=0){return ii(qs,null,e,t)}function ci(e="",t=!1){return t?(Ks(),Zs($s,null,e)):ii($s,null,e)}function li(e){return null==e||"boolean"==typeof e?ii($s):f(e)?ii(Bs,null,e.slice()):ei(e)?ui(e):ii(qs,null,String(e))}function ui(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:oi(e)}function hi(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(f(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),hi(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||Xr(t)?3===r&&on&&(1===on.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=on}}else y(t)?(t={default:t,_ctx:on},n=32):(t=String(t),64&r?(n=16,t=[ai(t)]):n=8);e.children=t,e.shapeFlag|=n}function di(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=G([t.class,r.class]));else if("style"===e)t.style=B([t.style,r.style]);else if(a(e)){const n=t[e],s=r[e];!s||n===s||f(n)&&n.includes(s)||(t[e]=n?[].concat(n,s):s)}else""!==e&&(t[e]=r[e])}return t}function fi(e,t,n,r=null){qt(e,t,7,[n,r])}const pi=$r();let mi=0;let gi=null;const yi=()=>gi||on;let vi,wi;{const e=j(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};vi=t("__VUE_INSTANCE_SETTERS__",e=>gi=e),wi=t("__VUE_SSR_SETTERS__",e=>Ti=e)}const bi=e=>{const t=gi;return vi(e),e.scope.on(),()=>{e.scope.off(),vi(t)}},_i=()=>{gi&&gi.scope.off(),vi(null)};function Ii(e){return 4&e.vnode.shapeFlag}let Ti=!1;function Ei(e,t,n){y(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:b(t)&&(e.setupState=Nt(t)),Si(e)}function Si(e,t,n){const r=e.type;e.render||(e.render=r.render||i);{const t=bi(e);Ie();try{Rr(e)}finally{Te(),t()}}}const ki={get:(e,t)=>(Oe(e,0,""),e[t])};function xi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Nt(_t(e.exposed)),{get:(t,n)=>n in t?t[n]:n in xr?xr[n](e):void 0,has:(e,t)=>t in e||t in xr})):e.proxy}function Ci(e,t=!0){return y(e)?e.displayName||e.name:e.name||t&&e.__name}const Ai=(e,t)=>{const n=function(e,t,n=!1){let r,s;return y(e)?r=e:(r=e.get,s=e.set),new Lt(r,s,n)}(e,0,Ti);return n};function Di(e,t,n){const r=arguments.length;return 2===r?b(t)&&!f(t)?ei(t)?ii(e,null,[t]):ii(e,t):ii(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&ei(n)&&(n=[n]),ii(e,t,n))}const Ni="3.5.18";
/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ri;const Oi="undefined"!=typeof window&&window.trustedTypes;if(Oi)try{Ri=Oi.createPolicy("vue",{createHTML:e=>e})}catch(mL){}const Pi=Ri?e=>Ri.createHTML(e):e=>e,Li="undefined"!=typeof document?document:null,Mi=Li&&Li.createElement("template"),Fi={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s="svg"===t?Li.createElementNS("http://www.w3.org/2000/svg",e):"mathml"===t?Li.createElementNS("http://www.w3.org/1998/Math/MathML",e):n?Li.createElement(e,{is:n}):Li.createElement(e);return"select"===e&&r&&null!=r.multiple&&s.setAttribute("multiple",r.multiple),s},createText:e=>Li.createTextNode(e),createComment:e=>Li.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Li.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),s!==i&&(s=s.nextSibling););else{Mi.innerHTML=Pi("svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e);const s=Mi.content;if("svg"===r||"mathml"===r){const e=s.firstChild;for(;e.firstChild;)s.appendChild(e.firstChild);s.removeChild(e)}t.insertBefore(s,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ui="transition",Vi="animation",ji=Symbol("_vtc"),Bi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qi=l({},xn,Bi),$i=(e=>(e.displayName="Transition",e.props=qi,e))((e,{slots:t})=>Di(Dn,function(e){const t={};for(const l in e)l in Bi||(t[l]=e[l]);if(!1===e.css)return t;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,m=function(e){if(null==e)return null;if(b(e))return[Gi(e.enter),Gi(e.leave)];{const t=Gi(e);return[t,t]}}(s),g=m&&m[0],y=m&&m[1],{onBeforeEnter:v,onEnter:w,onEnterCancelled:_,onLeave:I,onLeaveCancelled:T,onBeforeAppear:E=v,onAppear:S=w,onAppearCancelled:k=_}=t,x=(e,t,n,r)=>{e._enterCancelled=r,Wi(e,t?h:a),Wi(e,t?u:o),n&&n()},C=(e,t)=>{e._isLeaving=!1,Wi(e,d),Wi(e,p),Wi(e,f),t&&t()},A=e=>(t,n)=>{const s=e?S:w,o=()=>x(t,e,n);zi(s,[t,o]),Qi(()=>{Wi(t,e?c:i),Ki(t,e?h:a),Hi(s)||Yi(t,r,g,o)})};return l(t,{onBeforeEnter(e){zi(v,[e]),Ki(e,i),Ki(e,o)},onBeforeAppear(e){zi(E,[e]),Ki(e,c),Ki(e,u)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>C(e,t);Ki(e,d),e._enterCancelled?(Ki(e,f),eo()):(eo(),Ki(e,f)),Qi(()=>{e._isLeaving&&(Wi(e,d),Ki(e,p),Hi(I)||Yi(e,r,y,n))}),zi(I,[e,n])},onEnterCancelled(e){x(e,!1,void 0,!0),zi(_,[e])},onAppearCancelled(e){x(e,!0,void 0,!0),zi(k,[e])},onLeaveCancelled(e){C(e),zi(T,[e])}})}(e),t)),zi=(e,t=[])=>{f(e)?e.forEach(e=>e(...t)):e&&e(...t)},Hi=e=>!!e&&(f(e)?e.some(e=>e.length>1):e.length>1);function Gi(e){return U(e)}function Ki(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[ji]||(e[ji]=new Set)).add(t)}function Wi(e,t){t.split(/\s+/).forEach(t=>t&&e.classList.remove(t));const n=e[ji];n&&(n.delete(t),n.size||(e[ji]=void 0))}function Qi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Ji=0;function Yi(e,t,n,r){const s=e._endId=++Ji,i=()=>{s===e._endId&&r()};if(null!=n)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=function(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),s=r(`${Ui}Delay`),i=r(`${Ui}Duration`),o=Xi(s,i),a=r(`${Vi}Delay`),c=r(`${Vi}Duration`),l=Xi(a,c);let u=null,h=0,d=0;t===Ui?o>0&&(u=Ui,h=o,d=i.length):t===Vi?l>0&&(u=Vi,h=l,d=c.length):(h=Math.max(o,l),u=h>0?o>l?Ui:Vi:null,d=u?u===Ui?i.length:c.length:0);const f=u===Ui&&/\b(transform|all)(,|$)/.test(r(`${Ui}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}(e,t);if(!o)return r();const l=o+"end";let u=0;const h=()=>{e.removeEventListener(l,d),i()},d=t=>{t.target===e&&++u>=c&&h()};setTimeout(()=>{u<c&&h()},a+1),e.addEventListener(l,d)}function Xi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((t,n)=>Zi(t)+Zi(e[n])))}function Zi(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function eo(){return document.body.offsetHeight}const to=Symbol("_vod"),no=Symbol("_vsh"),ro={beforeMount(e,{value:t},{transition:n}){e[to]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):so(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),so(e,!0),r.enter(e)):r.leave(e,()=>{so(e,!1)}):so(e,t))},beforeUnmount(e,{value:t}){so(e,t)}};function so(e,t){e.style.display=t?e[to]:"none",e[no]=!t}const io=Symbol(""),oo=/(^|;)\s*display\s*:/;const ao=/\s*!important$/;function co(e,t,n){if(f(n))n.forEach(n=>co(e,t,n));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=function(e,t){const n=uo[t];if(n)return n;let r=A(t);if("filter"!==r&&r in e)return uo[t]=r;r=R(r);for(let s=0;s<lo.length;s++){const n=lo[s]+r;if(n in e)return uo[t]=n}return t}(e,t);ao.test(n)?e.setProperty(N(r),n.replace(ao,""),"important"):e[r]=n}}const lo=["Webkit","Moz","ms"],uo={};const ho="http://www.w3.org/1999/xlink";function fo(e,t,n,r,s,i=K(t)){r&&t.startsWith("xlink:")?null==n?e.removeAttributeNS(ho,t.slice(6,t.length)):e.setAttributeNS(ho,t,n):null==n||i&&!W(n)?e.removeAttribute(t):e.setAttribute(t,i?"":w(n)?String(n):n)}function po(e,t,n,r,s){if("innerHTML"===t||"textContent"===t)return void(null!=n&&(e[t]="innerHTML"===t?Pi(n):n));const i=e.tagName;if("value"===t&&"PROGRESS"!==i&&!i.includes("-")){const r="OPTION"===i?e.getAttribute("value")||"":e.value,s=null==n?"checkbox"===e.type?"on":"":String(n);return r===s&&"_value"in e||(e.value=s),null==n&&e.removeAttribute(t),void(e._value=n)}let o=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=W(n):null==n&&"string"===r?(n="",o=!0):"number"===r&&(n=0,o=!0)}try{e[t]=n}catch(mL){}o&&e.removeAttribute(s||t)}function mo(e,t,n,r){e.addEventListener(t,n,r)}const go=Symbol("_vei");function yo(e,t,n,r,s=null){const i=e[go]||(e[go]={}),o=i[t];if(r&&o)o.value=r;else{const[n,a]=function(e){let t;if(vo.test(e)){let n;for(t={};n=e.match(vo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}const n=":"===e[2]?e.slice(3):N(e.slice(2));return[n,t]}(t);if(r){const o=i[t]=function(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();qt(function(e,t){if(f(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=_o(),n}(r,s);mo(e,n,o,a)}else o&&(!function(e,t,n,r){e.removeEventListener(t,n,r)}(e,n,o,a),i[t]=void 0)}}const vo=/(?:Once|Passive|Capture)$/;let wo=0;const bo=Promise.resolve(),_o=()=>wo||(bo.then(()=>wo=0),wo=Date.now());const Io=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123;const To=e=>{const t=e.props["onUpdate:modelValue"]||!1;return f(t)?e=>L(t,e):t};function Eo(e){e.target.composing=!0}function So(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ko=Symbol("_assign"),xo={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[ko]=To(s);const i=r||s.props&&"number"===s.props.type;mo(e,t?"change":"input",t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),i&&(r=F(r)),e[ko](r)}),n&&mo(e,"change",()=>{e.value=e.value.trim()}),t||(mo(e,"compositionstart",Eo),mo(e,"compositionend",So),mo(e,"change",So))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(e[ko]=To(o),e.composing)return;const a=null==t?"":t;if((!i&&"number"!==e.type||/^0\d/.test(e.value)?e.value:F(e.value))!==a){if(document.activeElement===e&&"range"!==e.type){if(r&&t===n)return;if(s&&e.value.trim()===a)return}e.value=a}}},Co={deep:!0,created(e,t,n){e[ko]=To(n),mo(e,"change",()=>{const t=e._modelValue,n=Ro(e),r=e.checked,s=e[ko];if(f(t)){const e=J(t,n),i=-1!==e;if(r&&!i)s(t.concat(n));else if(!r&&i){const n=[...t];n.splice(e,1),s(n)}}else if(m(t)){const e=new Set(t);r?e.add(n):e.delete(n),s(e)}else s(Oo(e,r))})},mounted:Ao,beforeUpdate(e,t,n){e[ko]=To(n),Ao(e,t,n)}};function Ao(e,{value:t,oldValue:n},r){let s;if(e._modelValue=t,f(t))s=J(t,r.props.value)>-1;else if(m(t))s=t.has(r.props.value);else{if(t===n)return;s=Q(t,Oo(e,!0))}e.checked!==s&&(e.checked=s)}const Do={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const s=m(t);mo(e,"change",()=>{const t=Array.prototype.filter.call(e.options,e=>e.selected).map(e=>n?F(Ro(e)):Ro(e));e[ko](e.multiple?s?new Set(t):t:t[0]),e._assigning=!0,Yt(()=>{e._assigning=!1})}),e[ko]=To(r)},mounted(e,{value:t}){No(e,t)},beforeUpdate(e,t,n){e[ko]=To(n)},updated(e,{value:t}){e._assigning||No(e,t)}};function No(e,t){const n=e.multiple,r=f(t);if(!n||r||m(t)){for(let s=0,i=e.options.length;s<i;s++){const i=e.options[s],o=Ro(i);if(n)if(r){const e=typeof o;i.selected="string"===e||"number"===e?t.some(e=>String(e)===String(o)):J(t,o)>-1}else i.selected=t.has(o);else if(Q(Ro(i),t))return void(e.selectedIndex!==s&&(e.selectedIndex=s))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function Ro(e){return"_value"in e?e._value:e.value}function Oo(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Po=["ctrl","shift","alt","meta"],Lo={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>Po.some(n=>e[`${n}Key`]&&!t.includes(n))},Mo=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=Lo[t[e]];if(r&&r(n,t))return}return e(n,...r)})},Fo=l({patchProp:(e,t,n,r,s,i)=>{const o="svg"===s;"class"===t?function(e,t,n){const r=e[ji];r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,r,o):"style"===t?function(e,t,n){const r=e.style,s=v(n);let i=!1;if(n&&!s){if(t)if(v(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&co(r,t,"")}else for(const e in t)null==n[e]&&co(r,e,"");for(const e in n)"display"===e&&(i=!0),co(r,e,n[e])}else if(s){if(t!==n){const e=r[io];e&&(n+=";"+e),r.cssText=n,i=oo.test(n)}}else t&&e.removeAttribute("style");to in e&&(e[to]=i?r.display:"",e[no]&&(r.display="none"))}(e,n,r):a(t)?c(t)||yo(e,t,0,r,i):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&Io(t)&&y(n));if("spellcheck"===t||"draggable"===t||"translate"===t||"autocorrect"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}if(Io(t)&&v(n))return!1;return t in e}(e,t,r,o))?(po(e,t,r),e.tagName.includes("-")||"value"!==t&&"checked"!==t&&"selected"!==t||fo(e,t,r,o,0,"value"!==t)):!e._isVueCE||!/[A-Z]/.test(t)&&v(r)?("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),fo(e,t,r,o)):po(e,A(t),r,0,t)}},Fi);let Uo,Vo=!1;function jo(){return Uo||(Uo=hs(Fo))}function Bo(){return Uo=Vo?Uo:hs(Fo,zn),Vo=!0,Uo}function qo(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function $o(e){if(v(e)){return document.querySelector(e)}return e}const zo=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Ho=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Go=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Ko(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t}function Wo(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const n=e.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Go.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(zo.test(e)||Ho.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,Ko)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}const Qo=/#/g,Jo=/&/g,Yo=/\//g,Xo=/=/g,Zo=/\+/g,ea=/%5e/gi,ta=/%60/gi,na=/%7c/gi,ra=/%20/gi;function sa(e){return(t="string"==typeof e?e:JSON.stringify(e),encodeURI(""+t).replace(na,"|")).replace(Zo,"%2B").replace(ra,"+").replace(Qo,"%23").replace(Jo,"%26").replace(ta,"`").replace(ea,"^").replace(Yo,"%2F");var t}function ia(e){return sa(e).replace(Xo,"%3D")}function oa(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function aa(e){return oa(e.replace(Zo," "))}function ca(e){return oa(e.replace(Zo," "))}function la(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const n of e.split("&")){const e=n.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const r=aa(e[1]);if("__proto__"===r||"constructor"===r)continue;const s=ca(e[2]||"");void 0===t[r]?t[r]=s:Array.isArray(t[r])?t[r].push(s):t[r]=[t[r],s]}return t}function ua(e){return Object.keys(e).filter(t=>void 0!==e[t]).map(t=>{return n=t,"number"!=typeof(r=e[t])&&"boolean"!=typeof r||(r=String(r)),r?Array.isArray(r)?r.map(e=>`${ia(n)}=${sa(e)}`).join("&"):`${ia(n)}=${sa(r)}`:ia(n);var n,r}).filter(Boolean).join("&")}const ha=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,da=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,fa=/^([/\\]\s*){2,}[^/\\]/,pa=/^[\s\0]*(blob|data|javascript|vbscript):$/i,ma=/\/$|\/\?|\/#/,ga=/^\.?\//;function ya(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?ha.test(e):da.test(e)||!!t.acceptRelative&&fa.test(e)}function va(e="",t){return t?ma.test(e):e.endsWith("/")}function wa(e="",t){if(!t)return(va(e)?e.slice(0,-1):e)||"/";if(!va(e,!0))return e||"/";let n=e,r="";const s=e.indexOf("#");-1!==s&&(n=e.slice(0,s),r=e.slice(s));const[i,...o]=n.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(o.length>0?`?${o.join("?")}`:"")+r}function ba(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(va(e,!0))return e||"/";let n=e,r="";const s=e.indexOf("#");if(-1!==s&&(n=e.slice(0,s),r=e.slice(s),!n))return r;const[i,...o]=n.split("?");return i+"/"+(o.length>0?`?${o.join("?")}`:"")+r}function _a(e,t){if(Ta(t))return e;const n=wa(t);if(!e.startsWith(n))return e;const r=e.slice(n.length);return"/"===r[0]?r:"/"+r}function Ia(e,t){const n=xa(e),r={...la(n.search),...t};return n.search=ua(r),function(e){const t=e.pathname||"",n=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",r=e.hash||"",s=e.auth?e.auth+"@":"",i=e.host||"",o=e.protocol||e[ka]?(e.protocol||"")+"//":"";return o+s+i+t+n+r}(n)}function Ta(e){return!e||"/"===e}function Ea(e,...t){let n=e||"";for(const r of t.filter(e=>function(e){return e&&"/"!==e}(e)))if(n){const e=r.replace(ga,"");n=ba(n)+e}else n=r;return n}function Sa(...e){var t,n,r,s;const i=/\/(?!\/)/,o=e.filter(Boolean),a=[];let c=0;for(const u of o)if(u&&"/"!==u)for(const[e,n]of u.split(i).entries())if(n&&"."!==n)if(".."!==n)1===e&&(null==(t=a[a.length-1])?void 0:t.endsWith(":/"))?a[a.length-1]+="/"+n:(a.push(n),c++);else{if(1===a.length&&ya(a[0]))continue;a.pop(),c--}let l=a.join("/");return c>=0?(null==(n=o[0])?void 0:n.startsWith("/"))&&!l.startsWith("/")?l="/"+l:(null==(r=o[0])?void 0:r.startsWith("./"))&&!l.startsWith("./")&&(l="./"+l):l="../".repeat(-1*c)+l,(null==(s=o[o.length-1])?void 0:s.endsWith("/"))&&!l.endsWith("/")&&(l+="/"),l}const ka=Symbol.for("ufo:protocolRelative");function xa(e="",t){const n=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,e,t=""]=n;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!ya(e,{acceptRelative:!0}))return Ca(e);const[,r="",s,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,o="",a=""]=i.match(/([^#/?]*)(.*)?/)||[];"file:"===r&&(a=a.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:l,hash:u}=Ca(a);return{protocol:r.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:o,pathname:c,search:l,hash:u,[ka]:!r}}function Ca(e=""){const[t="",n="",r=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:r}}class Aa extends Error{constructor(e,t){super(e,t),this.name="FetchError",(null==t?void 0:t.cause)&&!this.cause&&(this.cause=t.cause)}}const Da=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Na(e="GET"){return Da.has(e.toUpperCase())}const Ra=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Oa=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function Pa(e,t,n,r){const s=function(e,t,n){if(!t)return new n(e);const r=new n(t);if(e)for(const[s,i]of Symbol.iterator in e||Array.isArray(e)?e:new n(e))r.set(s,i);return r}((null==t?void 0:t.headers)??(null==e?void 0:e.headers),null==n?void 0:n.headers,r);let i;return((null==n?void 0:n.query)||(null==n?void 0:n.params)||(null==t?void 0:t.params)||(null==t?void 0:t.query))&&(i={...null==n?void 0:n.params,...null==n?void 0:n.query,...null==t?void 0:t.params,...null==t?void 0:t.query}),{...n,...t,query:i,params:i,headers:s}}async function La(e,t){if(t)if(Array.isArray(t))for(const n of t)await n(e);else await t(e)}const Ma=new Set([408,409,425,429,500,502,503,504]),Fa=new Set([101,204,205,304]);const Ua=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),Va=function e(t={}){const{fetch:n=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:s=globalThis.AbortController}=t;async function i(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:Na(e.options.method)?0:1;const n=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(n):Ma.has(n))){const n="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return n>0&&await new Promise(e=>setTimeout(e,n)),o(e.request,{...e.options,retry:t-1})}}const n=function(e){var t,n,r,s,i;const o=(null==(t=e.error)?void 0:t.message)||(null==(n=e.error)?void 0:n.toString())||"",a=(null==(r=e.request)?void 0:r.method)||(null==(s=e.options)?void 0:s.method)||"GET",c=(null==(i=e.request)?void 0:i.url)||String(e.request)||"/",l=`[${a}] ${JSON.stringify(c)}`,u=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",h=new Aa(`${l}: ${u}${o?` ${o}`:""}`,e.error?{cause:e.error}:void 0);for(const d of["request","options","response"])Object.defineProperty(h,d,{get:()=>e[d]});for(const[d,f]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(h,d,{get:()=>e.response&&e.response[f]});return h}(e);throw Error.captureStackTrace&&Error.captureStackTrace(n,o),n}const o=async function(e,o={}){const a={request:e,options:Pa(e,o,t.defaults,r),response:void 0,error:void 0};let c;if(a.options.method&&(a.options.method=a.options.method.toUpperCase()),a.options.onRequest&&await La(a,a.options.onRequest),"string"==typeof a.request&&(a.options.baseURL&&(a.request=function(e,t){if(Ta(t)||ya(e))return e;const n=wa(t);return e.startsWith(n)?e:Ea(n,e)}(a.request,a.options.baseURL)),a.options.query&&(a.request=Ia(a.request,a.options.query),delete a.options.query),"query"in a.options&&delete a.options.query,"params"in a.options&&delete a.options.params),a.options.body&&Na(a.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(a.options.body)?("pipeTo"in a.options.body&&"function"==typeof a.options.body.pipeTo||"function"==typeof a.options.body.pipe)&&("duplex"in a.options||(a.options.duplex="half")):(a.options.body="string"==typeof a.options.body?a.options.body:JSON.stringify(a.options.body),a.options.headers=new r(a.options.headers||{}),a.options.headers.has("content-type")||a.options.headers.set("content-type","application/json"),a.options.headers.has("accept")||a.options.headers.set("accept","application/json"))),!a.options.signal&&a.options.timeout){const e=new s;c=setTimeout(()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)},a.options.timeout),a.options.signal=e.signal}try{a.response=await n(a.request,a.options)}catch(l){return a.error=l,a.options.onRequestError&&await La(a,a.options.onRequestError),await i(a)}finally{c&&clearTimeout(c)}if((a.response.body||a.response._bodyInit)&&!Fa.has(a.response.status)&&"HEAD"!==a.options.method){const e=(a.options.parseResponse?"json":a.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Oa.test(t)?"json":Ra.has(t)||t.startsWith("text/")?"text":"blob"}(a.response.headers.get("content-type")||"");switch(e){case"json":{const e=await a.response.text(),t=a.options.parseResponse||Wo;a.response._data=t(e);break}case"stream":a.response._data=a.response.body||a.response._bodyInit;break;default:a.response._data=await a.response[e]()}}return a.options.onResponse&&await La(a,a.options.onResponse),!a.options.ignoreResponseError&&a.response.status>=400&&a.response.status<600?(a.options.onResponseError&&await La(a,a.options.onResponseError),await i(a)):a.response},a=async function(e,t){return(await o(e,t))._data};return a.raw=o,a.native=(...e)=>n(...e),a.create=(n={},r={})=>e({...t,...r,defaults:{...t.defaults,...r.defaults,...n}}),a}({fetch:Ua.fetch?(...e)=>Ua.fetch(...e):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),Headers:Ua.Headers,AbortController:Ua.AbortController}),ja=Va,Ba=()=>{return((null==(e=null==window?void 0:window.__NUXT__)?void 0:e.config)||{}).app;var e},qa=(...e)=>Sa($a(),Ba().buildAssetsDir,...e),$a=(...e)=>{const t=Ba(),n=t.cdnURL||t.baseURL;return e.length?Sa(n,...e):n};function za(e,t={},n){for(const r in e){const s=e[r],i=n?`${n}:${r}`:r;"object"==typeof s&&null!==s?za(s,t,i):"function"==typeof s&&(t[i]=s)}return t}globalThis.__buildAssetsURL=qa,globalThis.__publicAssetsURL=$a,globalThis.$fetch||(globalThis.$fetch=ja.create({baseURL:Ba().baseURL})),"global"in globalThis||(globalThis.global=globalThis);const Ha={run:e=>e()},Ga=void 0!==console.createTask?console.createTask:()=>Ha;function Ka(e,t){const n=t.shift(),r=Ga(n);return e.reduce((e,n)=>e.then(()=>r.run(()=>n(...t))),Promise.resolve())}function Wa(e,t){const n=t.shift(),r=Ga(n);return Promise.all(e.map(e=>r.run(()=>e(...t))))}function Qa(e,t){for(const n of[...e])n(t)}class Ja{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||"function"!=typeof t)return()=>{};const r=e;let s;for(;this._deprecatedHooks[e];)s=this._deprecatedHooks[e],e=s.to;if(s&&!n.allowDeprecated){let e=s.message;e||(e=`${r} hook has been deprecated`+(s.to?`, please use ${s.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||this._deprecatedMessages.add(e)}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,r=(...e)=>("function"==typeof n&&n(),n=void 0,r=void 0,t(...e));return n=this.hook(e,r),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);-1!==n&&this._hooks[e].splice(n,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const r of n)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=za(e),n=Object.keys(t).map(e=>this.hook(e,t[e]));return()=>{for(const e of n.splice(0,n.length))e()}}removeHooks(e){const t=za(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(Ka,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(Wa,e,...t)}callHookWith(e,t,...n){const r=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&Qa(this._before,r);const s=e(t in this._hooks?[...this._hooks[t]]:[],n);return s instanceof Promise?s.finally(()=>{this._after&&r&&Qa(this._after,r)}):(this._after&&r&&Qa(this._after,r),s)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function Ya(){return new Ja}const Xa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof window?window:{},Za="__unctx__",ec=Xa[Za]||(Xa[Za]=function(e={}){const t={};return{get:(n,r={})=>(t[n]||(t[n]=function(e={}){let t,n=!1;const r=e=>{if(t&&t!==e)throw new Error("Context conflict")};let s;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t&&(s=new t)}const i=()=>{if(s){const e=s.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=i();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>i(),set:(e,s)=>{s||r(e),t=e,n=!0},unset:()=>{t=void 0,n=!1},call:(e,i)=>{r(e),t=e;try{return s?s.run(e,i):i()}finally{n||(t=void 0)}},async callAsync(e,r){t=e;const i=()=>{t=e},o=()=>t===e?i:void 0;nc.add(o);try{const i=s?s.run(e,r):r();return n||(t=void 0),await i}finally{nc.delete(o)}}}}({...e,...r})),t[n])}}()),tc="__unctx_async_handlers__",nc=Xa[tc]||(Xa[tc]=new Set);function rc(e){const t=[];for(const s of nc){const e=s();e&&t.push(e)}const n=()=>{for(const e of t)e()};let r=e();return r&&"object"==typeof r&&"catch"in r&&(r=r.catch(e=>{throw n(),e})),[r,n]}const sc=!1,ic={componentName:"NuxtLink",prefetch:!0,prefetchOn:{visibility:!0}},oc="nuxt-app",ac=36e5;function cc(e=oc){return((e,t={})=>ec.get(e,t))(e,{asyncContext:!1})}const lc="__nuxt_plugin";function uc(e,t){t.hooks&&e.hooks.addHooks(t.hooks)}function hc(e){if("function"==typeof e)return e;const t=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[lc]:!0,_name:t})}function dc(e,t,n){const r=()=>t();return cc(e._id).set(e),e.vueApp.runWithContext(r)}function fc(e){var t;let n;return Qr()&&(n=null==(t=yi())?void 0:t.appContext.app.$nuxt),n||(n=cc(e).tryUse()),n||null}function pc(e){const t=fc(e);if(!t)throw new Error("[nuxt] instance unavailable");return t}function mc(e){return pc().$config}function gc(e,t,n){Object.defineProperty(e,t,{get:()=>n})}function yc(e,t){return{ctx:{table:e},matchAll:t=>bc(t,e)}}function vc(e){const t={};for(const n in e)t[n]="dynamic"===n?new Map(Object.entries(e[n]).map(([e,t])=>[e,vc(t)])):new Map(Object.entries(e[n]));return t}function wc(e){return yc(vc(e))}function bc(e,t,n){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const r=[];for(const[i,o]of _c(t.wildcard))(e===i||e.startsWith(i+"/"))&&r.push(o);for(const[i,o]of _c(t.dynamic))if(e.startsWith(i+"/")){const t="/"+e.slice(i.length).split("/").splice(2).join("/");r.push(...bc(t,o))}const s=t.static.get(e);return s&&r.push(s),r.filter(Boolean)}function _c(e){return[...e.entries()].sort((e,t)=>e[0].length-t[0].length)}function Ic(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function Tc(e,t,n=".",r){if(!Ic(t))return Tc(e,{},n,r);const s=Object.assign({},t);for(const i in e){if("__proto__"===i||"constructor"===i)continue;const t=e[i];null!=t&&(r&&r(s,i,t,n)||(Array.isArray(t)&&Array.isArray(s[i])?s[i]=[...t,...s[i]]:Ic(t)&&Ic(s[i])?s[i]=Tc(t,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=t))}return s}const Ec=(...e)=>e.reduce((e,t)=>Tc(e,t,"",Sc),{});var Sc;class kc extends Error{constructor(e,n={}){super(e,n),t(this,"statusCode",500),t(this,"fatal",!1),t(this,"unhandled",!1),t(this,"statusMessage"),t(this,"data"),t(this,"cause"),n.cause&&!this.cause&&(this.cause=n.cause)}toJSON(){const e={message:this.message,statusCode:Ac(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=Cc(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}t(kc,"__h3_error__",!0);const xc=/[^\u0009\u0020-\u007E]/g;function Cc(e=""){return e.replace(xc,"")}function Ac(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}"undefined"==typeof setImmediate||setImmediate;const Dc=Symbol("layout-meta"),Nc=Symbol("route"),Rc=()=>{var e;return null==(e=pc())?void 0:e.$router},Oc=()=>Qr()?Wr(Nc,pc()._route):pc()._route;function Pc(e){return e}const Lc=(e,t)=>{e||(e="/");const n="string"==typeof e?e:"path"in e?Mc(e):Rc().resolve(e).href;if(null==t?void 0:t.open){const{target:e="_blank",windowFeatures:r={}}=t.open,s=Object.entries(r).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e.toLowerCase()}=${t}`).join(", ");return open(n,e,s),Promise.resolve()}const r=ya(n,{acceptRelative:!0}),s=(null==t?void 0:t.external)||r;if(s){if(!(null==t?void 0:t.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:e}=new URL(n,window.location.href);if(e&&function(e){return!!e&&pa.test(e)}(e))throw new Error(`Cannot navigate to a URL with '${e}' protocol.`)}const i=(()=>{try{if(pc()._processingMiddleware)return!0}catch{return!1}return!1})();if(!s&&i){if(null==t?void 0:t.replace){if("string"==typeof e){const{pathname:t,search:n,hash:r}=xa(e);return{path:t,...n&&{query:la(n)},...r&&{hash:r},replace:!0}}return{...e,replace:!0}}return e}const o=Rc(),a=pc();return s?(a._scope.stop(),(null==t?void 0:t.replace)?location.replace(n):location.href=n,i?!!a.isHydrating&&new Promise(()=>{}):Promise.resolve()):(null==t?void 0:t.replace)?o.replace(e):o.push(e)};function Mc(e){return Ia(e.path||"",e.query||{})+(e.hash||"")}const Fc="__nuxt_error",Uc=()=>function(e,t,n){return Et(e)?e:y(e)?new Ot(e):b(e)&&arguments.length>1?Pt(e,t,n):St(e)}(pc().payload,"error"),Vc=e=>{const t=qc(e);try{const e=pc(),n=Uc();e.hooks.callHook("app:error",t),n.value||(n.value=t)}catch{throw t}return t},jc=async(e={})=>{const t=pc(),n=Uc();t.callHook("app:error:cleared",e),e.redirect&&await Rc().replace(e.redirect),n.value=null},Bc=e=>!!e&&"object"==typeof e&&Fc in e,qc=e=>{const t=function(e){if("string"==typeof e)return new kc(e);if(function(e){var t;return!0===(null==(t=null==e?void 0:e.constructor)?void 0:t.__h3_error__)}(e))return e;const t=new kc(e.message??e.statusMessage??"",{cause:e.cause||e});if(function(e,t){try{return t in e}catch{return!1}}(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}e.data&&(t.data=e.data),e.statusCode?t.statusCode=Ac(e.statusCode,t.statusCode):e.status&&(t.statusCode=Ac(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage&&(t.statusMessage,Cc(t.statusMessage));return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}(e);return Object.defineProperty(t,Fc,{value:!0,configurable:!1,writable:!1}),t};function $c(e){const t=function(e){e.length%4==0&&(e=e.replace(/==?$/,""));let t="",n=0,r=0;for(let s=0;s<e.length;s++)n<<=6,n|=zc.indexOf(e[s]),r+=6,24===r&&(t+=String.fromCharCode((16711680&n)>>16),t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n),n=r=0);12===r?(n>>=4,t+=String.fromCharCode(n)):18===r&&(n>>=2,t+=String.fromCharCode((65280&n)>>8),t+=String.fromCharCode(255&n));return t}(e),n=new ArrayBuffer(t.length),r=new DataView(n);for(let s=0;s<n.byteLength;s++)r.setUint8(s,t.charCodeAt(s));return n}const zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Hc(e,t){return function(e,t){if("number"==typeof e)return s(e,!0);if(!Array.isArray(e)||0===e.length)throw new Error("Invalid input");const n=e,r=Array(n.length);function s(e,i=!1){if(-1===e)return;if(-3===e)return NaN;if(-4===e)return 1/0;if(-5===e)return-1/0;if(-6===e)return-0;if(i)throw new Error("Invalid input");if(e in r)return r[e];const o=n[e];if(o&&"object"==typeof o)if(Array.isArray(o))if("string"==typeof o[0]){const n=o[0],i=null==t?void 0:t[n];if(i)return r[e]=i(s(o[1]));switch(n){case"Date":r[e]=new Date(o[1]);break;case"Set":const t=new Set;r[e]=t;for(let e=1;e<o.length;e+=1)t.add(s(o[e]));break;case"Map":const i=new Map;r[e]=i;for(let e=1;e<o.length;e+=2)i.set(s(o[e]),s(o[e+1]));break;case"RegExp":r[e]=new RegExp(o[1],o[2]);break;case"Object":r[e]=Object(o[1]);break;case"BigInt":r[e]=BigInt(o[1]);break;case"null":const a=Object.create(null);r[e]=a;for(let e=1;e<o.length;e+=2)a[o[e]]=s(o[e+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const t=new(0,globalThis[n])($c(o[1]));r[e]=t;break}case"ArrayBuffer":{const t=$c(o[1]);r[e]=t;break}default:throw new Error(`Unknown type ${n}`)}}else{const t=new Array(o.length);r[e]=t;for(let e=0;e<o.length;e+=1){const n=o[e];-2!==n&&(t[e]=s(n))}}else{const t={};r[e]=t;for(const e in o){const n=o[e];t[e]=s(n)}}else r[e]=o;return r[e]}return s(0)}(JSON.parse(e),t)}const Gc=new Set(["link","style","script","noscript"]),Kc=new Set(["title","titleTemplate","script","style","noscript"]),Wc=new Set(["base","meta","link","style","script","noscript"]),Qc=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),Jc=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),Yc=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),Xc=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Zc=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]);function el(e){return e}const tl=["name","property","http-equiv"],nl=new Set(["viewport","description","keywords","robots"]);function rl(e){const t=e.split(":");return!!t.length&&Zc.has(t[1])}function sl(e){const{props:t,tag:n}=e;if(Jc.has(n))return n;if("link"===n&&"canonical"===t.rel)return"canonical";if(t.charset)return"charset";if("meta"===e.tag)for(const r of tl)if(void 0!==t[r]){const s=t[r],i=s.includes(":"),o=nl.has(s);return`${n}:${s}${!(i||o)&&e.key?`:key:${e.key}`:""}`}if(e.key)return`${n}:key:${e.key}`;if(t.id)return`${n}:id:${t.id}`;if(Kc.has(n)){const t=e.textContent||e.innerHTML;if(t)return`${n}:content:${t}`}}function il(e){const t=e._h||e._d;if(t)return t;const n=e.textContent||e.innerHTML;return n||`${e.tag}:${Object.entries(e.props).map(([e,t])=>`${e}:${String(t)}`).join(",")}`}function ol(e,t,n){let r;if("function"===typeof e&&(n&&("titleTemplate"===n||"o"===n[0]&&"n"===n[1])||(e=e())),t&&(r=t(n,e)),Array.isArray(r))return r.map(e=>ol(e,t));if((null==r?void 0:r.constructor)===Object){const e={};for(const n of Object.keys(r))e[n]=ol(r[n],t,n);return e}return r}function al(e,t){return e.props=e.props||{},t?(Object.entries(t).forEach(([n,r])=>{if(null===r)return void(e.props[n]=null);if("class"===n||"style"===n)return void(e.props[n]=function(e,t){const n="style"===e?new Map:new Set;function r(t){const r=t.trim();if(r)if("style"===e){const[e,...t]=r.split(":").map(e=>e.trim());e&&t.length&&n.set(e,t.join(":"))}else r.split(" ").filter(Boolean).forEach(e=>n.add(e))}return"string"==typeof t?"style"===e?t.split(";").forEach(r):r(t):Array.isArray(t)?t.forEach(e=>r(e)):t&&"object"==typeof t&&Object.entries(t).forEach(([t,s])=>{s&&"false"!==s&&("style"===e?n.set(t.trim(),s):r(t))}),n}(n,r));if(Yc.has(n)){if(["textContent","innerHTML"].includes(n)&&"object"==typeof r){let s=t.type;if(t.type||(s="application/json"),!(null==s?void 0:s.endsWith("json"))&&"speculationrules"!==s)return;t.type=s,e.props.type=s,e[n]=JSON.stringify(r)}else e[n]=r;return}const s=String(r),i=n.startsWith("data-");"true"===s||""===s?e.props[n]=!i||s:!r&&i&&"false"===s?e.props[n]="false":void 0!==r&&(e.props[n]=r)}),e):e}function cl(e,t){const n=al({tag:e,props:{}},"object"==typeof t&&"function"!=typeof t?t:{["script"===e||"noscript"===e||"style"===e?"innerHTML":"textContent"]:t});return n.key&&Gc.has(n.tag)&&(n.props["data-hid"]=n._h=n.key),"script"===n.tag&&"object"==typeof n.innerHTML&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(e=>({...n,props:{...n.props,content:e}})):n}function ll(e,t){if(!e)return[];"function"==typeof e&&(e=e());const n=(e,n)=>{for(let r=0;r<t.length;r++)n=t[r](e,n);return n};e=n(void 0,e);const r=[];return e=ol(e,n),Object.entries(e||{}).forEach(([e,t])=>{if(void 0!==t)for(const n of Array.isArray(t)?t:[t])r.push(cl(e,n))}),r.flat()}const ul=(e,t)=>e._w===t._w?e._p-t._p:e._w-t._w,hl={base:-10,title:10},dl={critical:-8,high:-1,low:2},fl={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},pl=/@import/,ml=e=>""===e||!0===e;function gl(e,t){var n;if("number"==typeof t.tagPriority)return t.tagPriority;let r=100;const s=dl[t.tagPriority]||0,i=e.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:fl;if(t.tag in hl)r=hl[t.tag];else if("meta"===t.tag){const e="content-security-policy"===t.props["http-equiv"]?"content-security-policy":t.props.charset?"charset":"viewport"===t.props.name?"viewport":null;e&&(r=fl.meta[e])}else"link"===t.tag&&t.props.rel?r=i.link[t.props.rel]:"script"===t.tag?ml(t.props.async)?r=i.script.async:!t.props.src||ml(t.props.defer)||ml(t.props.async)||"module"===t.props.type||(null==(n=t.props.type)?void 0:n.endsWith("json"))?ml(t.props.defer)&&t.props.src&&!ml(t.props.async)&&(r=i.script.defer):r=i.script.sync:"style"===t.tag&&(r=t.innerHTML&&pl.test(t.innerHTML)?i.style.imported:i.style.sync);return(r||100)+s}function yl(e,t){const n="function"==typeof t?t(e):t,r=n.key||String(e.plugins.size+1);e.plugins.get(r)||(e.plugins.set(r,n),e.hooks.addHooks(n.hooks||{}))}function vl(e={}){var t;const n=Ya();n.addHooks(e.hooks||{});const r=!e.document,s=new Map,i=new Map,o=new Set,a={_entryCount:1,plugins:i,dirty:!1,resolvedOptions:e,hooks:n,ssr:r,entries:s,headEntries:()=>[...s.values()],use:e=>yl(a,e),push(e,t){const i={...t||{}};delete i.head;const c=i._index??a._entryCount++,l={_i:c,input:e,options:i},u={_poll(e=!1){a.dirty=!0,!e&&o.add(c),n.callHook("entries:updated",a)},dispose(){s.delete(c)&&a.invalidate()},patch(e){(!i.mode||"server"===i.mode&&r||"client"===i.mode&&!r)&&(l.input=e,s.set(c,l),u._poll())}};return u.patch(e),u},async resolveTags(){var t;const r={tagMap:new Map,tags:[],entries:[...a.entries.values()]};for(await n.callHook("entries:resolve",r);o.size;){const t=o.values().next().value;o.delete(t);const r=s.get(t);if(r){const t={tags:ll(r.input,e.propResolvers||[]).map(e=>Object.assign(e,r.options)),entry:r};await n.callHook("entries:normalize",t),r._tags=t.tags.map((e,t)=>(e._w=gl(a,e),e._p=(r._i<<10)+t,e._d=sl(e),e))}}let i=!1;r.entries.flatMap(e=>(e._tags||[]).map(e=>({...e,props:{...e.props}}))).sort(ul).reduce((e,t)=>{const n=String(t._d||t._p);if(!e.has(n))return e.set(n,t);const r=e.get(n);if("merge"===((null==t?void 0:t.tagDuplicateStrategy)||(Xc.has(t.tag)?"merge":null)||(t.key&&t.key===r.key?"merge":null))){const s={...r.props};Object.entries(t.props).forEach(([e,t])=>s[e]="style"===e?new Map([...r.props.style||new Map,...t]):"class"===e?new Set([...r.props.class||new Set,...t]):t),e.set(n,{...t,props:s})}else t._p>>10==r._p>>10&&"meta"===t.tag&&rl(n)?(e.set(n,Object.assign([...Array.isArray(r)?r:[r],t],t)),i=!0):(t._w===r._w?t._p>r._p:(null==t?void 0:t._w)<(null==r?void 0:r._w))&&e.set(n,t);return e},r.tagMap);const c=r.tagMap.get("title"),l=r.tagMap.get("titleTemplate");if(a._title=null==c?void 0:c.textContent,l){const e=null==l?void 0:l.textContent;if(a._titleTemplate=e,e){let t="function"==typeof e?e(null==c?void 0:c.textContent):e;"string"!=typeof t||a.plugins.has("template-params")||(t=t.replace("%s",(null==c?void 0:c.textContent)||"")),c?null===t?r.tagMap.delete("title"):r.tagMap.set("title",{...c,textContent:t}):(l.tag="title",l.textContent=t)}}r.tags=Array.from(r.tagMap.values()),i&&(r.tags=r.tags.flat().sort(ul)),await n.callHook("tags:beforeResolve",r),await n.callHook("tags:resolve",r),await n.callHook("tags:afterResolve",r);const u=[];for(const e of r.tags){const{innerHTML:n,tag:r,props:s}=e;if(Qc.has(r)&&((0!==Object.keys(s).length||e.innerHTML||e.textContent)&&("meta"!==r||s.content||s["http-equiv"]||s.charset))){if("script"===r&&n){if(null==(t=s.type)?void 0:t.endsWith("json")){const t="string"==typeof n?n:JSON.stringify(n);e.innerHTML=t.replace(/</g,"\\u003C")}else"string"==typeof n&&(e.innerHTML=n.replace(new RegExp(`</${r}`,"g"),`<\\/${r}`));e._d=sl(e)}u.push(e)}}return u},invalidate(){for(const e of s.values())o.add(e._i);a.dirty=!0,n.callHook("entries:updated",a)}};return((null==e?void 0:e.plugins)||[]).forEach(e=>yl(a,e)),a.hooks.callHook("init",a),null==(t=e.init)||t.forEach(e=>e&&a.push(e)),a}const wl="%separator",bl=new RegExp(`${wl}(?:\\s*${wl})*`,"g");function _l(e,t,n,r=!1){if("string"!=typeof e||!e.includes("%"))return e;let s=e;try{s=decodeURI(e)}catch{}const i=s.match(/%\w+(?:\.\w+)?/g);if(!i)return e;const o=e.includes(wl);return e=e.replace(/%\w+(?:\.\w+)?/g,e=>{if(e===wl||!i.includes(e))return e;const n=function(e,t,n=!1){var r;let s;if("s"===t||"pageTitle"===t)s=e.pageTitle;else if(t.includes(".")){const n=t.indexOf(".");s=null==(r=e[t.substring(0,n)])?void 0:r[t.substring(n+1)]}else s=e[t];if(void 0!==s)return n?(s||"").replace(/\\/g,"\\\\").replace(/</g,"\\u003C").replace(/"/g,'\\"'):s||""}(t,e.slice(1),r);return void 0!==n?n:e}).trim(),o&&(e.endsWith(wl)&&(e=e.slice(0,-10)),e.startsWith(wl)&&(e=e.slice(10)),e=e.replace(bl,n||"").trim()),e}const Il=e=>e.includes(":key")?e:e.split(":").join(":key:"),Tl={key:"aliasSorting",hooks:{"tags:resolve":e=>{let t=!1;for(const n of e.tags){const r=n.tagPriority;if(!r)continue;const s=String(r);if(s.startsWith("before:")){const r=Il(s.slice(7)),i=e.tagMap.get(r);i&&("number"==typeof i.tagPriority&&(n.tagPriority=i.tagPriority),n._p=i._p-1,t=!0)}else if(s.startsWith("after:")){const r=Il(s.slice(6)),i=e.tagMap.get(r);i&&("number"==typeof i.tagPriority&&(n.tagPriority=i.tagPriority),n._p=i._p+1,t=!0)}}t&&(e.tags=e.tags.sort(ul))}}},El=el({key:"deprecations",hooks:{"entries:normalize":({tags:e})=>{for(const t of e)t.props.children&&(t.innerHTML=t.props.children,delete t.props.children),t.props.hid&&(t.key=t.props.hid,delete t.props.hid),t.props.vmid&&(t.key=t.props.vmid,delete t.props.vmid),t.props.body&&(t.tagPosition="bodyClose",delete t.props.body)}}});async function Sl(e){if("function"===typeof e)return e;if(e instanceof Promise)return await e;if(Array.isArray(e))return await Promise.all(e.map(e=>Sl(e)));if((null==e?void 0:e.constructor)===Object){const t={};for(const n of Object.keys(e))t[n]=await Sl(e[n]);return t}return e}const kl=el({key:"promises",hooks:{"entries:resolve":async e=>{const t=[];for(const n in e.entries)e.entries[n]._promisesProcessed||t.push(Sl(e.entries[n].input).then(t=>{e.entries[n].input=t,e.entries[n]._promisesProcessed=!0}));await Promise.all(t)}}}),xl={meta:"content",link:"href",htmlAttrs:"lang"},Cl=["innerHTML","textContent"],Al=el(e=>({key:"template-params",hooks:{"entries:normalize":t=>{var n,r,s;const i=(null==(r=null==(n=t.tags.filter(e=>"templateParams"===e.tag&&"server"===e.mode))?void 0:n[0])?void 0:r.props)||{};Object.keys(i).length&&(e._ssrPayload={templateParams:{...(null==(s=e._ssrPayload)?void 0:s.templateParams)||{},...i}})},"tags:resolve":({tagMap:t,tags:n})=>{var r;const s=(null==(r=t.get("templateParams"))?void 0:r.props)||{},i=s.separator||"|";delete s.separator,s.pageTitle=_l(s.pageTitle||e._title||"",s,i);for(const e of n){if(!1===e.processTemplateParams)continue;const t=xl[e.tag];if(t&&"string"==typeof e.props[t])e.props[t]=_l(e.props[t],s,i);else if(e.processTemplateParams||"titleTemplate"===e.tag||"title"===e.tag)for(const n of Cl)"string"==typeof e[n]&&(e[n]=_l(e[n],s,i,"script"===e.tag&&e.props.type.endsWith("json")))}e._templateParams=s,e._separator=i},"tags:afterResolve":({tagMap:t})=>{const n=t.get("title");(null==n?void 0:n.textContent)&&!1!==n.processTemplateParams&&(n.textContent=_l(n.textContent,e._templateParams,e._separator))}}})),Dl=(e,t)=>{return Et(t)?y(n=t)?n():At(n):t;var n},Nl="usehead";function Rl(e,t={}){const n=t.head||function(){if(Qr()){const e=Wr(Nl);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}();return n.ssr?n.push(e||{},t):function(e,t,n={}){const r=St(!1);let s;!function(e,t){_s(e,null,t)}(()=>{const i=r.value?{}:ol(t,Dl);s?s.patch(i):s=e.push(i,n)});yi()&&(dr(()=>{s.dispose()}),tr(()=>{r.value=!0}),er(()=>{r.value=!1}));return s}(n,e,t)}function Ol(e,t={}){const n=function(e){var t;const n=e||fc();return(null==(t=null==n?void 0:n.ssrContext)?void 0:t.head)||(null==n?void 0:n.runWithContext(()=>{if(Qr())return Wr(Nl)}))}(t.nuxt);if(n)return Rl(e,{head:n,...t})}const Pl={},Ll=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const s=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),o=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in Pl)return;Pl[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!n)for(let n=s.length-1;n>=0;n--){const r=s[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script"),i.crossOrigin="",i.href=e,o&&i.setAttribute("nonce",o),document.head.appendChild(i),t?new Promise((t,n)=>{i.addEventListener("load",t),i.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})};let Ml,Fl;function Ul(){return Ml||(Ml=$fetch(qa(`builds/meta/${mc().app.buildId}.json`),{responseType:"json"}),Ml.then(e=>{Fl=wc(e.matcher)}).catch(e=>{}),Ml)}async function Vl(e){const t="string"==typeof e?e:e.path;if(await Ul(),!Fl)return{};try{return Ec({},...Fl.matchAll(t).reverse())}catch(mL){return{}}}async function jl(e,t={}){if(!(await $l(e)))return null;const n=await async function(e,t={}){const n=new URL(e,"http://localhost");if("localhost"!==n.host||ya(n.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const r=mc(),s=t.hash||(t.fresh?Date.now():r.app.buildId),i=r.app.cdnURL,o=i&&await $l(e)?i:r.app.baseURL;return Ea(o,n.pathname,Bl+(s?`?${s}`:""))}(e,t);return await ql(n)||null}const Bl="_payload.json";async function ql(e){const t=fetch(e,{cache:"force-cache"}).then(e=>e.text().then(Gl));try{return await t}catch(n){}return null}async function $l(e=Oc().path){const t=pc();e=wa(e);return!!(await Ul()).prerendered.includes(e)||t.runWithContext(async()=>{const t=await Vl({path:e});return!!t.prerender&&!t.redirect})}let zl=null;async function Hl(){var e;if(zl)return zl;const t=document.getElementById("__NUXT_DATA__");if(!t)return{};const n=await Gl(t.textContent||""),r=t.dataset.src?await ql(t.dataset.src):void 0;return zl={...n,...r,...window.__NUXT__},(null==(e=zl.config)?void 0:e.public)&&(zl.config.public=dt(zl.config.public)),zl}async function Gl(e){return await Hc(e,pc()._payloadRevivers)}function Kl(e,t){pc()._payloadRevivers[e]=t}const Wl=[["NuxtError",e=>qc(e)],["EmptyShallowRef",e=>kt("_"===e?void 0:"0n"===e?BigInt(0):Wo(e))],["EmptyRef",e=>St("_"===e?void 0:"0n"===e?BigInt(0):Wo(e))],["ShallowRef",e=>kt(e)],["ShallowReactive",e=>ft(e)],["Ref",e=>St(e)],["Reactive",e=>dt(e)]],Ql=hc({name:"nuxt:revive-payload:client",order:-30,async setup(e){let t,n;for(const[r,s]of Wl)Kl(r,s);Object.assign(e.payload,([t,n]=rc(()=>e.runWithContext(Hl)),t=await t,n(),t)),window.__NUXT__=e.payload}});async function Jl(e,t={}){const n=t.document||e.resolvedOptions.document;if(!n||!e.dirty)return;const r={shouldRender:!0,tags:[]};return await e.hooks.callHook("dom:beforeRender",r),r.shouldRender?(e._domUpdatePromise||(e._domUpdatePromise=new Promise(async t=>{var r;const s=new Map,i=new Promise(t=>{e.resolveTags().then(e=>{t(e.map(e=>{const t=s.get(e._d)||0,n={tag:e,id:(t?`${e._d}:${t}`:e._d)||il(e),shouldRender:!0};return e._d&&rl(e._d)&&s.set(e._d,t+1),n}))})});let o=e._dom;if(!o){o={title:n.title,elMap:(new Map).set("htmlAttrs",n.documentElement).set("bodyAttrs",n.body)};for(const e of["body","head"]){const t=null==(r=n[e])?void 0:r.children;for(const e of t){const t=e.tagName.toLowerCase();if(!Wc.has(t))continue;const n=al({tag:t,props:{}},{innerHTML:e.innerHTML,...e.getAttributeNames().reduce((t,n)=>(t[n]=e.getAttribute(n),t),{})||{}});if(n.key=e.getAttribute("data-hid")||void 0,n._d=sl(n)||il(n),o.elMap.has(n._d)){let t=1,r=n._d;for(;o.elMap.has(r);)r=`${n._d}:${t++}`;o.elMap.set(r,e)}else o.elMap.set(n._d,e)}}}function a(e,t,n){const r=`${e}:${t}`;o.sideEffects[r]=n,delete o.pendingSideEffects[r]}function c({id:e,$el:t,tag:r}){const s=r.tag.endsWith("Attrs");o.elMap.set(e,t),s||(r.textContent&&r.textContent!==t.textContent&&(t.textContent=r.textContent),r.innerHTML&&r.innerHTML!==t.innerHTML&&(t.innerHTML=r.innerHTML),a(e,"el",()=>{null==t||t.remove(),o.elMap.delete(e)}));for(const i in r.props){if(!Object.prototype.hasOwnProperty.call(r.props,i))continue;const o=r.props[i];if(i.startsWith("on")&&"function"==typeof o){const e=null==t?void 0:t.dataset;if(e&&e[`${i}fired`]){const e=i.slice(0,-5);o.call(t,new Event(e.substring(2)))}""!==t.getAttribute(`data-${i}`)&&(("bodyAttrs"===r.tag?n.defaultView:t).addEventListener(i.substring(2),o.bind(t)),t.setAttribute(`data-${i}`,""));continue}const c=`attr:${i}`;if("class"===i){if(!o)continue;for(const n of o)s&&a(e,`${c}:${n}`,()=>t.classList.remove(n)),!t.classList.contains(n)&&t.classList.add(n)}else if("style"===i){if(!o)continue;for(const[n,r]of o)a(e,`${c}:${n}`,()=>{t.style.removeProperty(n)}),t.style.setProperty(n,r)}else!1!==o&&null!==o&&(t.getAttribute(i)!==o&&t.setAttribute(i,!0===o?"":String(o)),s&&a(e,c,()=>t.removeAttribute(i)))}}o.pendingSideEffects={...o.sideEffects},o.sideEffects={};const l=[],u={bodyClose:void 0,bodyOpen:void 0,head:void 0},h=await i;for(const e of h){const{tag:t,shouldRender:r,id:s}=e;r&&("title"!==t.tag?(e.$el=e.$el||o.elMap.get(s),e.$el?c(e):Wc.has(t.tag)&&l.push(e)):(n.title=t.textContent,a("title","",()=>n.title=o.title)))}for(const e of l){const t=e.tag.tagPosition||"head";e.$el=n.createElement(e.tag.tag),c(e),u[t]=u[t]||n.createDocumentFragment(),u[t].appendChild(e.$el)}for(const d of h)await e.hooks.callHook("dom:renderTag",d,n,a);u.head&&n.head.appendChild(u.head),u.bodyOpen&&n.body.insertBefore(u.bodyOpen,n.body.firstChild),u.bodyClose&&n.body.appendChild(u.bodyClose);for(const e in o.pendingSideEffects)o.pendingSideEffects[e]();e._dom=o,await e.hooks.callHook("dom:rendered",{renders:h}),t()}).finally(()=>{e._domUpdatePromise=void 0,e.dirty=!1})),e._domUpdatePromise):void 0}function Yl(e,t){let n=0;return()=>{const r=++n;t(()=>{n===r&&e()})}}function Xl(e={}){const t=function(e={}){var t,n,r;const s=(null==(t=e.domOptions)?void 0:t.render)||Jl;e.document=e.document||("undefined"!=typeof window?document:void 0);const i=(null==(r=null==(n=e.document)?void 0:n.head.querySelector('script[id="unhead:payload"]'))?void 0:r.innerHTML)||!1;return vl({...e,plugins:[...e.plugins||[],{key:"client",hooks:{"entries:updated":s}}],init:[!!i&&JSON.parse(i),...e.init||[]]})}({domOptions:{render:Yl(()=>Jl(t),e=>setTimeout(e,0))},...e});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(Nl,e)}}.install}(t),t}const Zl={disableDefaults:!0,disableCapoSorting:!1,plugins:[El,kl,Al,Tl]},eu=hc({name:"nuxt:head",enforce:"pre",setup(e){const t=Xl(Zl);e.vueApp.use(t);{let n=!0;const r=async()=>{n=!1,await Jl(t)};t.hooks.hook("dom:beforeRender",e=>{e.shouldRender=!n}),e.hooks.hook("page:start",()=>{n=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||r()}),e.hooks.hook("app:error",r),e.hooks.hook("app:suspense:resolve",r)}}}),tu="undefined"!=typeof document;function nu(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const ru=Object.assign;function su(e,t){const n={};for(const r in t){const s=t[r];n[r]=ou(s)?s.map(e):e(s)}return n}const iu=()=>{},ou=Array.isArray,au=/#/g,cu=/&/g,lu=/\//g,uu=/=/g,hu=/\?/g,du=/\+/g,fu=/%5B/g,pu=/%5D/g,mu=/%5E/g,gu=/%60/g,yu=/%7B/g,vu=/%7C/g,wu=/%7D/g,bu=/%20/g;function _u(e){return encodeURI(""+e).replace(vu,"|").replace(fu,"[").replace(pu,"]")}function Iu(e){return _u(e).replace(du,"%2B").replace(bu,"+").replace(au,"%23").replace(cu,"%26").replace(gu,"`").replace(yu,"{").replace(wu,"}").replace(mu,"^")}function Tu(e){return Iu(e).replace(uu,"%3D")}function Eu(e){return null==e?"":function(e){return _u(e).replace(au,"%23").replace(hu,"%3F")}(e).replace(lu,"%2F")}function Su(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const ku=/\/$/;function xu(e,t,n="/"){let r,s={},i="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,a>-1?a:t.length),s=e(i)),a>-1&&(r=r||t.slice(0,a),o=t.slice(a,t.length)),r=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];".."!==s&&"."!==s||r.push("");let i,o,a=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],"."!==o){if(".."!==o)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+r.slice(i).join("/")}(null!=r?r:t,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Su(o)}}function Cu(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function Au(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Du(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Nu(e[n],t[n]))return!1;return!0}function Nu(e,t){return ou(e)?Ru(e,t):ou(t)?Ru(t,e):e===t}function Ru(e,t){return ou(t)?e.length===t.length&&e.every((e,n)=>e===t[n]):1===e.length&&e[0]===t}const Ou={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Pu,Lu,Mu,Fu;function Uu(e){if(!e)if(tu){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(ku,"")}(Lu=Pu||(Pu={})).pop="pop",Lu.push="push",(Fu=Mu||(Mu={})).back="back",Fu.forward="forward",Fu.unknown="";const Vu=/^[^#]+#/;function ju(e,t){return e.replace(Vu,"#")+t}const Bu=()=>({left:window.scrollX,top:window.scrollY});function qu(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),s="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=function(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function $u(e,t){return(history.state?history.state.position-t:-1)+e}const zu=new Map;function Hu(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let t=s.includes(e.slice(i))?e.slice(i).length:1,n=s.slice(t);return"/"!==n[0]&&(n="/"+n),Cu(n,"")}return Cu(n,e)+r+s}function Gu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Bu():null}}function Ku(e){const{history:t,location:n}=window,r={value:Hu(e,n)},s={value:t.state};function i(r,i,o){const a=e.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?e:e.slice(a))+r:location.protocol+"//"+location.host+e+r;try{t[o?"replaceState":"pushState"](i,"",c),s.value=i}catch(l){n[o?"replace":"assign"](c)}}return s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:s,push:function(e,n){const o=ru({},s.value,t.state,{forward:e,scroll:Bu()});i(o.current,o,!0),i(e,ru({},Gu(r.value,e,null),{position:o.position+1},n),!1),r.value=e},replace:function(e,n){i(e,ru({},t.state,Gu(s.value.back,e,s.value.forward,!0),n,{position:s.value.position}),!0),r.value=e}}}function Wu(e){const t=Ku(e=Uu(e)),n=function(e,t,n,r){let s=[],i=[],o=null;const a=({state:i})=>{const a=Hu(e,location),c=n.value,l=t.value;let u=0;if(i){if(n.value=a,t.value=i,o&&o===c)return void(o=null);u=l?i.position-l.position:0}else r(a);s.forEach(e=>{e(n.value,c,{delta:u,type:Pu.pop,direction:u?u>0?Mu.forward:Mu.back:Mu.unknown})})};function c(){const{history:e}=window;e.state&&e.replaceState(ru({},e.state,{scroll:Bu()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:function(){o=n.value},listen:function(e){s.push(e);const t=()=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)};return i.push(t),t},destroy:function(){for(const e of i)e();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}}}(e,t.state,t.location,t.replace);const r=ru({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:ju.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Qu(e){return"string"==typeof e||"symbol"==typeof e}const Ju=Symbol("");var Yu,Xu;function Zu(e,t){return ru(new Error,{type:e,[Ju]:!0},t)}function eh(e,t){return e instanceof Error&&Ju in e&&(null==t||!!(e.type&t))}(Xu=Yu||(Yu={}))[Xu.aborted=4]="aborted",Xu[Xu.cancelled=8]="cancelled",Xu[Xu.duplicated=16]="duplicated";const th="[^/]+?",nh={sensitive:!1,strict:!1,start:!0,end:!0},rh=/[.+*?^${}()[\]/\\]/g;function sh(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function ih(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const e=sh(r[n],s[n]);if(e)return e;n++}if(1===Math.abs(s.length-r.length)){if(oh(r))return 1;if(oh(s))return-1}return s.length-r.length}function oh(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ah={type:0,value:""},ch=/[a-zA-Z0-9_]/;function lh(e,t,n){const r=function(e,t){const n=ru({},nh,t),r=[];let s=n.start?"^":"";const i=[];for(const c of e){const e=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let t=0;t<c.length;t++){const r=c[t];let o=40+(n.sensitive?.25:0);if(0===r.type)t||(s+="/"),s+=r.value.replace(rh,"\\$&"),o+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:u}=r;i.push({name:e,repeatable:n,optional:l});const h=u||th;if(h!==th){o+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${e}" (${h}): `+a.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;t||(d=l&&c.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),s+=d,o+=20,l&&(o+=-8),n&&(o+=-20),".*"===h&&(o+=-50)}e.push(o)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");return{re:o,score:r,keys:i,parse:function(e){const t=e.match(o),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",s=i[r-1];n[s.name]=e&&s.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const s of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of s)if(0===e.type)n+=e.value;else if(1===e.type){const{value:i,repeatable:o,optional:a}=e,c=i in t?t[i]:"";if(ou(c)&&!o)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);const l=ou(c)?c.join("/"):c;if(!l){if(!a)throw new Error(`Missing required param "${i}"`);s.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[ah]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a,c=0,l="",u="";function h(){l&&(0===n?i.push({type:0,value:l}):1===n||2===n||3===n?(i.length>1&&("*"===a||"+"===a)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):t("Invalid state to consume buffer"),l="")}function d(){l+=a}for(;c<e.length;)if(a=e[c++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(l&&h(),o()):":"===a?(h(),n=1):d();break;case 4:d(),n=r;break;case 1:"("===a?n=2:ch.test(a)?d():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&c--,u="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),h(),o(),s}(e.path),n),s=ru(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function uh(e,t){const n=[],r=new Map;function s(e,n,r){const a=!r,c=dh(e);c.aliasOf=r&&r.record;const l=gh(t,e),u=[c];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(dh(ru({},c,{components:r?r.record.components:c.components,path:e,aliasOf:r?r.record:c})))}let h,d;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&r+u)}if(h=lh(t,n,l),r?r.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&e.name&&!ph(h)&&i(e.name)),yh(h)&&o(h),c.children){const e=c.children;for(let t=0;t<e.length;t++)s(e[t],h,r&&r.children[t])}r=r||h}return d?()=>{i(d)}:iu}function i(e){if(Qu(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function o(e){const t=function(e,t){let n=0,r=t.length;for(;n!==r;){const s=n+r>>1;ih(e,t[s])<0?r=s:n=s+1}const s=function(e){let t=e;for(;t=t.parent;)if(yh(t)&&0===ih(e,t))return t;return}(e);s&&(r=t.lastIndexOf(s,r-1));return r}(e,n);n.splice(t,0,e),e.record.name&&!ph(e)&&r.set(e.record.name,e)}return t=gh({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>s(e)),{addRoute:s,resolve:function(e,t){let s,i,o,a={};if("name"in e&&e.name){if(s=r.get(e.name),!s)throw Zu(1,{location:e});o=s.record.name,a=ru(hh(t.params,s.keys.filter(e=>!e.optional).concat(s.parent?s.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&hh(e.params,s.keys.map(e=>e.name))),i=s.stringify(a)}else if(null!=e.path)i=e.path,s=n.find(e=>e.re.test(i)),s&&(a=s.parse(i),o=s.record.name);else{if(s=t.name?r.get(t.name):n.find(e=>e.re.test(t.path)),!s)throw Zu(1,{location:e,currentLocation:t});o=s.record.name,a=ru({},t.params,e.params),i=s.stringify(a)}const c=[];let l=s;for(;l;)c.unshift(l.record),l=l.parent;return{name:o,path:i,params:a,matched:c,meta:mh(c)}},removeRoute:i,clearRoutes:function(){n.length=0,r.clear()},getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function hh(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function dh(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:fh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function fh(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="object"==typeof n?n[r]:n;return t}function ph(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mh(e){return e.reduce((e,t)=>ru(e,t.meta),{})}function gh(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function yh({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function vh(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(du," "),s=e.indexOf("="),i=Su(s<0?e:e.slice(0,s)),o=s<0?null:Su(e.slice(s+1));if(i in t){let e=t[i];ou(e)||(e=t[i]=[e]),e.push(o)}else t[i]=o}return t}function wh(e){let t="";for(let n in e){const r=e[n];if(n=Tu(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(ou(r)?r.map(e=>e&&Iu(e)):[r&&Iu(r)]).forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))})}return t}function bh(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=ou(r)?r.map(e=>null==e?null:""+e):null==r?r:""+r)}return t}const _h=Symbol(""),Ih=Symbol(""),Th=Symbol(""),Eh=Symbol(""),Sh=Symbol("");function kh(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function xh(e,t,n,r,s,i=e=>e()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=e=>{var i;!1===e?c(Zu(4,{from:n,to:t})):e instanceof Error?c(e):"string"==typeof(i=e)||i&&"object"==typeof i?c(Zu(2,{from:t,to:e})):(o&&r.enterCallbacks[s]===o&&"function"==typeof e&&o.push(e),a())},u=i(()=>e.call(r&&r.instances[s],t,n,l));let h=Promise.resolve(u);e.length<3&&(h=h.then(l)),h.catch(e=>c(e))})}function Ch(e,t,n,r,s=e=>e()){const i=[];for(const o of e)for(const e in o.components){let a=o.components[e];if("beforeRouteEnter"===t||o.instances[e])if(nu(a)){const c=(a.__vccOpts||a)[t];c&&i.push(xh(c,n,r,o,e,s))}else{let c=a();i.push(()=>c.then(i=>{if(!i)throw new Error(`Couldn't resolve component "${e}" at "${o.path}"`);const a=(c=i).__esModule||"Module"===c[Symbol.toStringTag]||c.default&&nu(c.default)?i.default:i;var c;o.mods[e]=i,o.components[e]=a;const l=(a.__vccOpts||a)[t];return l&&xh(l,n,r,o,e,s)()}))}}return i}function Ah(e){const t=Wr(Th),n=Wr(Eh),r=Ai(()=>{const n=At(e.to);return t.resolve(n)}),s=Ai(()=>{const{matched:e}=r.value,{length:t}=e,s=e[t-1],i=n.matched;if(!s||!i.length)return-1;const o=i.findIndex(Au.bind(null,s));if(o>-1)return o;const a=Nh(e[t-2]);return t>1&&Nh(s)===a&&i[i.length-1].path!==a?i.findIndex(Au.bind(null,e[t-2])):o}),i=Ai(()=>s.value>-1&&function(e,t){for(const n in t){const r=t[n],s=e[n];if("string"==typeof r){if(r!==s)return!1}else if(!ou(s)||s.length!==r.length||r.some((e,t)=>e!==s[t]))return!1}return!0}(n.params,r.value.params)),o=Ai(()=>s.value>-1&&s.value===n.matched.length-1&&Du(n.params,r.value.params));return{route:r,href:Ai(()=>r.value.href),isActive:i,isExactActive:o,navigate:function(n={}){if(function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(n)){const n=t[At(e.replace)?"replace":"push"](At(e.to)).catch(iu);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>n),n}return Promise.resolve()}}}const Dh=Fn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ah,setup(e,{slots:t}){const n=dt(Ah(e)),{options:r}=Wr(Th),s=Ai(()=>({[Rh(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Rh(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&(1===(i=t.default(n)).length?i[0]:i);var i;return e.custom?r:Di("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}});function Nh(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Rh=(e,t,n)=>null!=e?e:null!=t?t:n,Oh=Fn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Wr(Sh),s=Ai(()=>e.route||r.value),i=Wr(Ih,0),o=Ai(()=>{let e=At(i);const{matched:t}=s.value;let n;for(;(n=t[e])&&!n.components;)e++;return e}),a=Ai(()=>s.value.matched[o.value]);Kr(Ih,Ai(()=>o.value+1)),Kr(_h,a),Kr(Sh,s);const c=St();return bs(()=>[c.value,a.value,e.name],([e,t,n],[r,s,i])=>{t&&(t.instances[n]=e,s&&s!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=s.leaveGuards),t.updateGuards.size||(t.updateGuards=s.updateGuards))),!e||!t||s&&Au(t,s)&&r||(t.enterCallbacks[n]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const r=s.value,i=e.name,o=a.value,l=o&&o.components[i];if(!l)return Ph(n.default,{Component:l,route:r});const u=o.props[i],h=u?!0===u?r.params:"function"==typeof u?u(r):u:null,d=Di(l,ru({},h,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(o.instances[i]=null)},ref:c}));return Ph(n.default,{Component:d,route:r})||d}}});function Ph(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const Lh=Oh;function Mh(e){const t=uh(e.routes,e),n=e.parseQuery||vh,r=e.stringifyQuery||wh,s=e.history,i=kh(),o=kh(),a=kh(),c=kt(Ou);let l=Ou;tu&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=su.bind(null,e=>""+e),h=su.bind(null,Eu),d=su.bind(null,Su);function f(e,i){if(i=ru({},i||c.value),"string"==typeof e){const r=xu(n,e,i.path),o=t.resolve({path:r.path},i),a=s.createHref(r.fullPath);return ru(r,o,{params:d(o.params),hash:Su(r.hash),redirectedFrom:void 0,href:a})}let o;if(null!=e.path)o=ru({},e,{path:xu(n,e.path,i.path).path});else{const t=ru({},e.params);for(const e in t)null==t[e]&&delete t[e];o=ru({},e,{params:h(t)}),i.params=h(i.params)}const a=t.resolve(o,i),l=e.hash||"";a.params=u(d(a.params));const f=function(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}(r,ru({},e,{hash:(p=l,_u(p).replace(yu,"{").replace(wu,"}").replace(mu,"^")),path:a.path}));var p;const m=s.createHref(f);return ru({fullPath:f,hash:l,query:r===wh?bh(e.query):e.query||{}},a,{redirectedFrom:void 0,href:m})}function p(e){return"string"==typeof e?xu(n,e,c.value.path):ru({},e)}function m(e,t){if(l!==e)return Zu(8,{from:t,to:e})}function g(e){return v(e)}function y(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=p(r):{path:r},r.params={}),ru({query:e.query,hash:e.hash,params:null!=r.path?{}:e.params},r)}}function v(e,t){const n=l=f(e),s=c.value,i=e.state,o=e.force,a=!0===e.replace,u=y(n);if(u)return v(ru(p(u),{state:"object"==typeof u?ru({},i,u.state):i,force:o,replace:a}),t||n);const h=n;let d;return h.redirectedFrom=t,!o&&function(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Au(t.matched[r],n.matched[s])&&Du(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}(r,s,n)&&(d=Zu(16,{to:h,from:s}),N(s,s,!0,!1)),(d?Promise.resolve(d):_(h,s)).catch(e=>eh(e)?eh(e,2)?e:D(e):A(e,h,s)).then(e=>{if(e){if(eh(e,2))return v(ru({replace:a},p(e.to),{state:"object"==typeof e.to?ru({},i,e.to.state):i,force:o}),t||h)}else e=T(h,s,!0,a,i);return I(h,s,e),e})}function w(e,t){const n=m(e,t);return n?Promise.reject(n):Promise.resolve()}function b(e){const t=P.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function _(e,t){let n;const[r,s,a]=function(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let o=0;o<i;o++){const i=t.matched[o];i&&(e.matched.find(e=>Au(e,i))?r.push(i):n.push(i));const a=e.matched[o];a&&(t.matched.find(e=>Au(e,a))||s.push(a))}return[n,r,s]}(e,t);n=Ch(r.reverse(),"beforeRouteLeave",e,t);for(const i of r)i.leaveGuards.forEach(r=>{n.push(xh(r,e,t))});const c=w.bind(null,e,t);return n.push(c),M(n).then(()=>{n=[];for(const r of i.list())n.push(xh(r,e,t));return n.push(c),M(n)}).then(()=>{n=Ch(s,"beforeRouteUpdate",e,t);for(const r of s)r.updateGuards.forEach(r=>{n.push(xh(r,e,t))});return n.push(c),M(n)}).then(()=>{n=[];for(const r of a)if(r.beforeEnter)if(ou(r.beforeEnter))for(const s of r.beforeEnter)n.push(xh(s,e,t));else n.push(xh(r.beforeEnter,e,t));return n.push(c),M(n)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),n=Ch(a,"beforeRouteEnter",e,t,b),n.push(c),M(n))).then(()=>{n=[];for(const r of o.list())n.push(xh(r,e,t));return n.push(c),M(n)}).catch(e=>eh(e,8)?e:Promise.reject(e))}function I(e,t,n){a.list().forEach(r=>b(()=>r(e,t,n)))}function T(e,t,n,r,i){const o=m(e,t);if(o)return o;const a=t===Ou,l=tu?history.state:{};n&&(r||a?s.replace(e.fullPath,ru({scroll:a&&l&&l.scroll},i)):s.push(e.fullPath,i)),c.value=e,N(e,t,n,a),D()}let E;function S(){E||(E=s.listen((e,t,n)=>{if(!L.listening)return;const r=f(e),i=y(r);if(i)return void v(ru(i,{replace:!0,force:!0}),r).catch(iu);l=r;const o=c.value;var a,u;tu&&(a=$u(o.fullPath,n.delta),u=Bu(),zu.set(a,u)),_(r,o).catch(e=>eh(e,12)?e:eh(e,2)?(v(ru(p(e.to),{force:!0}),r).then(e=>{eh(e,20)&&!n.delta&&n.type===Pu.pop&&s.go(-1,!1)}).catch(iu),Promise.reject()):(n.delta&&s.go(-n.delta,!1),A(e,r,o))).then(e=>{(e=e||T(r,o,!1))&&(n.delta&&!eh(e,8)?s.go(-n.delta,!1):n.type===Pu.pop&&eh(e,20)&&s.go(-1,!1)),I(r,o,e)}).catch(iu)}))}let k,x=kh(),C=kh();function A(e,t,n){D(e);const r=C.list();return r.length&&r.forEach(r=>r(e,t,n)),Promise.reject(e)}function D(e){return k||(k=!e,S(),x.list().forEach(([t,n])=>e?n(e):t()),x.reset()),e}function N(t,n,r,s){const{scrollBehavior:i}=e;if(!tu||!i)return Promise.resolve();const o=!r&&function(e){const t=zu.get(e);return zu.delete(e),t}($u(t.fullPath,0))||(s||!r)&&history.state&&history.state.scroll||null;return Yt().then(()=>i(t,n,o)).then(e=>e&&qu(e)).catch(e=>A(e,t,n))}const R=e=>s.go(e);let O;const P=new Set,L={currentRoute:c,listening:!0,addRoute:function(e,n){let r,s;return Qu(e)?(r=t.getRecordMatcher(e),s=n):s=e,t.addRoute(s,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map(e=>e.record)},resolve:f,options:e,push:g,replace:function(e){return g(ru(p(e),{replace:!0}))},go:R,back:()=>R(-1),forward:()=>R(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:C.add,isReady:function(){return k&&c.value!==Ou?Promise.resolve():new Promise((e,t)=>{x.add([e,t])})},install(e){e.component("RouterLink",Dh),e.component("RouterView",Lh),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>At(c)}),tu&&!O&&c.value===Ou&&(O=!0,g(s.location).catch(e=>{}));const t={};for(const r in Ou)Object.defineProperty(t,r,{get:()=>c.value[r],enumerable:!0});e.provide(Th,this),e.provide(Eh,ft(t)),e.provide(Sh,c);const n=e.unmount;P.add(e),e.unmount=function(){P.delete(e),P.size<1&&(l=Ou,E&&E(),E=null,c.value=Ou,O=!1,k=!1),n()}}};function M(e){return e.reduce((e,t)=>e.then(()=>b(t)),Promise.resolve())}return L}function Fh(e){return Wr(Eh)}const Uh=/(:\w+)\([^)]+\)/g,Vh=/(:\w+)[?+*]/g,jh=/:\w+/g,Bh=(e,t)=>{const n=e.route.matched.find(t=>{var n;return(null==(n=t.components)?void 0:n.default)===e.Component.type}),r=t??(null==n?void 0:n.meta.key)??(n&&(s=e.route,n.path.replace(Uh,"$1").replace(Vh,"$1").replace(jh,e=>{var t;return(null==(t=s.params[e.slice(1)])?void 0:t.toString())||""})));var s;return"function"==typeof r?r(e.route):r};function qh(e){return Array.isArray(e)?e:[e]}const $h=[{name:"index",path:"/",meta:{ssr:!1}||{},component:()=>Ll(()=>Promise.resolve().then(()=>SR),void 0,import.meta.url)},{name:"login",path:"/login",meta:{layout:"auth",ssr:!1}||{},component:()=>Ll(()=>Promise.resolve().then(()=>PR),void 0,import.meta.url)},{name:"calendar",path:"/calendar",meta:{ssr:!1}||{},component:()=>Ll(()=>Promise.resolve().then(()=>gP),void 0,import.meta.url)},{name:"register",path:"/register",meta:{layout:"auth",ssr:!1}||{},component:()=>Ll(()=>Promise.resolve().then(()=>kP),void 0,import.meta.url)},{name:"calendar-mobile",path:"/calendar-mobile",meta:{ssr:!1}||{},component:()=>Ll(()=>Promise.resolve().then(()=>uL),void 0,import.meta.url)}],zh=(e,t)=>({default:()=>{var n;return e?Di($i,!0===e?{}:e,t):null==(n=t.default)?void 0:n.call(t)}}),Hh=/(:\w+)\([^)]+\)/g,Gh=/(:\w+)[?+*]/g,Kh=/:\w+/g;function Wh(e){const t=(null==e?void 0:e.meta.key)??e.path.replace(Hh,"$1").replace(Gh,"$1").replace(Kh,t=>{var n;return(null==(n=e.params[t.slice(1)])?void 0:n.toString())||""});return"function"==typeof t?t(e):t}function Qh(e){try{const t=document.querySelector(e);if(t)return(Number.parseFloat(getComputedStyle(t).scrollMarginTop)||0)+(Number.parseFloat(getComputedStyle(document.documentElement).scrollPaddingTop)||0)}catch{}return 0}function Jh(e,t,n,r){if(n)return n;const s=function(e,t){return e!==t&&t!==Ou&&(Wh(e)!==Wh(t)||!e.matched.every((e,n)=>{var r,s;return e.components&&e.components.default===(null==(s=null==(r=t.matched[n])?void 0:r.components)?void 0:s.default)}))}(e,t);return e.hash?{el:e.hash,top:Qh(e.hash),behavior:s?r:"instant"}:{left:0,top:0,behavior:s?r:"instant"}}const Yh={hashMode:!1,scrollBehaviorType:"auto",...{scrollBehavior(e,t,n){var r;const s=pc(),i=(null==(r=Rc().options)?void 0:r.scrollBehaviorType)??"auto";if(e.path===t.path)return t.hash&&!e.hash?{left:0,top:0}:!!e.hash&&{el:e.hash,top:Qh(e.hash),behavior:i};if(!1===("function"==typeof e.meta.scrollToTop?e.meta.scrollToTop(e,t):e.meta.scrollToTop))return!1;const o=s._runningTransition?"page:transition:finish":"page:loading:end";return new Promise(r=>{t!==Ou?s.hooks.hookOnce(o,()=>{requestAnimationFrame(()=>r(Jh(e,t,n,i)))}):r(Jh(e,t,n,i))})}}},Xh=Pc(async(e,t)=>{var n;let r,s;if(!(null==(n=e.meta)?void 0:n.validate))return;const i=([r,s]=rc(()=>Promise.resolve(e.meta.validate(e))),r=await r,s(),r);if(!0===i)return;const o=qc({fatal:!0,statusCode:i&&i.statusCode||404,statusMessage:i&&i.statusMessage||`Page Not Found: ${e.fullPath}`,data:{path:e.fullPath}});return"undefined"!=typeof window&&window.history.pushState({},"",t.fullPath),o});var Zh={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},td={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,c=a?e[s+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ed(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==o||null==a)throw new nd;const c=t<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nd extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rd=function(e){return function(e){const t=ed(e);return td.encodeByteArray(t,!0)}(e).replace(/\./g,"")},sd=function(e){try{return td.decodeString(e,!0)}catch(mL){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const id=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,od=()=>{try{return id()||(()=>{if("undefined"==typeof process)return;const e=Zh.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(mL){return}const t=e&&sd(e[1]);return t&&JSON.parse(t)})()}catch(mL){return}},ad=e=>{var t,n;return null===(n=null===(t=od())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},cd=()=>{var e;return null===(e=od())||void 0===e?void 0:e.config},ld=e=>{var t;return null===(t=od())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ud{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hd(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dd(){return!function(){var e;const t=null===(e=od())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(mL){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fd(){try{return"object"==typeof indexedDB}catch(mL){return!1}}class pd extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,pd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,md.prototype.create)}}class md{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace(gd,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new pd(r,o,n)}}const gd=/\{\$([^}]+)}/g;function yd(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(vd(n)&&vd(i)){if(!yd(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vd(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function bd(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function _d(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Id{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Td),void 0===r.error&&(r.error=Td),void 0===r.complete&&(r.complete=Td);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(mL){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(mL){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Td(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e){return e&&e._delegate?e._delegate:e}class Sd{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ud;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(mL){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(mL){if(r)return null;throw mL}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:kd})}catch(mL){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(mL){}}}}clearInstance(e=kd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=kd){return this.instances.has(e)}getOptions(e=kd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===kd?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(s){}var r;return n||null}normalizeInstanceIdentifier(e=kd){return this.component?this.component.multipleInstances?e:kd:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Cd{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ad,Dd;(Dd=Ad||(Ad={}))[Dd.DEBUG=0]="DEBUG",Dd[Dd.VERBOSE=1]="VERBOSE",Dd[Dd.INFO=2]="INFO",Dd[Dd.WARN=3]="WARN",Dd[Dd.ERROR=4]="ERROR",Dd[Dd.SILENT=5]="SILENT";const Nd={debug:Ad.DEBUG,verbose:Ad.VERBOSE,info:Ad.INFO,warn:Ad.WARN,error:Ad.ERROR,silent:Ad.SILENT},Rd=Ad.INFO,Od={[Ad.DEBUG]:"log",[Ad.VERBOSE]:"log",[Ad.INFO]:"info",[Ad.WARN]:"warn",[Ad.ERROR]:"error"},Pd=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!Od[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ld{constructor(e){this.name=e,this._logLevel=Rd,this._logHandler=Pd,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ad))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Nd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ad.DEBUG,...e),this._logHandler(this,Ad.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ad.VERBOSE,...e),this._logHandler(this,Ad.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ad.INFO,...e),this._logHandler(this,Ad.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ad.WARN,...e),this._logHandler(this,Ad.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ad.ERROR,...e),this._logHandler(this,Ad.ERROR,...e)}}let Md,Fd;const Ud=new WeakMap,Vd=new WeakMap,jd=new WeakMap,Bd=new WeakMap,qd=new WeakMap;let $d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Vd.get(e);if("objectStoreNames"===t)return e.objectStoreNames||jd.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gd(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function zd(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fd||(Fd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Kd(this),t),Gd(Ud.get(this))}:function(...t){return Gd(e.apply(Kd(this),t))}:function(t,...n){const r=e.call(Kd(this),t,...n);return jd.set(r,t.sort?t.sort():[t]),Gd(r)}}function Hd(e){return"function"==typeof e?zd(e):(e instanceof IDBTransaction&&function(e){if(Vd.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});Vd.set(e,t)}(e),t=e,(Md||(Md=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,$d):e);var t}function Gd(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(Gd(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&Ud.set(t,e)}).catch(()=>{}),qd.set(t,e),t}(e);if(Bd.has(e))return Bd.get(e);const t=Hd(e);return t!==e&&(Bd.set(e,t),qd.set(t,e)),t}const Kd=e=>qd.get(e);const Wd=["get","getKey","getAll","getAllKeys","count"],Qd=["put","add","delete","clear"],Jd=new Map;function Yd(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Jd.get(t))return Jd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Qd.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Wd.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,s?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&i.done]))[0]};return Jd.set(t,i),i}$d=(e=>({...e,get:(t,n,r)=>Yd(t,n)||e.get(t,n,r),has:(t,n)=>!!Yd(t,n)||e.has(t,n)}))($d);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Zd="@firebase/app",ef="0.10.13",tf=new Ld("@firebase/app"),nf="@firebase/app-compat",rf="@firebase/analytics-compat",sf="@firebase/analytics",of="@firebase/app-check-compat",af="@firebase/app-check",cf="@firebase/auth",lf="@firebase/auth-compat",uf="@firebase/database",hf="@firebase/data-connect",df="@firebase/database-compat",ff="@firebase/functions",pf="@firebase/functions-compat",mf="@firebase/installations",gf="@firebase/installations-compat",yf="@firebase/messaging",vf="@firebase/messaging-compat",wf="@firebase/performance",bf="@firebase/performance-compat",_f="@firebase/remote-config",If="@firebase/remote-config-compat",Tf="@firebase/storage",Ef="@firebase/storage-compat",Sf="@firebase/firestore",kf="@firebase/vertexai-preview",xf="@firebase/firestore-compat",Cf="firebase",Af="[DEFAULT]",Df={[Zd]:"fire-core",[nf]:"fire-core-compat",[sf]:"fire-analytics",[rf]:"fire-analytics-compat",[af]:"fire-app-check",[of]:"fire-app-check-compat",[cf]:"fire-auth",[lf]:"fire-auth-compat",[uf]:"fire-rtdb",[hf]:"fire-data-connect",[df]:"fire-rtdb-compat",[ff]:"fire-fn",[pf]:"fire-fn-compat",[mf]:"fire-iid",[gf]:"fire-iid-compat",[yf]:"fire-fcm",[vf]:"fire-fcm-compat",[wf]:"fire-perf",[bf]:"fire-perf-compat",[_f]:"fire-rc",[If]:"fire-rc-compat",[Tf]:"fire-gcs",[Ef]:"fire-gcs-compat",[Sf]:"fire-fst",[xf]:"fire-fst-compat",[kf]:"fire-vertex","fire-js":"fire-js",[Cf]:"fire-js-all"},Nf=new Map,Rf=new Map,Of=new Map;function Pf(e,t){try{e.container.addComponent(t)}catch(mL){tf.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,mL)}}function Lf(e){const t=e.name;if(Of.has(t))return tf.debug(`There were multiple attempts to register component ${t}.`),!1;Of.set(t,e);for(const n of Nf.values())Pf(n,e);for(const n of Rf.values())Pf(n,e);return!0}function Mf(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ff(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new md("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vf{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Sd("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uf.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="10.14.1";function Bf(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:Af,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!=typeof s||!s)throw Uf.create("bad-app-name",{appName:String(s)});if(n||(n=cd()),!n)throw Uf.create("no-options");const i=Nf.get(s);if(i){if(yd(n,i.options)&&yd(r,i.config))return i;throw Uf.create("duplicate-app",{appName:s})}const o=new Cd(s);for(const c of Of.values())o.addComponent(c);const a=new Vf(n,r,o);return Nf.set(s,a),a}function qf(e=Af){const t=Nf.get(e);if(!t&&e===Af&&cd())return Bf();if(!t)throw Uf.create("no-app",{appName:e});return t}function $f(e,t,n){var r;let s=null!==(r=Df[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void tf.warn(e.join(" "))}Lf(new Sd(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="firebase-heartbeat-store";let Hf=null;function Gf(){return Hf||(Hf=function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),a=Gd(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Gd(o.result),e.oldVersion,e.newVersion,Gd(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(zf)}catch(mL){}}}).catch(e=>{throw Uf.create("idb-open",{originalErrorMessage:e.message})})),Hf}async function Kf(e,t){try{const n=(await Gf()).transaction(zf,"readwrite"),r=n.objectStore(zf);await r.put(t,Wf(e)),await n.done}catch(mL){if(mL instanceof pd)tf.warn(mL.message);else{const t=Uf.create("idb-set",{originalErrorMessage:null==mL?void 0:mL.message});tf.warn(t.message)}}}function Wf(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yf(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jf();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(mL){tf.warn(mL)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Jf(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Xf(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xf(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=rd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(mL){return tf.warn(mL),""}}}function Jf(){return(new Date).toISOString().substring(0,10)}class Yf{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fd()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Gf()).transaction(zf),n=await t.objectStore(zf).get(Wf(e));return await t.done,n}catch(mL){if(mL instanceof pd)tf.warn(mL.message);else{const t=Uf.create("idb-get",{originalErrorMessage:null==mL?void 0:mL.message});tf.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Kf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Kf(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Xf(e){return rd(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zf;function ep(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Zf="",Lf(new Sd("platform-logger",e=>new Xd(e),"PRIVATE")),Lf(new Sd("heartbeat",e=>new Qf(e),"PRIVATE")),$f(Zd,ef,Zf),$f(Zd,ef,"esm2017"),$f("fire-js",""),"function"==typeof SuppressedError&&SuppressedError;function tp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const np=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},rp=tp,sp=new md("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ip=new Ld("@firebase/auth");function op(e,...t){ip.logLevel<=Ad.ERROR&&ip.error(`Auth (${jf}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(e,...t){throw dp(e,...t)}function cp(e,...t){return dp(e,...t)}function lp(e,t,n){const r=Object.assign(Object.assign({},rp()),{[t]:n});return new md("auth","Firebase",r).create(t,{appName:e.name})}function up(e){return lp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hp(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ap(e,"argument-error"),lp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dp(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return sp.create(e,...t)}function fp(e,t,...n){if(!e)throw dp(t,...n)}function pp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw op(t),new Error(t)}function mp(e,t){e||pp(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function yp(){return"http:"===vp()||"https:"===vp()}function vp(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yp()||function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class bp{constructor(e,t){this.shortDelay=e,this.longDelay=t,mp(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hd())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return wp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(e,t){mp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void pp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void pp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void pp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ep=new bp(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function kp(e,t,n,r,s={}){return xp(e,s,async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const o=wd(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:a},s);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),Ip.fetch()(Ap(e,e.config.apiHost,n,o),c)})}async function xp(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Tp),t);try{const t=new Np(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Rp(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Rp(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Rp(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Rp(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw lp(e,a,o);ap(e,a)}}catch(mL){if(mL instanceof pd)throw mL;ap(e,"network-request-failed",{message:String(mL)})}}async function Cp(e,t,n,r,s={}){const i=await kp(e,t,n,r,s);return"mfaPendingCredential"in i&&ap(e,"multi-factor-auth-required",{_serverResponse:i}),i}function Ap(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?_p(e.config,s):`${e.config.apiScheme}://${s}`}function Dp(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Np{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(cp(this.auth,"network-request-failed")),Ep.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cp(e,t,r);return s.customData._tokenResponse=n,s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(e){return void 0!==e&&void 0!==e.getResponse}function Pp(e){return void 0!==e&&void 0!==e.enterprise}class Lp{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Dp(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mp(e,t){return kp(e,"GET","/v2/recaptchaConfig",Sp(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fp(e,t){return kp(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(mL){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(e,t=!1){const n=Ed(e),r=await n.getIdToken(t),s=Bp(r);fp(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"==typeof s.firebase?s.firebase:void 0,o=null==i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Up(jp(s.auth_time)),issuedAtTime:Up(jp(s.iat)),expirationTime:Up(jp(s.exp)),signInProvider:o||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}function jp(e){return 1e3*Number(e)}function Bp(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return op("JWT malformed, contained fewer than 3 sections"),null;try{const e=sd(n);return e?JSON.parse(e):(op("Failed to decode base64 JWT payload"),null)}catch(mL){return op("Caught error parsing JWT payload as JSON",null==mL?void 0:mL.toString()),null}}function qp(e){const t=Bp(e);return fp(t,"internal-error"),fp(void 0!==t.exp,"internal-error"),fp(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $p(e,t,n=!1){if(n)return t;try{return await t}catch(mL){throw mL instanceof pd&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(mL)&&e.auth.currentUser===e&&await e.auth.signOut(),mL}}class zp{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(mL){return void("auth/network-request-failed"===(null==mL?void 0:mL.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Up(this.lastLoginAt),this.creationTime=Up(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gp(e){var t;const n=e.auth,r=await e.getIdToken(),s=await $p(e,Fp(n,{idToken:r}));fp(null==s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?Wp(i.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&i.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Hp(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,f)}async function Kp(e){const t=Ed(e);await Gp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Wp(e){return e.map(e=>{var{providerId:t}=e,n=ep(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fp(e.idToken,"internal-error"),fp(void 0!==e.idToken,"internal-error"),fp(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):qp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fp(0!==e.length,"internal-error");const t=qp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(fp(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await xp(e,{},async()=>{const n=wd({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=Ap(e,r,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ip.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Qp;return n&&(fp("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(fp("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(fp("number"==typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qp,this.toJSON())}_performRefresh(){return pp("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(e,t){fp("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Yp{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=ep(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await $p(this,this.stsTokenManager.getToken(this.auth,e));return fp(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Vp(this,e)}reload(){return Kp(this)}_assign(e){this!==e&&(fp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yp(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Gp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ff(this.auth.app))return Promise.reject(up(this.auth));const e=await this.getIdToken();return await $p(this,async function(e,t){return kp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;fp(v&&I,e,"internal-error");const T=Qp.fromJSON(this.name,I);fp("string"==typeof v,e,"internal-error"),Jp(u,e.name),Jp(h,e.name),fp("boolean"==typeof w,e,"internal-error"),fp("boolean"==typeof b,e,"internal-error"),Jp(d,e.name),Jp(f,e.name),Jp(p,e.name),Jp(m,e.name),Jp(g,e.name),Jp(y,e.name);const E=new Yp({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(E.providerData=_.map(e=>Object.assign({},e))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new Qp;r.updateFromServerResponse(t);const s=new Yp({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Gp(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];fp(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Wp(r.providerUserInfo):[],i=!(r.email&&r.passwordHash||(null==s?void 0:s.length)),o=new Qp;o.updateFromIdToken(n);const a=new Yp({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Hp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==s?void 0:s.length))};return Object.assign(a,c),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new Map;function Zp(e){mp(e instanceof Function,"Expected a class definition");let t=Xp.get(e);return t?(mp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xp.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}em.type="NONE";const tm=em;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(e,t,n){return`firebase:${e}:${t}:${n}`}class rm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=nm(this.userKey,r.apiKey,s),this.fullPersistenceKey=nm("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yp._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new rm(Zp(tm),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||Zp(tm);const i=nm(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){const n=Yp._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch(c){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(c){}})),new rm(s,e,n)):new rm(s,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(im(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(um(t))return"Blackberry";if(hm(t))return"Webos";if(om(t))return"Safari";if((t.includes("chrome/")||am(t))&&!t.includes("edge/"))return"Chrome";if(lm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function im(e=hd()){return/firefox\//i.test(e)}function om(e=hd()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function am(e=hd()){return/crios\//i.test(e)}function cm(e=hd()){return/iemobile/i.test(e)}function lm(e=hd()){return/android/i.test(e)}function um(e=hd()){return/blackberry/i.test(e)}function hm(e=hd()){return/webos/i.test(e)}function dm(e=hd()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function fm(){return function(){const e=hd();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function pm(e=hd()){return dm(e)||lm(e)||hm(e)||um(e)||/windows phone/i.test(e)||cm(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(e,t=[]){let n;switch(e){case"Browser":n=sm(hd());break;case"Worker":n=`${sm(hd())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${jf}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(mL){r(mL)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(mL){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==mL?void 0:mL.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(i=a.containsNumericCharacter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bm(this),this.idTokenSubscription=new bm(this),this.beforeStateQueue=new gm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zp(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await rm.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(mL){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Fp(this,{idToken:e}),n=await Yp._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ff(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==i||!(null==o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(mL){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(mL))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return fp(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(mL){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gp(e)}catch(mL){if("auth/network-request-failed"!==(null==mL?void 0:mL.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ff(this.app))return Promise.reject(up(this));const t=e?Ed(e):null;return t&&fp(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fp(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ff(this.app)?Promise.reject(up(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ff(this.app)?Promise.reject(up(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zp(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return kp(e,"GET","/v2/passwordPolicy",Sp(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new ym(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new md("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return kp(e,"POST","/v2/accounts:revokeToken",Sp(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zp(e)||this._popupRedirectResolver;fp(t,this,"argument-error"),this.redirectPersistenceManager=await rm.create(this,[Zp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(fp(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),"function"==typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fp(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){ip.logLevel<=Ad.WARN&&ip.warn(`Auth (${jf}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function wm(e){return Ed(e)}class bm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Id(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return fp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _m={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Im(e){return _m.loadJS(e)}function Tm(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Em{constructor(e){this.type="recaptcha-enterprise",this.auth=wm(e)}async verify(e="verify",t=!1){function n(t,n,r){const s=window.grecaptcha;Pp(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Mp(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Lp(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Pp(window.grecaptcha))n(s,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=_m.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Im(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Sm(e,t,n,r=!1){const s=new Em(e);let i;try{i=await s.verify(n)}catch(a){i=await s.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function km(e,t,n,r){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Sm(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){const s=await Sm(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function xm(e,t){const n=Mf(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(yd(n.getOptions(),null!=t?t:{}))return e;ap(e,"already-initialized")}return n.initialize({options:t})}function Cm(e,t,n){const r=wm(e);fp(r._canInitEmulator,r,"emulator-config-failed"),fp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),i=Am(t),{host:o,port:a}=function(e){const t=Am(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Dm(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Dm(t)}}}(t),c=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Am(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Dm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Nm{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pp("not implemented")}_getIdTokenResponse(e){return pp("not implemented")}_linkToIdToken(e,t){return pp("not implemented")}_getReauthenticationResolver(e){return pp("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rm(e,t){return kp(e,"POST","/v1/accounts:resetPassword",Sp(e,t))}async function Om(e,t){return kp(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Pm(e,t){return Cp(e,"POST","/v1/accounts:signInWithPassword",Sp(e,t))}async function Lm(e,t){return kp(e,"POST","/v1/accounts:sendOobCode",Sp(e,t))}async function Mm(e,t){return Lm(e,t)}async function Fm(e,t){return Lm(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Um extends Nm{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Um(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Um(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return km(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Pm);case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return Cp(e,"POST","/v1/accounts:signInWithEmailLink",Sp(e,t))}(e,{email:this._email,oobCode:this._password});default:ap(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return km(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Om);case"emailLink":return async function(e,t){return Cp(e,"POST","/v1/accounts:signInWithEmailLink",Sp(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ap(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vm(e,t){return Cp(e,"POST","/v1/accounts:signInWithIdp",Sp(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Nm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jm(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ap("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=ep(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new jm(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Vm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vm(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wd(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qm extends Nm{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qm({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qm({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Cp(e,"POST","/v1/accounts:signInWithPhoneNumber",Sp(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Cp(e,"POST","/v1/accounts:signInWithPhoneNumber",Sp(e,t));if(n.temporaryProof)throw Rp(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Cp(e,"POST","/v1/accounts:signInWithPhoneNumber",Sp(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Bm)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new qm({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){var t,n,r,s,i,o;const a=bd(_d(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);fp(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=bd(_d(e)).link,n=t?bd(_d(t)).deep_link_id:null,r=bd(_d(e)).deep_link_id;return(r?bd(_d(r)).link:null)||r||n||t||e}(e);try{return new $m(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class zm{constructor(){this.providerId=zm.PROVIDER_ID}static credential(e,t){return Um._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$m.parseLink(t);return fp(n,"argument-error"),Um._fromEmailAndCode(e,n.code,n.tenantId)}}zm.PROVIDER_ID="password",zm.EMAIL_PASSWORD_SIGN_IN_METHOD="password",zm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Hm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Km extends Gm{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return fp("providerId"in t&&"signInMethod"in t,"argument-error"),jm._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return fp(e.idToken||e.accessToken,"argument-error"),jm._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Km.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Km.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:s,nonce:i,providerId:o}=e;if(!(n||r||t||s))return null;if(!o)return null;try{return new Km(o)._credential({idToken:t,accessToken:n,nonce:i,pendingToken:s})}catch(mL){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm extends Gm{constructor(){super("facebook.com")}static credential(e){return jm._fromParams({providerId:Wm.PROVIDER_ID,signInMethod:Wm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wm.credentialFromTaggedObject(e)}static credentialFromError(e){return Wm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Wm.credential(e.oauthAccessToken)}catch(t){return null}}}Wm.FACEBOOK_SIGN_IN_METHOD="facebook.com",Wm.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qm extends Gm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jm._fromParams({providerId:Qm.PROVIDER_ID,signInMethod:Qm.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Qm.credentialFromTaggedObject(e)}static credentialFromError(e){return Qm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Qm.credential(t,n)}catch(r){return null}}}Qm.GOOGLE_SIGN_IN_METHOD="google.com",Qm.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jm extends Gm{constructor(){super("github.com")}static credential(e){return jm._fromParams({providerId:Jm.PROVIDER_ID,signInMethod:Jm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jm.credentialFromTaggedObject(e)}static credentialFromError(e){return Jm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Jm.credential(e.oauthAccessToken)}catch(t){return null}}}Jm.GITHUB_SIGN_IN_METHOD="github.com",Jm.PROVIDER_ID="github.com";class Ym extends Nm{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Vm(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Vm(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vm(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:s}=t;return n&&r&&s&&n===r?new Ym(n,s):null}static _create(e,t){return new Ym(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Hm{constructor(e){fp(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Xm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Xm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ym.fromJSON(e);return fp(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Ym._create(n,t)}catch(mL){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm extends Gm{constructor(){super("twitter.com")}static credential(e,t){return jm._fromParams({providerId:Zm.PROVIDER_ID,signInMethod:Zm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zm.credentialFromTaggedObject(e)}static credentialFromError(e){return Zm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Zm.credential(t,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function eg(e,t){return Cp(e,"POST","/v1/accounts:signUp",Sp(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zm.TWITTER_SIGN_IN_METHOD="twitter.com",Zm.PROVIDER_ID="twitter.com";class tg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const s=await Yp._fromIdTokenResponse(e,n,r),i=ng(n);return new tg({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ng(n);return new tg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ng(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rg extends pd{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rg.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rg(e,t,n,r)}}function sg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw rg._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function og(e,t,n=!1){const r=await $p(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tg._forOperation(e,"link",r)}async function ag(e,t,n){await Gp(t);const r=!1===e?"provider-already-linked":"no-such-provider";fp(ig(t.providerData).has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cg(e,t,n=!1){const{auth:r}=e;if(Ff(r.app))return Promise.reject(up(r));const s="reauthenticate";try{const i=await $p(e,sg(r,s,t,e),n);fp(i.idToken,r,"internal-error");const o=Bp(i.idToken);fp(o,r,"internal-error");const{sub:a}=o;return fp(e.uid===a,r,"user-mismatch"),tg._forOperation(e,s,i)}catch(mL){throw"auth/user-not-found"===(null==mL?void 0:mL.code)&&ap(r,"user-mismatch"),mL}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lg(e,t,n=!1){if(Ff(e.app))return Promise.reject(up(e));const r="signIn",s=await sg(e,r,t),i=await tg._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ug(e,t){return lg(wm(e),t)}async function hg(e,t){const n=Ed(e);return await ag(!1,n,t.providerId),og(n,t)}async function dg(e,t){return cg(Ed(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fg{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?pg._fromServerResponse(e,t):"totpInfo"in t?mg._fromServerResponse(e,t):ap(e,"internal-error")}}class pg extends fg{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new pg(t)}}class mg extends fg{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new mg(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(e,t,n){var r;fp((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),fp(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(fp(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(fp(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(e){const t=wm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function vg(e,t){const n=Ed(e),r=await Rm(n,{oobCode:t}),s=r.requestType;switch(fp(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fp(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fp(r.mfaInfo,n,"internal-error");default:fp(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=fg._fromServerResponse(wm(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function wg(e,t,n){if(Ff(e.app))return Promise.reject(up(e));const r=wm(e),s=km(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eg),i=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&yg(e),t}),o=await tg._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(o.user),o}function bg(e,t,n){return Ff(e.app)?Promise.reject(up(e)):ug(Ed(e),zm.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&yg(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function _g(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Ed(e),s={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},i=await $p(r,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return kp(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const o=r.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}async function Ig(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await $p(e,async function(e,t){return kp(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Eg extends Tg{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Sg extends Tg{constructor(e,t){super(e,"facebook.com",t)}}class kg extends Eg{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class xg extends Tg{constructor(e,t){super(e,"google.com",t)}}class Cg extends Eg{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ag(e,t,n,r){return Ed(e).onIdTokenChanged(t,n,r)}function Dg(e,t,n){return Ed(e).beforeAuthStateChanged(t,n)}function Ng(e,t,n,r){return Ed(e).onAuthStateChanged(t,n,r)}function Rg(e){return Ed(e).signOut()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Og{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Og("enroll",e,t)}static _fromMfaPendingCredential(e){return new Og("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Og._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Og._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=wm(e),r=t.customData._serverResponse,s=(r.mfaInfo||[]).map(e=>fg._fromServerResponse(n,e));fp(r.mfaPendingCredential,n,"internal-error");const i=Og._fromMfaPendingCredential(r.mfaPendingCredential);return new Pg(i,s,async e=>{const s=await e._process(n,i);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:s.idToken,refreshToken:s.refreshToken});switch(t.operationType){case"signIn":const e=await tg._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return fp(t.user,n,"internal-error"),tg._forOperation(t.user,t.operationType,o);default:ap(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Lg{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>fg._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Lg(e)}async getSession(){return Og._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),s=await $p(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await $p(this.user,(r=this.user.auth,s={idToken:n,mfaEnrollmentId:t},kp(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Sp(r,s))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(mL){throw mL}var r,s}}const Mg=new WeakMap;const Fg="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fg,"1"),this.storage.removeItem(Fg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Ug{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);fm()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vg.type="LOCAL";const jg=Vg;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg extends Ug{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bg.type="SESSION";const qg=Bg;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $g{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new $g(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zg(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$g.receivers=[];class Hg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=zg("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kg(){return void 0!==Gg().WorkerGlobalScope&&"function"==typeof Gg().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wg="firebaseLocalStorageDb",Qg="firebaseLocalStorage",Jg="fbase_key";class Yg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xg(e,t){return e.transaction([Qg],t?"readwrite":"readonly").objectStore(Qg)}function Zg(){const e=indexedDB.open(Wg,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Qg,{keyPath:Jg})}catch(mL){n(mL)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Qg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Wg);return new Yg(e).toPromise()}(),t(await Zg()))})})}async function ey(e,t,n){const r=Xg(e,!0).put({[Jg]:t,value:n});return new Yg(r).toPromise()}function ty(e,t){const n=Xg(e,!0).delete(t);return new Yg(n).toPromise()}class ny{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Zg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(mL){if(t++>3)throw mL;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Kg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$g._getInstance(Kg()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Hg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await ey(e,Fg,"1"),await ty(e,Fg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ey(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Xg(e,!1).get(t),r=await new Yg(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Xg(e,!1).getAll();return new Yg(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ny.type="LOCAL";const ry=ny;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const sy=1e12;class iy{constructor(e){this.auth=e,this.counter=sy,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new oy(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||sy;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||sy;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||sy;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class oy{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;fp(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(mL){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(mL){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ay=Tm("rcb"),cy=new bp(3e4,6e4);class ly{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Gg().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return fp(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Op(Gg().grecaptcha)?Promise.resolve(Gg().grecaptcha):new Promise((n,r)=>{const s=Gg().setTimeout(()=>{r(cp(e,"network-request-failed"))},cy.get());Gg()[ay]=()=>{Gg().clearTimeout(s),delete Gg()[ay];const i=Gg().grecaptcha;if(!i||!Op(i))return void r(cp(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)};Im(`${_m.recaptchaV2Script}?${wd({onload:ay,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(cp(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Gg().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class uy{async load(e){return new iy(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy="recaptcha",dy={theme:"light",type:"image"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class fy{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=qm._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function py(e,t,n){var r;const s=await n.verify();try{let i;if(fp("string"==typeof s,e,"argument-error"),fp(n.type===hy,e,"argument-error"),i="string"==typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){fp("enroll"===t.type,e,"internal-error");const n=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await function(e,t){return kp(e,"POST","/v2/accounts/mfaEnrollment:start",Sp(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{fp("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;fp(n,e,"missing-multi-factor-info");const o=await function(e,t){return kp(e,"POST","/v2/accounts/mfaSignIn:start",Sp(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return kp(e,"POST","/v1/accounts:sendVerificationCode",Sp(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class my{constructor(e){this.providerId=my.PROVIDER_ID,this.auth=wm(e)}verifyPhoneNumber(e,t){return py(this.auth,e,Ed(t))}static credential(e,t){return qm._fromVerification(e,t)}static credentialFromResult(e){const t=e;return my.credentialFromTaggedObject(t)}static credentialFromError(e){return my.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?qm._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function gy(e,t){return t?Zp(t):(fp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */my.PROVIDER_ID="phone",my.PHONE_SIGN_IN_METHOD="phone";class yy extends Nm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vm(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vy(e){return lg(e.auth,new yy(e),e.bypassAuthState)}function wy(e){const{auth:t,user:n}=e;return fp(n,t,"internal-error"),cg(n,new yy(e),e.bypassAuthState)}async function by(e){const{auth:t,user:n}=e;return fp(n,t,"internal-error"),og(n,new yy(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(mL){this.reject(mL)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(mL){this.reject(mL)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vy;case"linkViaPopup":case"linkViaRedirect":return by;case"reauthViaPopup":case"reauthViaRedirect":return wy;default:ap(this.auth,"internal-error")}}resolve(e){mp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new bp(2e3,1e4);class Ty extends _y{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Ty.currentPopupAction&&Ty.currentPopupAction.cancel(),Ty.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fp(e,this.auth,"internal-error"),e}async onExecution(){mp(1===this.filter.length,"Popup operations only handle one event");const e=zg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(cp(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(cp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ty.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cp(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Iy.get())};e()}}Ty.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ey=new Map;class Sy extends _y{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ey.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ay(t),r=Cy(e);if(!(await r._isAvailable()))return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(mL){e=()=>Promise.reject(mL)}Ey.set(this.auth._key(),e)}return this.bypassAuthState||Ey.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ky(e,t){return Cy(e)._set(Ay(t),"true")}function xy(e,t){Ey.set(e._key(),t)}function Cy(e){return Zp(e._redirectPersistence)}function Ay(e){return nm("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(e,t,n=!1){if(Ff(e.app))return Promise.reject(up(e));const r=wm(e),s=gy(r,t),i=new Sy(r,s,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Ny(e){const t=zg(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Py(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Py(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(cp(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oy(e))}saveEventToCache(e){this.cachedEventUids.add(Oy(e)),this.lastProcessedEventTime=Date.now()}}function Oy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Py({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ly=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,My=/^https?/;async function Fy(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return kp(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(Uy(r))return}catch(n){}ap(e,"unauthorized-domain")}function Uy(e){const t=gp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!My.test(n))return!1;if(Ly.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new bp(3e4,6e4);function jy(){const e=Gg().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function By(e){return new Promise((t,n)=>{var r,s,i;function o(){jy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jy(),n(cp(e,"network-request-failed"))},timeout:Vy.get()})}if(null===(s=null===(r=Gg().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Gg().gapi)||void 0===i?void 0:i.load)){const t=Tm("iframefcb");return Gg()[t]=()=>{gapi.load?o():n(cp(e,"network-request-failed"))},Im(`${_m.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw qy=null,e})}let qy=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const $y=new bp(5e3,15e3),zy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gy(e){const t=e.config;fp(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_p(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:jf},s=Hy.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wd(r).slice(1)}`}async function Ky(e){const t=await function(e){return qy=qy||By(e),qy}(e),n=Gg().gapi;return fp(n,e,"internal-error"),t.open({where:document.body,url:Gy(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zy,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=cp(e,"network-request-failed"),i=Gg().setTimeout(()=>{r(s)},$y.get());function o(){Gg().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(mL){}}}function Jy(e,t,n,r=500,s=600){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},Wy),{width:r.toString(),height:s.toString(),top:i,left:o}),l=hd().toLowerCase();n&&(a=am(l)?"_blank":n),im(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=hd()){var t;return dm(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new Qy(null);const h=window.open(t||"",a,u);fp(h,e,"popup-blocked");try{h.focus()}catch(mL){}return new Qy(h)}const Yy="__/auth/handler",Xy="emulator/auth/handler",Zy=encodeURIComponent("fac");async function ev(e,t,n,r,s,i){fp(e.config.authDomain,e,"auth-domain-config-required"),fp(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:jf,eventId:s};if(t instanceof Hm){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof Gm){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?`#${Zy}=${encodeURIComponent(c)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${Yy}`;return _p(e,Xy)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${wd(a).slice(1)}${l}`}const tv="webStorageSupport";const nv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qg,this._completeRedirectFn=Dy,this._overrideRedirectResult=xy}async _openPopup(e,t,n,r){var s;mp(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Jy(e,await ev(e,t,n,gp(),r),zg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Gg().location.href=e}(await ev(e,t,n,gp(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(mp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ky(e),n=new Ry(e);return t.register("authEvent",t=>{fp(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tv,{type:tv},n=>{var r;const s=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[tv];void 0!==s&&t(!!s),ap(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pm()||om()||dm()}};class rv{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return pp("unexpected MultiFactorSessionType")}}}class sv extends rv{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new sv(e)}_finalizeEnroll(e,t,n){return function(e,t){return kp(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sp(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return kp(e,"POST","/v2/accounts/mfaSignIn:finalize",Sp(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class iv{constructor(){}static assertion(e){return sv._fromCredential(e)}}iv.FACTOR_ID="phone";class ov{static assertionForEnrollment(e,t){return av._fromSecret(e,t)}static assertionForSignIn(e,t){return av._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;fp(void 0!==(null===(t=n.user)||void 0===t?void 0:t.auth),"internal-error");const r=await(s=n.user.auth,i={idToken:n.credential,totpEnrollmentInfo:{}},kp(s,"POST","/v2/accounts/mfaEnrollment:start",Sp(s,i)));var s,i;return cv._fromStartTotpMfaEnrollmentResponse(r,n.user.auth)}}ov.FACTOR_ID="totp";class av extends rv{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new av(t,void 0,e)}static _fromEnrollmentId(e,t){return new av(t,e)}async _finalizeEnroll(e,t,n){return fp(void 0!==this.secret,e,"argument-error"),function(e,t){return kp(e,"POST","/v2/accounts/mfaEnrollment:finalize",Sp(e,t))}(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){fp(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return function(e,t){return kp(e,"POST","/v2/accounts/mfaSignIn:finalize",Sp(e,t))}(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class cv{constructor(e,t,n,r,s,i,o){this.sessionInfo=i,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new cv(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let r=!1;return(lv(e)||lv(t))&&(r=!0),r&&(lv(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),lv(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function lv(e){return void 0===e||0===(null==e?void 0:e.length)}var uv="@firebase/auth",hv="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class dv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fv=ld("authIdTokenMaxAge")||300;let pv=null;function mv(e=qf()){const t=Mf(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xm(e,{popupRedirectResolver:nv,persistence:[ry,jg,qg]}),r=ld("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>fv)return;const r=null==t?void 0:t.token;pv!==r&&(pv=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});Dg(n,t,()=>t(n.currentUser)),Ag(n,e=>t(e))}}var s;const i=ad("auth");return i&&Cm(n,`http://${i}`),n}var gv;_m={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var s,i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=cp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},gv="Browser",Lf(new Sd("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;fp(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:i,authDomain:o,clientPlatform:gv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mm(gv)},c=new vm(n,r,s,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zp);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Lf(new Sd("auth-internal",e=>{const t=wm(e.getProvider("auth").getImmediate());return new dv(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$f(uv,hv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(gv)),$f(uv,hv,"esm2017");const yv=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeOperation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},ActionCodeURL:$m,AuthCredential:Nm,AuthErrorCodes:{ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},EmailAuthCredential:Um,EmailAuthProvider:zm,FacebookAuthProvider:Wm,FactorId:{PHONE:"phone",TOTP:"totp"},GithubAuthProvider:Jm,GoogleAuthProvider:Qm,OAuthCredential:jm,OAuthProvider:Km,OperationType:{LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},PhoneAuthCredential:qm,PhoneAuthProvider:my,PhoneMultiFactorGenerator:iv,ProviderId:{FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},RecaptchaVerifier:class{constructor(e,t,n=Object.assign({},dy)){this.parameters=n,this.type=hy,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wm(e),this.isInvisible="invisible"===this.parameters.size,fp("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;fp(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uy:new ly,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(mL){return Promise.reject(mL)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fp(!this.parameters.sitekey,this.auth,"argument-error"),fp(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fp("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Gg()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){fp(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fp(yp()&&!Kg(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await kp(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);fp(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fp(this.recaptcha,this.auth,"internal-error"),this.recaptcha}},SAMLAuthProvider:Xm,SignInMethod:{EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},TotpMultiFactorGenerator:ov,TotpSecret:cv,TwitterAuthProvider:Zm,applyActionCode:async function(e,t){await async function(e,t){return kp(e,"POST","/v1/accounts:update",Sp(e,t))}(Ed(e),{oobCode:t})},beforeAuthStateChanged:Dg,browserLocalPersistence:jg,browserPopupRedirectResolver:nv,browserSessionPersistence:qg,checkActionCode:vg,confirmPasswordReset:async function(e,t,n){await Rm(Ed(e),{oobCode:t,newPassword:n}).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&yg(e),t})},connectAuthEmulator:Cm,createUserWithEmailAndPassword:wg,debugErrorMap:np,deleteUser:async function(e){return Ed(e).delete()},fetchSignInMethodsForEmail:
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){const n={identifier:t,continueUri:yp()?gp():"http://localhost"},{signinMethods:r}=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){return kp(e,"POST","/v1/accounts:createAuthUri",Sp(e,t))}(Ed(e),n);return r||[]},getAdditionalUserInfo:function(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,s=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Bp(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Tg(i,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Sg(i,s);case"github.com":return new kg(i,s);case"google.com":return new xg(i,s);case"twitter.com":return new Cg(i,s,e.screenName||null);case"custom":case"anonymous":return new Tg(i,null);default:return new Tg(i,r,s)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,getAuth:mv,getIdToken:function(e,t=!1){return Ed(e).getIdToken(t)},getIdTokenResult:Vp,getMultiFactorResolver:function(e,t){var n;const r=Ed(e),s=t;return fp(t.customData.operationType,r,"argument-error"),fp(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Pg._fromError(r,s)},getRedirectResult:async function(e,t){return await wm(e)._initializationPromise,Dy(e,t,!1)},inMemoryPersistence:tm,indexedDBLocalPersistence:ry,initializeAuth:xm,initializeRecaptchaConfig:function(e){return async function(e){const t=wm(e),n=await Mp(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Lp(n);null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")&&new Em(t).verify()}(e)},isSignInWithEmailLink:function(e,t){const n=$m.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)},linkWithCredential:hg,linkWithPhoneNumber:async function(e,t,n){const r=Ed(e);await ag(!1,r,"phone");const s=await py(r.auth,t,Ed(n));return new fy(s,e=>hg(r,e))},linkWithPopup:async function(e,t,n){const r=Ed(e);hp(r.auth,t,Hm);const s=gy(r.auth,n);return new Ty(r.auth,"linkViaPopup",t,s,r).executeNotNull()},linkWithRedirect:function(e,t,n){return async function(e,t,n){const r=Ed(e);hp(r.auth,t,Hm),await r.auth._initializationPromise;const s=gy(r.auth,n);await ag(!1,r,t.providerId),await ky(s,r.auth);const i=await Ny(r);return s._openRedirect(r.auth,t,"linkViaRedirect",i)}(e,t,n)},multiFactor:function(e){const t=Ed(e);return Mg.has(t)||Mg.set(t,Lg._fromUser(t)),Mg.get(t)},onAuthStateChanged:Ng,onIdTokenChanged:Ag,parseActionCodeURL:function(e){return $m.parseLink(e)},prodErrorMap:rp,reauthenticateWithCredential:dg,reauthenticateWithPhoneNumber:async function(e,t,n){const r=Ed(e);if(Ff(r.auth.app))return Promise.reject(up(r.auth));const s=await py(r.auth,t,Ed(n));return new fy(s,e=>dg(r,e))},reauthenticateWithPopup:async function(e,t,n){const r=Ed(e);if(Ff(r.auth.app))return Promise.reject(cp(r.auth,"operation-not-supported-in-this-environment"));hp(r.auth,t,Hm);const s=gy(r.auth,n);return new Ty(r.auth,"reauthViaPopup",t,s,r).executeNotNull()},reauthenticateWithRedirect:function(e,t,n){return async function(e,t,n){const r=Ed(e);if(hp(r.auth,t,Hm),Ff(r.auth.app))return Promise.reject(up(r.auth));await r.auth._initializationPromise;const s=gy(r.auth,n);await ky(s,r.auth);const i=await Ny(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",i)}(e,t,n)},reload:Kp,revokeAccessToken:function(e,t){return wm(e).revokeAccessToken(t)},sendEmailVerification:async function(e,t){const n=Ed(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&gg(n.auth,r,t);const{email:s}=await async function(e,t){return Lm(e,t)}(n.auth,r);s!==e.email&&await e.reload()},sendPasswordResetEmail:async function(e,t,n){const r=wm(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&gg(r,s,n),await km(r,s,"getOobCode",Mm)},sendSignInLinkToEmail:async function(e,t,n){const r=wm(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};var i,o;i=s,fp((o=n).handleCodeInApp,r,"argument-error"),o&&gg(r,i,o),await km(r,s,"getOobCode",Fm)},setPersistence:function(e,t){return Ed(e).setPersistence(t)},signInAnonymously:async function(e){var t;if(Ff(e.app))return Promise.reject(up(e));const n=wm(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new tg({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await eg(n,{returnSecureToken:!0}),s=await tg._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s},signInWithCredential:ug,signInWithCustomToken:
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){if(Ff(e.app))return Promise.reject(up(e));const n=wm(e),r=await async function(e,t){return Cp(e,"POST","/v1/accounts:signInWithCustomToken",Sp(e,t))}(n,{token:t,returnSecureToken:!0}),s=await tg._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s},signInWithEmailAndPassword:bg,signInWithEmailLink:async function(e,t,n){if(Ff(e.app))return Promise.reject(up(e));const r=Ed(e),s=zm.credentialWithLink(t,n||gp());return fp(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ug(r,s)},signInWithPhoneNumber:async function(e,t,n){if(Ff(e.app))return Promise.reject(up(e));const r=wm(e),s=await py(r,t,Ed(n));return new fy(s,e=>ug(r,e))},signInWithPopup:async function(e,t,n){if(Ff(e.app))return Promise.reject(cp(e,"operation-not-supported-in-this-environment"));const r=wm(e);hp(e,t,Hm);const s=gy(r,n);return new Ty(r,"signInViaPopup",t,s).executeNotNull()},signInWithRedirect:function(e,t,n){return async function(e,t,n){if(Ff(e.app))return Promise.reject(up(e));const r=wm(e);hp(e,t,Hm),await r._initializationPromise;const s=gy(r,n);return await ky(s,r),s._openRedirect(r,t,"signInViaRedirect")}(e,t,n)},signOut:Rg,unlink:async function(e,t){const n=Ed(e);await ag(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return kp(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=ig(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n},updateCurrentUser:function(e,t){return Ed(e).updateCurrentUser(t)},updateEmail:function(e,t){const n=Ed(e);return Ff(n.auth.app)?Promise.reject(up(n.auth)):Ig(n,t,null)},updatePassword:function(e,t){return Ig(Ed(e),null,t)},updatePhoneNumber:async function(e,t){const n=Ed(e);if(Ff(n.auth.app))return Promise.reject(up(n.auth));await og(n,t)},updateProfile:_g,useDeviceLanguage:function(e){Ed(e).useDeviceLanguage()},validatePassword:async function(e,t){return wm(e).validatePassword(t)},verifyBeforeUpdateEmail:async function(e,t,n){const r=Ed(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&gg(r.auth,s,n);const{email:i}=await async function(e,t){return Lm(e,t)}(r.auth,s);i!==e.email&&await e.reload()},verifyPasswordResetCode:async function(e,t){const{data:n}=await vg(Ed(e),t);return n.email}},Symbol.toStringTag,{value:"Module"})),vv={publicRoutes:["/","/login","/register"],authRoutes:["/login","/register"],protectedRoutes:["/calendar"],adminRoutes:["/admin","/admin/users","/admin/settings","/admin/analytics"],defaultRedirect:"/calendar",loginRedirect:"/login"};const wv=[Xh,Pc(async e=>{var t;let n,r;try{0;const i=500;[n,r]=rc(()=>new Promise(e=>setTimeout(e,i))),await n,r();let o=null;try{const e=mv();o=e.currentUser}catch(s){o=null}const{useAuthStore:a}=([n,r]=rc(()=>Ll(()=>Promise.resolve().then(()=>IR),void 0,import.meta.url)),n=await n,r(),n),c=a().user,l=o||c,u=function(){try{const e=parseInt(localStorage.getItem("lastActivity")||"0");return Date.now()-e>288e5}catch{return!0}}(),h=!!l&&!u;h&&localStorage.setItem("lastActivity",Date.now().toString());if(vv.publicRoutes.some(t=>e.path===t||e.path.startsWith(t+"/")))return;if(vv.authRoutes.includes(e.path))return h?Lc(vv.defaultRedirect):void 0;if(!h){const t=encodeURIComponent(e.fullPath);return Lc(`${vv.loginRedirect}?returnUrl=${t}`)}if(vv.adminRoutes.some(t=>e.path===t||e.path.startsWith(t+"/")))try{const e=([n,r]=rc(()=>o.getIdToken()),n=await n,r(),n).split(".");if(3!==e.length)throw new Error("Invalid token format");const s=JSON.parse(atob(e[1]));if("admin"!==(s.role||(null==(t=s.custom_claims)?void 0:t.role)||"user"))return Lc(vv.defaultRedirect)}catch(s){return Lc(vv.defaultRedirect)}}catch(s){if(!vv.publicRoutes.includes(e.path))return Lc(vv.loginRedirect)}}),Pc(async e=>{let t,n;const r=([t,n]=rc(()=>Vl({path:e.path})),t=await t,n(),t);if(r.redirect)return ya(r.redirect,{acceptRelative:!0})?(window.location.href=r.redirect,!1):r.redirect})],bv={};function _v(e,t,n){const{pathname:r,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){const t=i.includes(e.slice(o))?e.slice(o).length:1;let n=i.slice(t);return"/"!==n[0]&&(n="/"+n),_a(n,"")}const a=_a(r,e),c=!n||function(e,t){return oa(wa(e))===oa(wa(t))}(a,n)?a:n;return c+(c.includes("?")?"":s)+i}const Iv=hc({name:"nuxt:router",enforce:"pre",async setup(e){var t;let n,r,s=mc().app.baseURL;const i=(null==(t=Yh.history)?void 0:t.call(Yh,s))??Wu(s),o=Yh.routes?([n,r]=rc(()=>Yh.routes($h)),n=await n,r(),n??$h):$h;let a;const c=Mh({...Yh,scrollBehavior:(e,t,n)=>{if(t!==Ou){if(Yh.scrollBehavior){if(c.options.scrollBehavior=Yh.scrollBehavior,"scrollRestoration"in window.history){const e=c.beforeEach(()=>{e(),window.history.scrollRestoration="manual"})}return Yh.scrollBehavior(e,Ou,a||n)}}else a=n},history:i,routes:o});"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto"),e.vueApp.use(c);const l=kt(c.currentRoute.value);c.afterEach((e,t)=>{l.value=t}),Object.defineProperty(e.vueApp.config.globalProperties,"previousRoute",{get:()=>l.value});const u=_v(s,window.location,e.payload.path),h=kt(c.currentRoute.value),d=()=>{h.value=c.currentRoute.value};e.hook("page:finish",d),c.afterEach((e,t)=>{var n,r,s,i;(null==(r=null==(n=e.matched[0])?void 0:n.components)?void 0:r.default)===(null==(i=null==(s=t.matched[0])?void 0:s.components)?void 0:i.default)&&d()});const f={};for(const v in h.value)Object.defineProperty(f,v,{get:()=>h.value[v],enumerable:!0});e._route=ft(f),e._middleware||(e._middleware={global:[],named:{}});const p=Uc();c.afterEach(async(t,n,r)=>{delete e._processingMiddleware,!e.isHydrating&&p.value&&await e.runWithContext(jc),r&&await e.callHook("page:loading:end")});try{0,[n,r]=rc(()=>c.isReady()),await n,r()}catch(y){[n,r]=rc(()=>e.runWithContext(()=>Vc(y))),await n,r()}const m=u!==c.currentRoute.value.fullPath?c.resolve(u):c.currentRoute.value;d();const g=e.payload.state._layout;return c.beforeEach(async(t,n)=>{var r;await e.callHook("page:loading:start"),t.meta=dt(t.meta),e.isHydrating&&g&&!yt(t.meta.layout)&&(t.meta.layout=g),e._processingMiddleware=!0;{const i=new Set([...wv,...e._middleware.global]);for(const e of t.matched){const t=e.meta.middleware;if(t)for(const e of qh(t))i.add(e)}{const n=await e.runWithContext(()=>Vl({path:t.path}));if(n.appMiddleware)for(const e in n.appMiddleware)n.appMiddleware[e]?i.add(e):i.delete(e)}for(const o of i){const i="string"==typeof o?e._middleware.named[o]||await(null==(r=bv[o])?void 0:r.call(bv).then(e=>e.default||e)):o;if(!i)throw new Error(`Unknown route middleware: '${o}'.`);try{const r=await e.runWithContext(()=>i(t,n));if(!e.payload.serverRendered&&e.isHydrating&&(!1===r||r instanceof Error)){const t=r||qc({statusCode:404,statusMessage:`Page Not Found: ${u}`});return await e.runWithContext(()=>Vc(t)),!1}if(!0===r)continue;if(!1===r)return r;if(r)return Bc(r)&&r.fatal&&await e.runWithContext(()=>Vc(r)),r}catch(s){const t=qc(s);return t.fatal&&await e.runWithContext(()=>Vc(t)),t}}}}),c.onError(async()=>{delete e._processingMiddleware,await e.callHook("page:loading:end")}),c.afterEach(async(t,n)=>{0===t.matched.length&&await e.runWithContext(()=>Vc(qc({statusCode:404,fatal:!1,statusMessage:`Page not found: ${t.fullPath}`,data:{path:t.fullPath}})))}),e.hooks.hookOnce("app:created",async()=>{try{"name"in m&&(m.name=void 0),await c.replace({...m,force:!0}),c.options.scrollBehavior=Yh.scrollBehavior}catch(y){await e.runWithContext(()=>Vc(y))}}),{provide:{router:c}}}}),Tv=globalThis.requestIdleCallback||(e=>{const t=Date.now(),n={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))};return setTimeout(()=>{e(n)},1)}),Ev=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),Sv=e=>{const t=pc();t.isHydrating?t.hooks.hookOnce("app:suspense:resolve",()=>{Tv(()=>e())}):Tv(()=>e())},kv=hc({name:"nuxt:payload",setup(e){const t=new Set;Rc().beforeResolve(async(n,r)=>{if(n.path===r.path)return;const s=await jl(n.path);if(s){for(const n of t)delete e.static.data[n];for(const n in s.data)n in e.static.data||t.add(n),e.static.data[n]=s.data[n]}}),Sv(()=>{var t;e.hooks.hook("link:prefetch",async e=>{const{hostname:t}=new URL(e,window.location.href);t===window.location.hostname&&await jl(e).catch(()=>{})}),"slow-2g"!==(null==(t=navigator.connection)?void 0:t.effectiveType)&&setTimeout(Ul,1e3)})}}),xv=hc(()=>{const e=Rc();Sv(()=>{e.beforeResolve(async()=>{await new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})})})}),Cv=hc(e=>{let t;async function n(){const r=await Ul();t&&clearTimeout(t),t=setTimeout(n,ac);try{const t=await $fetch(qa("builds/latest.json")+`?${Date.now()}`);t.id!==r.id&&e.hooks.callHook("app:manifest:update",t)}catch{}}Sv(()=>{t=setTimeout(n,ac)})});const Av=hc({name:"nuxt:chunk-reload",setup(e){const t=Rc(),n=mc(),r=new Set;function s(e){!function(e={}){const t=e.path||window.location.pathname;let n={};try{n=Wo(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||(null==n?void 0:n.path)!==t||(null==n?void 0:n.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:t,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:pc().payload.state}))}catch{}window.location.pathname!==t?window.location.href=t:window.location.reload()}}({path:Ea(n.app.baseURL,e.fullPath),persistState:!0})}t.beforeEach(()=>{r.clear()}),e.hook("app:chunkError",({error:e})=>{r.add(e)}),e.hook("app:manifest:update",()=>{t.beforeResolve(s)}),t.onError((e,t)=>{r.has(e)&&s(t)})}});
/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Dv;const Nv=e=>Dv=e,Rv=Symbol();function Ov(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var Pv,Lv;(Lv=Pv||(Pv={})).direct="direct",Lv.patchObject="patch object",Lv.patchFunction="patch function";const Mv=()=>{};function Fv(e,t,n,r=Mv){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};var i;return!n&&ie()&&(i=s,te&&te.cleanups.push(i)),s}function Uv(e,...t){e.slice().forEach(e=>{e(...t)})}const Vv=e=>e(),jv=Symbol(),Bv=Symbol();function qv(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ov(s)&&Ov(r)&&e.hasOwnProperty(n)&&!Et(r)&&!gt(r)?e[n]=qv(s,r):e[n]=r}return e}const $v=Symbol();function zv(e){return!Ov(e)||!e.hasOwnProperty($v)}const{assign:Hv}=Object;function Gv(e){return!(!Et(e)||!e.effect)}function Kv(e,t,n,r){const{state:s,actions:i,getters:o}=t,a=n.state.value[e];let c;return c=Wv(e,function(){a||(n.state.value[e]=s?s():{});const t=function(e){const t=f(e)?new Array(e.length):{};for(const n in e)t[n]=Pt(e,n);return t}(n.state.value[e]);return Hv(t,i,Object.keys(o||{}).reduce((t,r)=>(t[r]=_t(Ai(()=>{Nv(n);const t=n._s.get(e);return o[r].call(t,t)})),t),{}))},t,n,r,!0),c}function Wv(e,t,n={},r,s,i){let o;const a=Hv({actions:{}},n),c={deep:!0};let l,u,h,d=[],f=[];const p=r.state.value[e];let m;function g(t){let n;l=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:Pv.patchFunction,storeId:e,events:h}):(qv(r.state.value[e],t),n={type:Pv.patchObject,payload:t,storeId:e,events:h});const s=m=Symbol();Yt().then(()=>{m===s&&(l=!0)}),u=!0,Uv(d,n,r.state.value[e])}i||p||(r.state.value[e]={}),St({});const y=i?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{Hv(e,t)})}:Mv;const v=(t,n="")=>{if(jv in t)return t[Bv]=n,t;const s=function(){Nv(r);const n=Array.from(arguments),i=[],o=[];let a;Uv(f,{args:n,name:s[Bv],store:b,after:function(e){i.push(e)},onError:function(e){o.push(e)}});try{a=t.apply(this&&this.$id===e?this:b,n)}catch(c){throw Uv(o,c),c}return a instanceof Promise?a.then(e=>(Uv(i,e),e)).catch(e=>(Uv(o,e),Promise.reject(e))):(Uv(i,a),a)};return s[jv]=!0,s[Bv]=n,s},w={_p:r,$id:e,$onAction:Fv.bind(null,f),$patch:g,$reset:y,$subscribe(t,n={}){const s=Fv(d,t,n.detached,()=>i()),i=o.run(()=>bs(()=>r.state.value[e],r=>{("sync"===n.flush?u:l)&&t({storeId:e,type:Pv.direct,events:h},r)},Hv({},c,n)));return s},$dispose:function(){o.stop(),d=[],f=[],r._s.delete(e)}},b=dt(w);r._s.set(e,b);const _=(r._a&&r._a.runWithContext||Vv)(()=>r._e.run(()=>(o=se()).run(()=>t({action:v}))));for(const I in _){const t=_[I];if(Et(t)&&!Gv(t)||gt(t))i||(p&&zv(t)&&(Et(t)?t.value=p[I]:qv(t,p[I])),r.state.value[e][I]=t);else if("function"==typeof t){const e=v(t,I);_[I]=e,a.actions[I]=t}}return Hv(b,_),Hv(bt(b),_),Object.defineProperty(b,"$state",{get:()=>r.state.value[e],set:e=>{g(t=>{Hv(t,e)})}}),r._p.forEach(e=>{Hv(b,o.run(()=>e({store:b,app:r._a,pinia:r,options:a})))}),p&&i&&n.hydrate&&n.hydrate(b.$state,p),l=!0,u=!0,b}
/*! #__NO_SIDE_EFFECTS__ */function Qv(e,t,n){let r,s;const i="function"==typeof t;function o(e,n){const o=Qr();(e=e||(o?Wr(Rv,null):null))&&Nv(e),(e=Dv)._s.has(r)||(i?Wv(r,t,s,e):Kv(r,s,e));return e._s.get(r)}return r=e,s=i?n:t,o.$id=r,o}async function Jv(e,t=Rc()){const{path:n,matched:r}=t.resolve(e);if(!r.length)return;if(t._routePreloaded||(t._routePreloaded=new Set),t._routePreloaded.has(n))return;const s=t._preloadPromises||(t._preloadPromises=[]);if(s.length>4)return Promise.all(s).then(()=>Jv(e,t));t._routePreloaded.add(n);const i=r.map(e=>{var t;return null==(t=e.components)?void 0:t.default}).filter(e=>"function"==typeof e);for(const o of i){const e=Promise.resolve(o()).catch(()=>{}).finally(()=>s.splice(s.indexOf(e)));s.push(e)}await Promise.all(s)}function Yv(e){function t(e){return"string"==typeof e&&e.startsWith("#")}function n(n){const r=Rc(),s=mc(),i=Ai(()=>!!n.target&&"_self"!==n.target),o=Ai(()=>{const e=n.to||n.href||"";return"string"==typeof e&&ya(e,{acceptRelative:!0})}),a=wr("RouterLink"),c="string"!=typeof a?a.useLink:void 0,l=Ai(()=>{if(n.external)return!0;const e=n.to||n.href||"";return"object"!=typeof e&&(""===e||o.value)}),u=Ai(()=>{const t=n.to||n.href||"";return l.value?t:function(t,n,r){const s=r??e.trailingSlash;if(!t||"append"!==s&&"remove"!==s)return t;if("string"==typeof t)return Zv(t,s);const i="path"in t&&void 0!==t.path?t.path:n(t).path;return{...t,name:void 0,path:Zv(i,s)}}(t,r.resolve,n.trailingSlash)}),h=l.value||null==c?void 0:c({...n,to:u}),d=Ai(()=>{var i;const a=n.trailingSlash??e.trailingSlash;if(!u.value||o.value||t(u.value))return u.value;if(l.value){const e="object"==typeof u.value&&"path"in u.value?Mc(u.value):u.value;return Zv("object"==typeof e?r.resolve(e).href:e,a)}return"object"==typeof u.value?(null==(i=r.resolve(u.value))?void 0:i.href)??null:Zv(Ea(s.app.baseURL,u.value),a)});return{to:u,hasTarget:i,isAbsoluteUrl:o,isExternal:l,href:d,isActive:(null==h?void 0:h.isActive)??Ai(()=>u.value===r.currentRoute.value.path),isExactActive:(null==h?void 0:h.isExactActive)??Ai(()=>u.value===r.currentRoute.value.path),route:(null==h?void 0:h.route)??Ai(()=>r.resolve(u.value)),async navigate(e){await Lc(d.value,{replace:n.replace,external:l.value||i.value})}}}return Fn({name:e.componentName||"NuxtLink",props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1},trailingSlash:{type:String,default:void 0,required:!1}},useLink:n,setup(r,{slots:s}){const i=Rc(),{to:o,href:a,navigate:c,isExternal:l,hasTarget:u,isAbsoluteUrl:h}=n(r),d=kt(!1),f=St(null),p=e=>{var t;f.value=r.custom?null==(t=null==e?void 0:e.$el)?void 0:t.nextElementSibling:null==e?void 0:e.$el};function m(t){var n,s;return!d.value&&("string"==typeof r.prefetchOn?r.prefetchOn===t:(null==(n=r.prefetchOn)?void 0:n[t])??(null==(s=e.prefetchOn)?void 0:s[t]))&&!1!==(r.prefetch??e.prefetch)&&!0!==r.noPrefetch&&"_blank"!==r.target&&!function(){const e=navigator.connection;if(e&&(e.saveData||ew.test(e.effectiveType)))return!0;return!1}()}async function g(e=pc()){if(d.value)return;d.value=!0;const t="string"==typeof o.value?o.value:l.value?Mc(o.value):i.resolve(o.value).fullPath,n=l.value?new URL(t,window.location.href).href:t;await Promise.all([e.hooks.callHook("link:prefetch",n).catch(()=>{}),!l.value&&!u.value&&Jv(o.value,i).catch(()=>{})])}if(m("visibility")){const e=pc();let t,n=null;lr(()=>{const r=function(){const e=pc();if(e._observer)return e._observer;let t=null;const n=new Map,r=(e,r)=>(t||(t=new IntersectionObserver(e=>{for(const t of e){const e=n.get(t.target);(t.isIntersecting||t.intersectionRatio>0)&&e&&e()}})),n.set(e,r),t.observe(e),()=>{n.delete(e),null==t||t.unobserve(e),0===n.size&&(null==t||t.disconnect(),t=null)}),s=e._observer={observe:r};return s}();Sv(()=>{t=Tv(()=>{var t;(null==(t=null==f?void 0:f.value)?void 0:t.tagName)&&(n=r.observe(f.value,async()=>{null==n||n(),n=null,await g(e)}))})})}),dr(()=>{t&&Ev(t),null==n||n(),n=null})}return()=>{var n;if(!l.value&&!u.value&&!t(o.value)){const t={ref:p,to:o.value,activeClass:r.activeClass||e.activeClass,exactActiveClass:r.exactActiveClass||e.exactActiveClass,replace:r.replace,ariaCurrentValue:r.ariaCurrentValue,custom:r.custom};return r.custom||(m("interaction")&&(t.onPointerenter=g.bind(null,void 0),t.onFocus=g.bind(null,void 0)),d.value&&(t.class=r.prefetchedClass||e.prefetchedClass),t.rel=r.rel||void 0),Di(wr("RouterLink"),t,s.default)}const y=r.target||null,v=((...e)=>e.find(e=>void 0!==e))(r.noRel?"":r.rel,e.externalRelAttribute,h.value||u.value?"noopener noreferrer":"")||null;return r.custom?s.default?s.default({href:a.value,navigate:c,prefetch:g,get route(){if(!a.value)return;const e=new URL(a.value,window.location.href);return{path:e.pathname,fullPath:e.pathname,get query(){return la(e.search)},hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:a.value}},rel:v,target:y,isExternal:l.value||u.value,isActive:!1,isExactActive:!1}):null:Di("a",{ref:f,href:a.value||null,rel:v,target:y,onClick:e=>{if(!l.value&&!u.value)return e.preventDefault(),r.replace?i.replace(a.value):i.push(a.value)}},null==(n=s.default)?void 0:n.call(s))}}})}const Xv=Yv(ic);function Zv(e,t){const n="append"===t?ba:wa;return ya(e)&&!e.startsWith("http")?e:n(e,!0)}const ew=/2g/;const tw=hc({name:"pinia",setup(e){const t=function(){const e=se(!0),t=e.run(()=>St({}));let n=[],r=[];const s=_t({install(e){Nv(s),s._a=e,e.provide(Rv,s),e.config.globalProperties.$pinia=s,r.forEach(e=>n.push(e)),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}();return e.vueApp.use(t),Nv(t),e.payload&&e.payload.pinia&&(t.state.value=e.payload.pinia),{provide:{pinia:t}}}}),nw=hc({name:"nuxt:global-components"}),rw={auth:Qn(()=>Ll(()=>Promise.resolve().then(()=>pL),void 0,import.meta.url).then(e=>e.default||e))},sw=hc({name:"nuxt:prefetch",setup(e){const t=Rc();e.hooks.hook("app:mounted",()=>{t.beforeEach(async e=>{var t;const n=null==(t=null==e?void 0:e.meta)?void 0:t.layout;n&&"function"==typeof rw[n]&&await rw[n]()})}),e.hooks.hook("link:prefetch",e=>{if(ya(e))return;const n=t.resolve(e);if(!n)return;const r=n.meta.layout;let s=qh(n.meta.middleware);s=s.filter(e=>"string"==typeof e);for(const t of s)"function"==typeof bv[t]&&bv[t]();"string"==typeof r&&r in rw&&function(e){if((null==e?void 0:e.__asyncLoader)&&!e.__asyncResolved)e.__asyncLoader()}(rw[r])})}});
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
$f("firebase","10.14.1","app");var iw,ow,aw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var a=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=i.add(r);0>=l.l(e)&&(s=s.add(n),i=l),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new m(s,t)}for(s=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(i=o(n)).j(t);h(l)||0<l.l(e);)l=(i=o(n-=r)).j(t);u(i)&&(i=c),s=s.add(i),e=f(e,l)}return new m(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],o=0;o<s;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var o=s+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var c=this.i(s)>>>16,f=65535&this.i(s),m=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,p(n,2*s+2*i),n[2*s+2*i+1]+=c*g,p(n,2*s+2*i+1),n[2*s+2*i+1]+=f*m,p(n,2*s+2*i+1),n[2*s+2*i+2]+=c*m,p(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ow=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),s=a,i=0;i<t.length;i+=8){var c=Math.min(8,t.length-i),l=parseInt(t.substring(i,i+c),n);8>c?(c=o(Math.pow(n,c)),s=s.j(c).add(o(l))):s=(s=s.j(r)).add(o(l))}return s},iw=r}).apply(void 0!==aw?aw:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var cw,lw,uw,hw,dw,fw,pw,mw,gw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof gw&&gw];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function T(e){s.setTimeout(()=>{throw e},0)}function E(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,C=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},D=()=>{const e=s.Promise.resolve(void 0);x=()=>{e.then(N)}};var N=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){T(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++U,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}B.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=$(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var z="closure_lm_"+(1e6*Math.random()|0),H={};function G(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=Z(n),e&&e[F]?e.K(t,n,!!o(r)&&!!r.capture,s):function(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,c=Y(e);if(c||(e[z]=c=new B(e)),n=c.add(t,n,r,a,i),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,s)}function K(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)K(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(i=e.g[t],n,r,s))&&(j(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,s)),(n=-1<e?t[e]:null)&&W(n))}function W(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(q(n,e),0==n.h&&(n.src=null,t[z]=null)):j(e)}}}function Q(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Y(e){return(e=e[z])instanceof B?e:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[X]||(e[X]=function(t){return e.handleEvent(t)}),e[X])}function ee(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var s=t;_(t=new O(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=ne(o,r,!0,t)&&s}if(s=ne(o=t.g=e,r,!0,t)&&s,s=ne(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=ne(o=t.g=n[i],r,!1,t)&&s}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.fa&&q(e.i,o),s=!1!==a.call(c,r)&&s}}return s&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function se(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,R),ee.prototype[F]=!0,ee.prototype.removeEventListener=function(e,t,n,r){K(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ie extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){R.call(this),this.h=e,this.g={}}h(oe,R);var ae=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),ce(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=s.JSON.stringify,ue=s.JSON.parse,he=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){O.call(this,"d")}function ye(){O.call(this,"c")}h(ge,O),h(ye,O);var ve={},we=null;function be(){return we=we||new ee}function _e(e){O.call(this,ve.La,e)}function Ie(e){const t=be();te(t,new _e(t))}function Te(e,t){O.call(this,ve.STAT_EVENT,e),this.stat=t}function Ee(e){const t=be();te(t,new Te(t,e))}function Se(e,t){O.call(this,ve.Ma,e),this.size=t}function ke(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function xe(){this.g=!0}function Ce(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return le(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",h(_e,O),ve.STAT_EVENT="statevent",h(Te,O),ve.Ma="timingevent",h(Se,O),xe.prototype.xa=function(){this.g=!1},xe.prototype.info=function(){};var Ae,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Re(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}h(Re,de),Re.prototype.g=function(){return new XMLHttpRequest},Re.prototype.i=function(){return{}},Ae=new Re;var Le={},Me={};function Fe(e,t,n){e.L=1,e.v=lt(st(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Be(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),It(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Pe,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ie(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ae[0]=s.toString()),s=ae);for(var i=0;i<s.length;i++){var o=G(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ie(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Me:(n=Number(t.substring(n,r)),isNaN(n)?Le:(r+=1)+n>t.length?Me:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ke(l(e.ba,e),t)}function $e(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function ze(e){0==e.j.G||e.J||sn(e.j,e)}function He(e){$e(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ye(n.h,e)))if(!e.K&&Ye(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Kt(n)}en(n),Ee(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=ke(l(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=l[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Xe(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=ln(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,c=r.L;c&&(a.I=c),a.B&&($e(a),Be(a)),r.g=o}else Zt(r);0<n.i.length&&Qt(n)}else"stop"!=l[0]&&"close"!=l[0]||an(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?an(n,7):Gt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Ie()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const d=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||$t(this.g)))){this.J||4!=d||7==t||Ie(),$e(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=$t(this.g);e="";var i=r.length,o=4==qt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){He(this),ze(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),He(this),ze(this);break e}Ce(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=je(this,a),e==Me){4==d&&(this.s=4,Ee(14),n=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}if(e==Le){this.s=4,Ee(15),Ce(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ce(this.i,this.l,e,null),Ge(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,Ee(11))}}else Ce(this.i,this.l,a,"[Invalid Chunked Response]"),He(this),ze(this)}else Ce(this.i,this.l,a,null),Ge(this,a);4==d&&He(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=I(e[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),He(this),ze(this)}}}catch(d){}},Oe.prototype.cancel=function(){this.J=!0,He(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ie(),Ee(17)),He(this),this.s=2,ze(this)):qe(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xe(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(i(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}We.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,it(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,it(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),ot(this,t[4]),this.l=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function st(e){return new rt(e)}function it(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(bt(this,t),It(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,gt)),e.i=new vt(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function lt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function bt(e,t){wt(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _t(e,t){return wt(e),t=Tt(e,t),e.g.has(t)}function It(e,t,n){bt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),d(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function St(){this.g=new he}function kt(e,t,n){const r=n||"";try{tt(e,function(e,n){let s=e;o(e)&&(s=le(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(mL){throw t.push(r+"type="+encodeURIComponent("_badmap")),mL}}function xt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ct(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Rt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Rt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Pt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){wt(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"==typeof e)_t(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,_t(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},h(xt,de),xt.prototype.g=function(){return new Ct(this.l,this.j)},xt.prototype.i=function(e){return function(){return e}}({}),h(Ct,ee),(e=Ct.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Nt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ct.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Pt,ee);var Lt=/^https?$/i,Mt=["POST","PUT"];function Ft(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),jt(e)}function Ut(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Vt(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(nt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Lt.test(o?o.toLowerCase():"")}n=i}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<qt(e)?e.g.statusText:""}catch(c){a=""}e.l=a+" ["+e.Z()+"]",Ut(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){Bt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{n.onreadystatechange=r}catch(mL){}}}function Bt(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function $t(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ht(e){this.Aa=0,this.i=[],this.j=new xe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zt("baseRetryDelayMs",5e3,e),this.cb=zt("retryDelaySeedMs",1e4,e),this.Wa=zt("forwardChannelMaxRetries",2,e),this.wa=zt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new We(e&&e.concurrentRequestLimit),this.Da=new St,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Gt(e){if(Wt(e),3==e.G){var t=e.U++,n=st(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),Yt(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=lt(st(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}cn(e)}function Kt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Wt(e){Kt(e),e.u&&(s.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&s.clearTimeout(e.s),e.s=null)}function Qt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;x||D(),C||(x(),C=!0),A.add(t,e),e.B=0}}function Jt(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),Yt(e,r),e.m&&e.o&&Ot(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Xt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Xe(e.h,n),Fe(n,r,t)}function Yt(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&tt({},function(e,n){ct(t,n,e)})}function Xt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=s[a].g;const c=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),o=!1;else try{kt(c,e,"req"+n+"_")}catch(i){r&&r(c)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;x||D(),C||(x(),C=!0),A.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ke(l(e.Fa,e),on(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),Yt(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=lt(st(t)),n.m=null,n.P=!0,Ue(n,e)}function rn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;te(r=be(),new Se(r,n)),Qt(e)}else Zt(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=ke(l(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||it(r,"https"),lt(r),t?function(e,t){const n=new xe;if(s.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),cn(e),Wt(e)}function cn(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function ln(e,t,n){var r=n instanceof rt?st(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new rt(null);r&&it(o,r),t&&(o.g=t),i&&ot(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),Yt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Pt(new xt({eb:n})):new Pt(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new Ht(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Pt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?fe(this.o):fe(Ae),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ft(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Mt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ft(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Pt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vt(this):this.bb())},e.bb=function(){Vt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=Ht.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ee(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=ln(this,null,this.W),Qt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=w(i),_(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Xt(this,s,t),ct(n=st(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),Yt(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Rt(i)))+"&"+t:this.m&&Ot(n,this.m,i)),Xe(this.h,s),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),s.T=!0,Fe(s,n,null)):Fe(s,n,t),this.G=2}}else 3==this.G&&(e?Jt(this,e):0==this.i.length||Qe(this.h)||Jt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ke(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Kt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Kt(this),en(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Gt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=le(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Qt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,fn.aa.N.call(this)},h(pn,ge),h(mn,ye),h(gn,hn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,mw=function(){return new dn},pw=function(){return be()},fw=ve,dw={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,hw=De,Ne.COMPLETE="complete",uw=Ne,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,lw=pe,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,cw=Pt}).apply(void 0!==gw?gw:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const yw="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vw.UNAUTHENTICATED=new vw(null),vw.GOOGLE_CREDENTIALS=new vw("google-credentials-uid"),vw.FIRST_PARTY=new vw("first-party-uid"),vw.MOCK_USER=new vw("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let ww="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new Ld("@firebase/firestore");function _w(){return bw.logLevel}function Iw(e,...t){if(bw.logLevel<=Ad.DEBUG){const n=t.map(Sw);bw.debug(`Firestore (${ww}): ${e}`,...n)}}function Tw(e,...t){if(bw.logLevel<=Ad.ERROR){const n=t.map(Sw);bw.error(`Firestore (${ww}): ${e}`,...n)}}function Ew(e,...t){if(bw.logLevel<=Ad.WARN){const n=t.map(Sw);bw.warn(`Firestore (${ww}): ${e}`,...n)}}function Sw(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(e="Unexpected state"){const t=`FIRESTORE (${ww}) INTERNAL ASSERTION FAILED: `+e;throw Tw(t),new Error(t)}function xw(e,t){e||kw()}function Cw(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Dw extends pd{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ow{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vw.UNAUTHENTICATED))}shutdown(){}}class Pw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Lw{constructor(e){this.t=e,this.currentUser=vw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xw(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Nw;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nw,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Iw("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Iw("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nw)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Iw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xw("string"==typeof t.accessToken),new Rw(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xw(null===e||"string"==typeof e),new vw(e)}}class Mw{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=vw.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fw{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Mw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(vw.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){xw(void 0===this.o);const n=e=>{null!=e.error&&Iw("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Iw("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Iw("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Iw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(xw("string"==typeof e.token),this.R=e.token,new Uw(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function jw(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=jw(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function qw(e,t){return e<t?-1:e>t?1:0}function $w(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function zw(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Dw(Aw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Dw(Aw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Dw(Aw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Dw(Aw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hw.fromMillis(Date.now())}static fromDate(e){return Hw.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Hw(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qw(this.nanoseconds,e.nanoseconds):qw(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gw(e)}static min(){return new Gw(new Hw(0,0))}static max(){return new Gw(new Hw(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,t,n){void 0===t?t=0:t>e.length&&kw(),void 0===n?n=e.length-t:n>e.length-t&&kw(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Kw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kw?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ww extends Kw{construct(e,t,n){return new Ww(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Ww(t)}static emptyPath(){return new Ww([])}}const Qw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jw extends Kw{construct(e,t,n){return new Jw(e,t,n)}static isValidIdentifier(e){return Qw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jw.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jw(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Dw(Aw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Dw(Aw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Dw(Aw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jw(t)}static emptyPath(){return new Jw([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.path=e}static fromPath(e){return new Yw(Ww.fromString(e))}static fromName(e){return new Yw(Ww.fromString(e).popFirst(5))}static empty(){return new Yw(Ww.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ww.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ww.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yw(new Ww(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Zw(e){return e.fields.find(e=>2===e.kind)}function eb(e){return e.fields.filter(e=>2!==e.kind)}function tb(e,t){let n=qw(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=rb(e.fields[r],t.fields[r]),0!==n)return n;return qw(e.fields.length,t.fields.length)}Xw.UNKNOWN_ID=-1;class nb{constructor(e,t){this.fieldPath=e,this.kind=t}}function rb(e,t){const n=Jw.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:qw(e.kind,t.kind)}class sb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sb(0,ab.min())}}function ib(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Gw.fromTimestamp(1e9===r?new Hw(n+1,0):new Hw(n,r));return new ab(s,Yw.empty(),t)}function ob(e){return new ab(e.readTime,e.key,-1)}class ab{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ab(Gw.min(),Yw.empty(),-1)}static max(){return new ab(Gw.max(),Yw.empty(),-1)}}function cb(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Yw.comparator(e.documentKey,t.documentKey),0!==n?n:qw(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}const lb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ub{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hb(e){if(e.code!==Aw.FAILED_PRECONDITION||e.message!==lb)throw e;Iw("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new db((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof db?t:db.resolve(t)}catch(t){return db.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):db.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):db.reject(t)}static resolve(e){return new db((t,n)=>{t(e)})}static reject(e){return new db((t,n)=>{n(e)})}static waitFor(e){return new db((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=db.resolve(!1);for(const n of e)t=t.next(e=>e?db.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new db((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next(e=>{i[c]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new db((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Nw,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yb(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ib(t.target.error);this.V.reject(new yb(e,n))}}static open(e,t,n,r){try{return new fb(t,e.transaction(r,n))}catch(s){throw new yb(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Iw("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wb(t)}}class pb{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===pb.S(hd())&&Tw("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Iw("SimpleDb","Removing database:",e),bb(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fd())return!1;if(pb.v())return!0;const e=hd(),t=pb.S(e),n=0<t&&t<10,r=mb(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Iw("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new yb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Dw(Aw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Dw(Aw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new yb(e,r))},r.onupgradeneeded=e=>{Iw("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next(()=>{Iw("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.M(e);const t=fb.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),db.reject(e))).toPromise();return i.catch(()=>{}),await t.m,i}catch(o){const e=o,t="FirebaseError"!==e.name&&i<3;if(Iw("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mb(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class gb{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return bb(this.B.delete())}}class yb extends Dw{constructor(e,t){super(Aw.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function vb(e){return"IndexedDbTransactionError"===e.name}class wb{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Iw("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Iw("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),bb(n)}add(e){return Iw("SimpleDb","ADD",this.store.name,e,e),bb(this.store.add(e))}get(e){return bb(this.store.get(e)).next(t=>(void 0===t&&(t=null),Iw("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Iw("SimpleDb","DELETE",this.store.name,e),bb(this.store.delete(e))}count(){return Iw("SimpleDb","COUNT",this.store.name),bb(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new db((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new db((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}j(e,t){Iw("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new db((n,r)=>{t.onerror=e=>{const t=Ib(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new db((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new gb(s),o=t(s.primaryKey,s.value,i);if(o instanceof db){const e=o.catch(e=>(i.done(),db.reject(e)));n.push(e)}i.isDone?r():null===i.K?s.continue():s.continue(i.K)}}).next(()=>db.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bb(e){return new db((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ib(e.target.error);n(t)}})}let _b=!1;function Ib(e){const t=pb.S(hd());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Dw("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _b||(_b=!0,setTimeout(()=>{throw e},0)),e}}return e}class Tb{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Iw("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Iw("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(e){vb(e)?Iw("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await hb(e)}await this.X(6e4)})}}class Eb{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let r=t,s=!0;return db.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return Iw("IndexBackfiller",`Processing collection: ${t}`),this.ne(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,n)).next(n=>(Iw("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}re(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=ob(t);cb(r,n)>0&&(n=r)}),new ab(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function kb(e){return null==e}function xb(e){return 0===e&&1/e==-1/0}function Cb(e){return"number"==typeof e&&Number.isInteger(e)&&!xb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Nb(t)),t=Db(e.get(n),t);return Nb(t)}function Db(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Nb(e){return e+""}function Rb(e){const t=e.length;if(xw(t>=2),2===t)return xw(""===e.charAt(0)&&""===e.charAt(1)),Ww.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("",i);switch((t<0||t>n)&&kw(),e.charAt(t+1)){case"":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"":s+=e.substring(i,t),s+="\0";break;case"":s+=e.substring(i,t+1);break;default:kw()}i=t+2}return new Ww(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sb.oe=-1;const Ob=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(e,t){return[e,Ab(t)]}function Lb(e,t,n){return[e,Ab(t),n]}const Mb={},Fb=["prefixPath","collectionGroup","readTime","documentId"],Ub=["prefixPath","collectionGroup","documentId"],Vb=["collectionGroup","readTime","prefixPath","documentId"],jb=["canonicalId","targetId"],Bb=["targetId","path"],qb=["path","targetId"],$b=["collectionId","parent"],zb=["indexId","uid"],Hb=["uid","sequenceNumber"],Gb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Kb=["indexId","uid","orderedDocumentKey"],Wb=["userId","collectionPath","documentId"],Qb=["userId","collectionPath","largestBatchId"],Jb=["userId","collectionGroup","largestBatchId"],Yb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Xb=[...Yb,"documentOverlays"],Zb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e_=Zb,t_=[...e_,"indexConfiguration","indexState","indexEntries"],n_=t_,r_=[...t_,"globals"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_ extends ub{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function i_(e,t){const n=Cw(e);return pb.F(n._e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function a_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function c_(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function l_(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t){this.comparator=e,this.root=t||d_.EMPTY}insert(e,t){return new u_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,d_.BLACK,null,null))}remove(e){return new u_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,d_.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new h_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new h_(this.root,e,this.comparator,!1)}getReverseIterator(){return new h_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new h_(this.root,e,this.comparator,!0)}}class h_{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class d_{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:d_.RED,this.left=null!=r?r:d_.EMPTY,this.right=null!=s?s:d_.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new d_(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return d_.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return d_.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,d_.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,d_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kw();if(this.right.isRed())throw kw();const e=this.left.check();if(e!==this.right.check())throw kw();return e+(this.isRed()?0:1)}}d_.EMPTY=null,d_.RED=!0,d_.BLACK=!1,d_.EMPTY=new class{constructor(){this.size=0}get key(){throw kw()}get value(){throw kw()}get color(){throw kw()}get left(){throw kw()}get right(){throw kw()}copy(e,t,n,r,s){return this}insert(e,t,n){return new d_(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class f_{constructor(e){this.comparator=e,this.data=new u_(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new p_(this.data.getIterator())}getIteratorFrom(e){return new p_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof f_))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new f_(this.comparator);return t.data=e,t}}class p_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function m_(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this.fields=e,e.sort(Jw.comparator)}static empty(){return new g_([])}unionWith(e){let t=new f_(Jw.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new g_(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $w(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class v_{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new y_("Invalid base64 string: "+t):t}}(e);return new v_(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new v_(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qw(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}v_.EMPTY_BYTE_STRING=new v_("");const w_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function b_(e){if(xw(!!e),"string"==typeof e){let t=0;const n=w_.exec(e);if(xw(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:__(e.seconds),nanos:__(e.nanos)}}function __(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function I_(e){return"string"==typeof e?v_.fromBase64String(e):v_.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function E_(e){const t=e.mapValue.fields.__previous_value__;return T_(t)?E_(t):t}function S_(e){const t=b_(e.mapValue.fields.__local_write_time__.timestampValue);return new Hw(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,n,r,s,i,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class x_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new x_("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof x_&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},A_={nullValue:"NULL_VALUE"};function D_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?T_(e)?4:K_(e)?9007199254740991:H_(e)?10:11:kw()}function N_(e,t){if(e===t)return!0;const n=D_(e);if(n!==D_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return S_(e).isEqual(S_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=b_(e.timestampValue),r=b_(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,I_(e.bytesValue).isEqual(I_(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return __(e.geoPointValue.latitude)===__(t.geoPointValue.latitude)&&__(e.geoPointValue.longitude)===__(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return __(e.integerValue)===__(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=__(e.doubleValue),r=__(t.doubleValue);return n===r?xb(n)===xb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $w(e.arrayValue.values||[],t.arrayValue.values||[],N_);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(o_(n)!==o_(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!N_(n[s],r[s])))return!1;return!0}(e,t);default:return kw()}var r}function R_(e,t){return void 0!==(e.values||[]).find(e=>N_(e,t))}function O_(e,t){if(e===t)return 0;const n=D_(e),r=D_(t);if(n!==r)return qw(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qw(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=__(e.integerValue||e.doubleValue),r=__(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return P_(e.timestampValue,t.timestampValue);case 4:return P_(S_(e),S_(t));case 5:return qw(e.stringValue,t.stringValue);case 6:return function(e,t){const n=I_(e),r=I_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=qw(n[s],r[s]);if(0!==e)return e}return qw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=qw(__(e.latitude),__(t.latitude));return 0!==n?n:qw(__(e.longitude),__(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return L_(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const o=e.fields||{},a=t.fields||{},c=null===(n=o.value)||void 0===n?void 0:n.arrayValue,l=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=qw((null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0,(null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:L_(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===C_.mapValue&&t===C_.mapValue)return 0;if(e===C_.mapValue)return 1;if(t===C_.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=qw(r[o],i[o]);if(0!==e)return e;const t=O_(n[r[o]],s[i[o]]);if(0!==t)return t}return qw(r.length,i.length)}(e.mapValue,t.mapValue);default:throw kw()}}function P_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return qw(e,t);const n=b_(e),r=b_(t),s=qw(n.seconds,r.seconds);return 0!==s?s:qw(n.nanos,r.nanos)}function L_(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=O_(n[s],r[s]);if(e)return e}return qw(n.length,r.length)}function M_(e){return F_(e)}function F_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=b_(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?I_(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Yw.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=F_(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${F_(e.fields[s])}`;return n+"}"}(e.mapValue):kw()}function U_(e){switch(D_(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=E_(e);return t?16+U_(t):16;case 5:return 2*e.stringValue.length;case 6:return I_(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+U_(t),0);case 10:case 11:return function(e){let t=0;return a_(e.fields,(e,n)=>{t+=e.length+U_(n)}),t}(e.mapValue);default:throw kw()}}function V_(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function j_(e){return!!e&&"integerValue"in e}function B_(e){return!!e&&"arrayValue"in e}function q_(e){return!!e&&"nullValue"in e}function $_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function z_(e){return!!e&&"mapValue"in e}function H_(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function G_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return a_(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=G_(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=G_(e.arrayValue.values[n]);return t}return Object.assign({},e)}function K_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const W_={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Q_(e){return"nullValue"in e?A_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?V_(x_.empty(),Yw.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?H_(e)?W_:{mapValue:{}}:kw()}function J_(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?V_(x_.empty(),Yw.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?W_:"mapValue"in e?H_(e)?{mapValue:{}}:C_:kw()}function Y_(e,t){const n=O_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function X_(e,t){const n=O_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.value=e}static empty(){return new Z_({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!z_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=G_(t)}setAll(e){let t=Jw.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=G_(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());z_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return N_(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];z_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){a_(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Z_(G_(this.value))}}function eI(e){const t=[];return a_(e.fields,(e,n)=>{const r=new Jw([e]);if(z_(n)){const e=eI(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new g_(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class tI{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new tI(e,0,Gw.min(),Gw.min(),Gw.min(),Z_.empty(),0)}static newFoundDocument(e,t,n,r){return new tI(e,1,t,Gw.min(),n,r,0)}static newNoDocument(e,t){return new tI(e,2,t,Gw.min(),Gw.min(),Z_.empty(),0)}static newUnknownDocument(e,t){return new tI(e,3,t,Gw.min(),Gw.min(),Z_.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gw.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Z_.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Z_.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gw.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tI&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tI(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.position=e,this.inclusive=t}}function rI(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?Yw.comparator(Yw.fromName(o.referenceValue),n.key):O_(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function sI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!N_(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t="asc"){this.field=e,this.dir=t}}function oI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{}class cI extends aI{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vI(e,t,n):"array-contains"===t?new II(e,n):"in"===t?new TI(e,n):"not-in"===t?new EI(e,n):"array-contains-any"===t?new SI(e,n):new cI(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wI(e,n):new bI(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(O_(t,this.value)):null!==t&&D_(this.value)===D_(t)&&this.matchesComparison(O_(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return kw()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lI extends aI{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new lI(e,t)}matches(e){return uI(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uI(e){return"and"===e.op}function hI(e){return"or"===e.op}function dI(e){return fI(e)&&uI(e)}function fI(e){for(const t of e.filters)if(t instanceof lI)return!1;return!0}function pI(e){if(e instanceof cI)return e.field.canonicalString()+e.op.toString()+M_(e.value);if(dI(e))return e.filters.map(e=>pI(e)).join(",");{const t=e.filters.map(e=>pI(e)).join(",");return`${e.op}(${t})`}}function mI(e,t){return e instanceof cI?(n=e,(r=t)instanceof cI&&n.op===r.op&&n.field.isEqual(r.field)&&N_(n.value,r.value)):e instanceof lI?function(e,t){return t instanceof lI&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&mI(n,t.filters[r]),!0)}(e,t):void kw();var n,r}function gI(e,t){const n=e.filters.concat(t);return lI.create(n,e.op)}function yI(e){return e instanceof cI?`${(t=e).field.canonicalString()} ${t.op} ${M_(t.value)}`:e instanceof lI?function(e){return e.op.toString()+" {"+e.getFilters().map(yI).join(" ,")+"}"}(e):"Filter";var t}class vI extends cI{constructor(e,t,n){super(e,t,n),this.key=Yw.fromName(n.referenceValue)}matches(e){const t=Yw.comparator(e.key,this.key);return this.matchesComparison(t)}}class wI extends cI{constructor(e,t){super(e,"in",t),this.keys=_I("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bI extends cI{constructor(e,t){super(e,"not-in",t),this.keys=_I("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _I(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Yw.fromName(e.referenceValue))}class II extends cI{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return B_(t)&&R_(t.arrayValue,this.value)}}class TI extends cI{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&R_(this.value.arrayValue,t)}}class EI extends cI{constructor(e,t){super(e,"not-in",t)}matches(e){if(R_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!R_(this.value.arrayValue,t)}}class SI extends cI{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!B_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>R_(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t=null,n=[],r=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.ue=null}}function xI(e,t=null,n=[],r=[],s=null,i=null,o=null){return new kI(e,t,n,r,s,i,o)}function CI(e){const t=Cw(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>pI(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),kb(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>M_(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>M_(e)).join(",")),t.ue=e}return t.ue}function AI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!oI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!mI(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sI(e.startAt,t.startAt)&&sI(e.endAt,t.endAt)}function DI(e){return Yw.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function NI(e,t){return e.filters.filter(e=>e instanceof cI&&e.field.isEqual(t))}function RI(e,t,n){let r=A_,s=!0;for(const i of NI(e,t)){let e=A_,t=!0;switch(i.op){case"<":case"<=":e=Q_(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=A_}Y_({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];Y_({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function OI(e,t,n){let r=C_,s=!0;for(const i of NI(e,t)){let e=C_,t=!0;switch(i.op){case">=":case">":e=J_(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=C_}X_({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];X_({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function LI(e,t,n,r,s,i,o,a){return new PI(e,t,n,r,s,i,o,a)}function MI(e){return new PI(e)}function FI(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function UI(e){return null!==e.collectionGroup}function VI(e){const t=Cw(e);if(null===t.ce){t.ce=[];const e=new Set;for(const r of t.explicitOrderBy)t.ce.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new f_(Jw.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new iI(r,n))}),e.has(Jw.keyField().canonicalString())||t.ce.push(new iI(Jw.keyField(),n))}return t.ce}function jI(e){const t=Cw(e);return t.le||(t.le=qI(t,VI(e))),t.le}function BI(e){const t=Cw(e);return t.he||(t.he=qI(t,e.explicitOrderBy)),t.he}function qI(e,t){if("F"===e.limitType)return xI(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new iI(e.field,t)});const n=e.endAt?new nI(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new nI(e.startAt.position,e.startAt.inclusive):null;return xI(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $I(e,t){const n=e.filters.concat([t]);return new PI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zI(e,t,n){return new PI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function HI(e,t){return AI(jI(e),jI(t))&&e.limitType===t.limitType}function GI(e){return`${CI(jI(e))}|lt:${e.limitType}`}function KI(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>yI(e)).join(", ")}]`),kb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>M_(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>M_(e)).join(",")),`Target(${t})`}(jI(e))}; limitType=${e.limitType})`}function WI(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yw.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of VI(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=rI(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,VI(n),r)||n.endAt&&!function(e,t,n){const r=rI(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,VI(n),r)));var n,r}function QI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function JI(e){return(t,n)=>{let r=!1;for(const s of VI(e)){const e=YI(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function YI(e,t,n){const r=e.field.isKeyField()?Yw.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?O_(r,s):kw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return kw()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){a_(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return l_(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new u_(Yw.comparator);function eT(){return ZI}const tT=new u_(Yw.comparator);function nT(...e){let t=tT;for(const n of e)t=t.insert(n.key,n);return t}function rT(e){let t=tT;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function sT(){return oT()}function iT(){return oT()}function oT(){return new XI(e=>e.toString(),(e,t)=>e.isEqual(t))}const aT=new u_(Yw.comparator),cT=new f_(Yw.comparator);function lT(...e){let t=cT;for(const n of e)t=t.add(n);return t}const uT=new f_(qw);function hT(){return uT}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xb(t)?"-0":t}}function fT(e){return{integerValue:""+e}}function pT(e,t){return Cb(t)?fT(t):dT(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(){this._=void 0}}function gT(e,t,n){return e instanceof wT?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&T_(t)&&(t=E_(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof bT?_T(e,t):e instanceof IT?TT(e,t):function(e,t){const n=vT(e,t),r=ST(n)+ST(e.Pe);return j_(n)&&j_(e.Pe)?fT(r):dT(e.serializer,r)}(e,t)}function yT(e,t,n){return e instanceof bT?_T(e,t):e instanceof IT?TT(e,t):n}function vT(e,t){return e instanceof ET?j_(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class wT extends mT{}class bT extends mT{constructor(e){super(),this.elements=e}}function _T(e,t){const n=kT(t);for(const r of e.elements)n.some(e=>N_(e,r))||n.push(r);return{arrayValue:{values:n}}}class IT extends mT{constructor(e){super(),this.elements=e}}function TT(e,t){let n=kT(t);for(const r of e.elements)n=n.filter(e=>!N_(e,r));return{arrayValue:{values:n}}}class ET extends mT{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ST(e){return __(e.integerValue||e.doubleValue)}function kT(e){return B_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.field=e,this.transform=t}}class CT{constructor(e,t){this.version=e,this.transformResults=t}}class AT{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new AT}static exists(e){return new AT(void 0,e)}static updateTime(e){return new AT(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function DT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class NT{}function RT(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new qT(e.key,AT.none()):new FT(e.key,e.data,AT.none());{const n=e.data,r=Z_.empty();let s=new f_(Jw.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new UT(e.key,r,new g_(s.toArray()),AT.none())}}function OT(e,t,n){var r;e instanceof FT?function(e,t,n){const r=e.value.clone(),s=jT(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof UT?function(e,t,n){if(!DT(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jT(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(VT(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function PT(e,t,n,r){return e instanceof FT?function(e,t,n,r){if(!DT(e.precondition,t))return n;const s=e.value.clone(),i=BT(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof UT?function(e,t,n,r){if(!DT(e.precondition,t))return n;const s=BT(e.fieldTransforms,r,t),i=t.data;return i.setAll(VT(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(s=t,i=n,DT(e.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):i);var s,i}function LT(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=vT(r.transform,e||null);null!=s&&(null===n&&(n=Z_.empty()),n.set(r.field,s))}return n||null}function MT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&$w(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof bT&&r instanceof bT||n instanceof IT&&r instanceof IT?$w(n.elements,r.elements,N_):n instanceof ET&&r instanceof ET?N_(n.Pe,r.Pe):n instanceof wT&&r instanceof wT);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class FT extends NT{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class UT extends NT{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VT(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function jT(e,t,n){const r=new Map;xw(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,yT(o,a,n[s]))}return r}function BT(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,gT(e,i,t))}return r}class qT extends NT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $T extends NT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&OT(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=PT(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=PT(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=iT();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=RT(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(Gw.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lT())}isEqual(e){return this.batchId===e.batchId&&$w(this.mutations,e.mutations,(e,t)=>MT(e,t))&&$w(this.baseMutations,e.baseMutations,(e,t)=>MT(e,t))}}class HT{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xw(e.mutations.length===n.length);let r=function(){return aT}();const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new HT(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QT,JT;function YT(e){switch(e){default:return kw();case Aw.CANCELLED:case Aw.UNKNOWN:case Aw.DEADLINE_EXCEEDED:case Aw.RESOURCE_EXHAUSTED:case Aw.INTERNAL:case Aw.UNAVAILABLE:case Aw.UNAUTHENTICATED:return!1;case Aw.INVALID_ARGUMENT:case Aw.NOT_FOUND:case Aw.ALREADY_EXISTS:case Aw.PERMISSION_DENIED:case Aw.FAILED_PRECONDITION:case Aw.ABORTED:case Aw.OUT_OF_RANGE:case Aw.UNIMPLEMENTED:case Aw.DATA_LOSS:return!0}}function XT(e){if(void 0===e)return Tw("GRPC error has no .code"),Aw.UNKNOWN;switch(e){case QT.OK:return Aw.OK;case QT.CANCELLED:return Aw.CANCELLED;case QT.UNKNOWN:return Aw.UNKNOWN;case QT.DEADLINE_EXCEEDED:return Aw.DEADLINE_EXCEEDED;case QT.RESOURCE_EXHAUSTED:return Aw.RESOURCE_EXHAUSTED;case QT.INTERNAL:return Aw.INTERNAL;case QT.UNAVAILABLE:return Aw.UNAVAILABLE;case QT.UNAUTHENTICATED:return Aw.UNAUTHENTICATED;case QT.INVALID_ARGUMENT:return Aw.INVALID_ARGUMENT;case QT.NOT_FOUND:return Aw.NOT_FOUND;case QT.ALREADY_EXISTS:return Aw.ALREADY_EXISTS;case QT.PERMISSION_DENIED:return Aw.PERMISSION_DENIED;case QT.FAILED_PRECONDITION:return Aw.FAILED_PRECONDITION;case QT.ABORTED:return Aw.ABORTED;case QT.OUT_OF_RANGE:return Aw.OUT_OF_RANGE;case QT.UNIMPLEMENTED:return Aw.UNIMPLEMENTED;case QT.DATA_LOSS:return Aw.DATA_LOSS;default:return kw()}}(JT=QT||(QT={}))[JT.OK=0]="OK",JT[JT.CANCELLED=1]="CANCELLED",JT[JT.UNKNOWN=2]="UNKNOWN",JT[JT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",JT[JT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",JT[JT.NOT_FOUND=5]="NOT_FOUND",JT[JT.ALREADY_EXISTS=6]="ALREADY_EXISTS",JT[JT.PERMISSION_DENIED=7]="PERMISSION_DENIED",JT[JT.UNAUTHENTICATED=16]="UNAUTHENTICATED",JT[JT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",JT[JT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",JT[JT.ABORTED=10]="ABORTED",JT[JT.OUT_OF_RANGE=11]="OUT_OF_RANGE",JT[JT.UNIMPLEMENTED=12]="UNIMPLEMENTED",JT[JT.INTERNAL=13]="INTERNAL",JT[JT.UNAVAILABLE=14]="UNAVAILABLE",JT[JT.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let ZT=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new iw([4294967295,4294967295],0);function nE(e){const t=eE().encode(e),n=new ow;return n.update(t),new Uint8Array(n.digest())}function rE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new iw([n,r],0),new iw([s,i],0)]}class sE{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new iE(`Invalid padding: ${t}`);if(n<0)throw new iE(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new iE(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new iE(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=iw.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(iw.fromNumber(n)));return 1===r.compare(tE)&&(r=new iw([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=nE(e),[n,r]=rE(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new sE(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.Ie)return;const t=nE(e),[n,r]=rE(t);for(let s=0;s<this.hashCount;s++){const e=this.Ee(n,r,s);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class iE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,aE.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new oE(Gw.min(),r,new u_(qw),eT(),lT())}}class aE{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new aE(n,t,lT(),lT(),lT())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class lE{constructor(e,t){this.targetId=e,this.me=t}}class uE{constructor(e,t,n=v_.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class hE{constructor(){this.fe=0,this.ge=pE(),this.pe=v_.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=lT(),t=lT(),n=lT();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:kw()}}),new aE(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=pE()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xw(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dE{constructor(e){this.Le=e,this.Be=new Map,this.ke=eT(),this.qe=fE(),this.Qe=new u_(qw)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:kw()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const s=r.target;if(DI(s))if(0===n){const e=new Yw(s.path);this.Ue(t,e,tI.newNoDocument(e,Gw.min()))}else xw(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),s=n?this.Xe(n,e,r):1;if(0!==s){this.je(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ZT||ZT.et(function(e,t,n,r,s){var i,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===s,hashCount:null!==(i=null==d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,s))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=I_(n).toUint8Array()}catch(a){if(a instanceof y_)return Ew("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new sE(i,r,s)}catch(a){return Ew(a instanceof iE?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Le.tt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const s=this.Je(r);if(s){if(n.current&&DI(s.target)){const t=new Yw(s.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,tI.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=lT();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new oE(e,t,this.Qe,this.ke,n);return this.ke=eT(),this.qe=fE(),this.Qe=new u_(qw),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hE,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new f_(qw),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Iw("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hE),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function fE(){return new u_(Yw.comparator)}function pE(){return new u_(Yw.comparator)}const mE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),gE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),yE=(()=>({and:"AND",or:"OR"}))();class vE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function wE(e,t){return e.useProto3Json||kb(t)?t:{value:t}}function bE(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _E(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IE(e,t){return bE(e,t.toTimestamp())}function TE(e){return xw(!!e),Gw.fromTimestamp(function(e){const t=b_(e);return new Hw(t.seconds,t.nanos)}(e))}function EE(e,t){return SE(e,t).canonicalString()}function SE(e,t){const n=(r=e,new Ww(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function kE(e){const t=Ww.fromString(e);return xw(QE(t)),t}function xE(e,t){return EE(e.databaseId,t.path)}function CE(e,t){const n=kE(t);if(n.get(1)!==e.databaseId.projectId)throw new Dw(Aw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Dw(Aw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yw(RE(n))}function AE(e,t){return EE(e.databaseId,t)}function DE(e){const t=kE(e);return 4===t.length?Ww.emptyPath():RE(t)}function NE(e){return new Ww(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RE(e){return xw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function OE(e,t,n){return{name:xE(e,t),fields:n.value.mapValue.fields}}function PE(e,t,n){const r=CE(e,t.name),s=TE(t.updateTime),i=t.createTime?TE(t.createTime):Gw.min(),o=new Z_({mapValue:{fields:t.fields}}),a=tI.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function LE(e,t){let n;if(t instanceof FT)n={update:OE(e,t.key,t.value)};else if(t instanceof qT)n={delete:xE(e,t.key)};else if(t instanceof UT)n={update:OE(e,t.key,t.data),updateMask:WE(t.fieldMask)};else{if(!(t instanceof $T))return kw();n={verify:xE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof wT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof IT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ET)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw kw()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(s=t.precondition).updateTime?{updateTime:IE(r,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:kw())),n;var r,s}function ME(e,t){const n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?AT.updateTime(TE(s.updateTime)):void 0!==s.exists?AT.exists(s.exists):AT.none():AT.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)xw("REQUEST_TIME"===t.setToServerValue),n=new wT;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new bT(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new IT(e)}else"increment"in t?n=new ET(e,t.increment):kw();const r=Jw.fromServerFormat(t.fieldPath);return new xT(r,n)}(e,t)):[];var s;if(t.update){t.update.name;const s=CE(e,t.update.name),i=new Z_({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new g_(t.map(e=>Jw.fromServerFormat(e)))}(t.updateMask);return new UT(s,i,e,n,r)}return new FT(s,i,n,r)}if(t.delete){const r=CE(e,t.delete);return new qT(r,n)}if(t.verify){const r=CE(e,t.verify);return new $T(r,n)}return kw()}function FE(e,t){return{documents:[AE(e,t.path)]}}function UE(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=AE(e,s);const i=function(e){if(0!==e.length)return KE(lI.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:HE((t=e).field),direction:qE(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wE(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:s};var c}function VE(e,t,n,r){const{_t:s,parent:i}=UE(e,t),o={},a=[];let c=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+c++;o[t]=e.alias,"count"===e.aggregateType?a.push({alias:t,count:{}}):"avg"===e.aggregateType?a.push({alias:t,avg:{field:HE(e.fieldPath)}}):"sum"===e.aggregateType&&a.push({alias:t,sum:{field:HE(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function jE(e){let t=DE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){xw(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=BE(e);return t instanceof lI&&dI(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new iI(GE((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,kb(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new nI(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new nI(n,t)}(n.endAt)),LI(t,s,o,i,a,"F",c,l)}function BE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=GE(e.unaryFilter.field);return cI.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=GE(e.unaryFilter.field);return cI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=GE(e.unaryFilter.field);return cI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=GE(e.unaryFilter.field);return cI.create(s,"!=",{nullValue:"NULL_VALUE"});default:return kw()}}(e):void 0!==e.fieldFilter?(t=e,cI.create(GE(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return kw()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return lI.create(e.compositeFilter.filters.map(e=>BE(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return kw()}}(e.compositeFilter.op))}(e):kw();var t}function qE(e){return mE[e]}function $E(e){return gE[e]}function zE(e){return yE[e]}function HE(e){return{fieldPath:e.canonicalString()}}function GE(e){return Jw.fromServerFormat(e.fieldPath)}function KE(e){return e instanceof cI?function(e){if("=="===e.op){if($_(e.value))return{unaryFilter:{field:HE(e.field),op:"IS_NAN"}};if(q_(e.value))return{unaryFilter:{field:HE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($_(e.value))return{unaryFilter:{field:HE(e.field),op:"IS_NOT_NAN"}};if(q_(e.value))return{unaryFilter:{field:HE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:HE(e.field),op:$E(e.op),value:e.value}}}(e):e instanceof lI?function(e){const t=e.getFilters().map(e=>KE(e));return 1===t.length?t[0]:{compositeFilter:{op:zE(e.op),filters:t}}}(e):kw()}function WE(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function QE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,n,r,s=Gw.min(),i=Gw.min(),o=v_.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new JE(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new JE(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new JE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new JE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.ct=e}}function XE(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ZE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:xE(s=e.ct,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:bE(s,i.version.toTimestamp()),createTime:bE(s,i.createTime.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:eS(t.version)};else{if(!t.isUnknownDocument())return kw();r.unknownDocument={path:n.path.toArray(),version:eS(t.version)}}var s,i;return r}function ZE(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function eS(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function tS(e){const t=new Hw(e.seconds,e.nanoseconds);return Gw.fromTimestamp(t)}function nS(e,t){const n=(t.baseMutations||[]).map(t=>ME(e.ct,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>ME(e.ct,t)),s=Hw.fromMillis(t.localWriteTimeMs);return new zT(t.batchId,s,n,r)}function rS(e){const t=tS(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?tS(e.lastLimboFreeSnapshotVersion):Gw.min();let r;return r=void 0!==e.query.documents?function(e){return xw(1===e.documents.length),jI(MI(DE(e.documents[0])))}(e.query):function(e){return jI(jE(e))}(e.query),new JE(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,v_.fromBase64String(e.resumeToken))}function sS(e,t){const n=eS(t.snapshotVersion),r=eS(t.lastLimboFreeSnapshotVersion);let s;s=DI(t.target)?FE(e.ct,t.target):UE(e.ct,t.target)._t;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:CI(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function iS(e){const t=jE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zI(t,t.limit,"L"):t}function oS(e,t){return new GT(t.largestBatchId,ME(e.ct,t.overlayMutation))}function aS(e,t){const n=t.path.lastSegment();return[e,Ab(t.path.popLast()),n]}function cS(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:eS(r.readTime),documentKey:Ab(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{getBundleMetadata(e,t){return uS(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:tS(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return uS(e).put({bundleId:(n=t).id,createTime:eS(TE(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return hS(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:iS(t.bundledQuery),readTime:tS(t.readTime)};var t})}saveNamedQuery(e,t){return hS(e).put({name:(n=t).name,readTime:eS(TE(n.readTime)),bundledQuery:n.bundledQuery});var n}}function uS(e){return i_(e,"bundles")}function hS(e){return i_(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new dS(e,n)}getOverlay(e,t){return fS(e).get(aS(this.userId,t)).next(e=>e?oS(this.serializer,e):null)}getOverlays(e,t){const n=sT();return db.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new GT(t,s);r.push(this.ht(e,i))}),db.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Ab(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(fS(e).j("collectionPathOverlayIndex",r))}),db.waitFor(s)}getOverlaysForCollection(e,t,n){const r=sT(),s=Ab(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return fS(e).U("collectionPathOverlayIndex",i).next(e=>{for(const t of e){const e=oS(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=sT();let i;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fS(e).J({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=oS(this.serializer,t);s.size()<r||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(()=>s)}ht(e,t){return fS(e).put(function(e,t,n){const[r,s,i]=aS(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:LE(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function fS(e){return i_(e,"documentOverlays")}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{Pt(e){return i_(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?v_.fromUint8Array(t):v_.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(__(e.integerValue));else if("doubleValue"in e){const n=__(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),xb(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=b_(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(I_(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?K_(e)?this.dt(t,Number.MAX_SAFE_INTEGER):H_(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):kw()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const s=e.fields||{};this.dt(t,53);const i="value",o=(null===(r=null===(n=s[i].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(__(o)),this.Vt(i,t),this.Tt(s[i],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Yw.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function gS(e){if(0===e)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function yS(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=gS(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}mS.vt=new mS;class vS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Bt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ot(e);else if(e<2048)this.Ot(960|e>>>6),this.Ot(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e);else{const e=t.codePointAt(0);this.Ot(240|e>>>18),this.Ot(128|63&e>>>12),this.Ot(128|63&e>>>6),this.Ot(128|63&e)}}this.Nt()}kt(e){const t=this.qt(e),n=yS(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),n=yS(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class wS{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class bS{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class _S{constructor(){this.jt=new vS,this.Ht=new wS(this.jt),this.Jt=new bS(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new IS(this.indexId,this.documentKey,this.arrayValue,n)}}function TS(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=ES(e.arrayValue,t.arrayValue),0!==n?n:(n=ES(e.directionalValue,t.directionalValue),0!==n?n:Yw.comparator(e.documentKey,t.documentKey)))}function ES(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.Xt=new f_((e,t)=>Jw.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=this.Xt.add(e):this.tn.push(e)}}get nn(){return this.Xt.size>1}rn(e){if(xw(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Zw(e);if(void 0!==t&&!this.sn(t))return!1;const n=eb(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.sn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const e=this.Xt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.on(e,t)||!this._n(this.en[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.en.length||!this._n(this.en[i++],e))return!1}return!0}an(){if(this.nn)return null;let e=new f_(Jw.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new nb(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new nb(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new nb(n.field,"asc"===n.dir?0:1)));return new Xw(Xw.UNKNOWN_ID,this.collectionId,t,sb.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(e){var t,n;if(xw(e instanceof cI||e instanceof lI),e instanceof cI){if(e instanceof TI){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>cI.create(e.field,"==",t)))||[];return lI.create(r,"or")}return e}const r=e.filters.map(e=>kS(e));return lI.create(r,e.op)}function xS(e){if(0===e.getFilters().length)return[];const t=NS(kS(e));return xw(DS(t)),CS(t)||AS(t)?[t]:t.getFilters()}function CS(e){return e instanceof cI}function AS(e){return e instanceof lI&&dI(e)}function DS(e){return CS(e)||AS(e)||function(e){if(e instanceof lI&&hI(e)){for(const t of e.getFilters())if(!CS(t)&&!AS(t))return!1;return!0}return!1}(e)}function NS(e){if(xw(e instanceof cI||e instanceof lI),e instanceof cI)return e;if(1===e.filters.length)return NS(e.filters[0]);const t=e.filters.map(e=>NS(e));let n=lI.create(t,e.op);return n=PS(n),DS(n)?n:(xw(n instanceof lI),xw(uI(n)),xw(n.filters.length>1),n.filters.reduce((e,t)=>RS(e,t)))}function RS(e,t){let n;return xw(e instanceof cI||e instanceof lI),xw(t instanceof cI||t instanceof lI),n=e instanceof cI?t instanceof cI?(r=e,s=t,lI.create([r,s],"and")):OS(e,t):t instanceof cI?OS(t,e):function(e,t){if(xw(e.filters.length>0&&t.filters.length>0),uI(e)&&uI(t))return gI(e,t.getFilters());const n=hI(e)?e:t,r=hI(e)?t:e,s=n.filters.map(e=>RS(e,r));return lI.create(s,"or")}(e,t),PS(n);var r,s}function OS(e,t){if(uI(t))return gI(t,e.getFilters());{const n=t.filters.map(t=>RS(e,t));return lI.create(n,"or")}}function PS(e){if(xw(e instanceof cI||e instanceof lI),e instanceof cI)return e;const t=e.getFilters();if(1===t.length)return PS(t[0]);if(fI(e))return e;const n=t.map(e=>PS(e)),r=[];return n.forEach(t=>{t instanceof cI?r.push(t):t instanceof lI&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:lI.create(r,e.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class LS{constructor(){this.un=new MS}addToCollectionParentIndex(e,t){return this.un.add(t),db.resolve()}getCollectionParents(e,t){return db.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return db.resolve()}deleteFieldIndex(e,t){return db.resolve()}deleteAllFieldIndexes(e){return db.resolve()}createTargetIndexes(e,t){return db.resolve()}getDocumentsMatchingTarget(e,t){return db.resolve(null)}getIndexType(e,t){return db.resolve(0)}getFieldIndexes(e,t){return db.resolve([])}getNextCollectionGroupToUpdate(e){return db.resolve(null)}getMinOffset(e,t){return db.resolve(ab.min())}getMinOffsetFromCollectionGroup(e,t){return db.resolve(ab.min())}updateCollectionGroup(e,t,n){return db.resolve()}updateIndexEntries(e,t){return db.resolve()}}class MS{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new f_(Ww.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new f_(Ww.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new Uint8Array(0);class US{constructor(e,t){this.databaseId=t,this.cn=new MS,this.ln=new XI(e=>CI(e),(e,t)=>AI(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:n,parent:Ab(r)};return VS(e).put(s)}return db.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[zw(t),""],!1,!0);return VS(e).U(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Rb(r.parent))}return n})}addFieldIndex(e,t){const n=BS(e),r={indexId:(s=t).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};var s;delete r.indexId;const i=n.add(r);if(t.indexState){const n=qS(e);return i.next(e=>{n.put(cS(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=BS(e),r=qS(e),s=jS(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=BS(e),n=jS(e),r=qS(e);return t.j().next(()=>n.j()).next(()=>r.j())}createTargetIndexes(e,t){return db.forEach(this.hn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new SS(t).an();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=jS(e);let r=!0;const s=new Map;return db.forEach(this.hn(t),t=>this.Pn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=lT();const r=[];return db.forEach(s,(s,i)=>{var o;Iw("IndexedDbIndexManager",`Using index ${o=s,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${CI(t)}`);const a=function(e,t){const n=Zw(t);if(void 0===n)return null;for(const r of NI(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),c=function(e,t){const n=new Map;for(const r of eb(t))for(const t of NI(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of eb(t)){const t=0===s.kind?RI(e,s.fieldPath,e.startAt):OI(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new nI(n,r)}(i,s),u=function(e,t){const n=[];let r=!0;for(const s of eb(t)){const t=0===s.kind?OI(e,s.fieldPath,e.endAt):RI(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new nI(n,r)}(i,s),h=this.In(s,i,l),d=this.In(s,i,u),f=this.Tn(s,i,c),p=this.En(s.indexId,a,h,l.inclusive,d,u.inclusive,f);return db.forEach(p,s=>n.G(s,t.limit).next(t=>{t.forEach(t=>{const n=Yw.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return db.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:xS(lI.create(e.filters,"and")).map(t=>xI(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,r,s,i,o){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/c]):FS,h=this.An(e,a,n[u%c],r),d=this.Rn(e,a,s[u%c],i),f=o.map(t=>this.An(e,a,t,!0));l.push(...this.createRange(h,d,f))}return l}An(e,t,n,r){const s=new IS(e,Yw.empty(),t,n);return r?s:s.Zt()}Rn(e,t,n,r){const s=new IS(e,Yw.empty(),t,n);return r?s.Zt():s}Pn(e,t){const n=new SS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.rn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.hn(t);return db.forEach(r,t=>this.Pn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new f_(Jw.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>null!==t.limit&&r.length>1&&2===n?1:n)}Vn(e,t){const n=new _S;for(const r of eb(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Yt(r.kind);mS.vt.It(e,s)}return n.zt()}dn(e){const t=new _S;return mS.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new _S;return mS.vt.It(V_(this.databaseId,t),n.Yt(function(e){const t=eb(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(null===n)return[];let r=[];r.push(new _S);let s=0;for(const i of eb(e)){const e=n[s++];for(const n of r)if(this.fn(t,i.fieldPath)&&B_(e))r=this.gn(r,i,e);else{const t=n.Yt(i.kind);mS.vt.It(e,t)}}return this.pn(r)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new _S;n.seed(e.zt()),mS.vt.It(i,n.Yt(t.kind)),s.push(n)}return s}fn(e,t){return!!e.filters.find(e=>e instanceof cI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=BS(e),r=qS(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(e=>{const t=[];return db.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new sb(t.sequenceNumber,new ab(tS(t.readTime),new Yw(Rb(t.documentKey)),t.largestBatchId)):sb.empty(),r=e.fields.map(([e,t])=>new nb(Jw.fromServerFormat(e),t));return new Xw(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:qw(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=BS(e),s=qS(e);return this.yn(e).next(e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>db.forEach(t,t=>s.put(cS(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return db.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?db.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),db.forEach(s,n=>this.wn(e,t,n).next(t=>{const s=this.Sn(r,n);return t.isEqual(s)?db.resolve():this.bn(e,r,n,t,s)}))))})}Dn(e,t,n,r){return jS(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,r){return jS(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const r=jS(e);let s=new f_(TS);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(e,r)=>{s=s.add(new IS(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>s)}Sn(e,t){let n=new f_(TS);const r=this.Vn(t,e);if(null==r)return n;const s=Zw(t);if(null!=s){const i=e.data.field(s.fieldPath);if(B_(i))for(const s of i.arrayValue.values||[])n=n.add(new IS(t.indexId,e.key,this.dn(s),r))}else n=n.add(new IS(t.indexId,e.key,FS,r));return n}bn(e,t,n,r,s){Iw("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),o=t.getIterator();let a=m_(i),c=m_(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=m_(o)):t?(s(a),a=m_(i)):(a=m_(i),c=m_(o))}}(r,s,TS,r=>{i.push(this.Dn(e,t,n,r))},r=>{i.push(this.vn(e,t,n,r))}),db.waitFor(i)}yn(e){let t=1;return qS(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>TS(e,t)).filter((e,t,n)=>!t||0!==TS(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=TS(i,e),s=TS(i,t);if(0===n)r[0]=e.Zt();else if(n>0&&s<0)r.push(i),r.push(i.Zt());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Cn(r[i],r[i+1]))return[];const e=[r[i].indexId,this.uid,r[i].arrayValue,r[i].directionalValue,FS,[]],t=[r[i+1].indexId,this.uid,r[i+1].arrayValue,r[i+1].directionalValue,FS,[]];s.push(IDBKeyRange.bound(e,t))}return s}Cn(e,t){return TS(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($S)}getMinOffset(e,t){return db.mapArray(this.hn(t),t=>this.Pn(e,t).next(e=>e||kw())).next($S)}}function VS(e){return i_(e,"collectionParents")}function jS(e){return i_(e,"indexEntries")}function BS(e){return i_(e,"indexConfiguration")}function qS(e){return i_(e,"indexState")}function $S(e){xw(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;cb(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new ab(t.readTime,t.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class HS{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new HS(e,HS.DEFAULT_COLLECTION_PERCENTILE,HS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(e,t,n){const r=e.store("mutations"),s=e.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(e,t,n)=>(a++,n.delete()));i.push(c.next(()=>{xw(1===a)}));const l=[];for(const u of n.mutations){const e=Lb(t,u.key.path,n.batchId);i.push(s.delete(e)),l.push(u.key)}return db.waitFor(i).next(()=>l)}function KS(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw kw();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */HS.DEFAULT_COLLECTION_PERCENTILE=10,HS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,HS.DEFAULT=new HS(41943040,HS.DEFAULT_COLLECTION_PERCENTILE,HS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),HS.DISABLED=new HS(-1,0,0);class WS{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Fn={}}static lt(e,t,n,r){xw(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new WS(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return JS(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=YS(e),i=JS(e);return i.add({}).next(o=>{xw("number"==typeof o);const a=new zT(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>LE(e.ct,t)),s=n.mutations.map(t=>LE(e.ct,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,a),l=[];let u=new f_((e,t)=>qw(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Lb(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(i.put(c)),l.push(s.put(t,Mb))}return u.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Fn[o]=a.keys()}),db.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return JS(e).get(t).next(e=>e?(xw(e.userId===this.userId),nS(this.serializer,e)):null)}Mn(e,t){return this.Fn[t]?db.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Fn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return JS(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(xw(t.batchId>=n),s=nS(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return JS(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return JS(e).U("userMutationsIndex",t).next(e=>e.map(e=>nS(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Pb(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return YS(e).J({range:r},(n,r,i)=>{const[o,a,c]=n,l=Rb(a);if(o===this.userId&&t.path.isEqual(l))return JS(e).get(c).next(e=>{if(!e)throw kw();xw(e.userId===this.userId),s.push(nS(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new f_(qw);const r=[];return t.forEach(t=>{const s=Pb(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=YS(e).J({range:i},(e,r,s)=>{const[i,o,a]=e,c=Rb(o);i===this.userId&&t.path.isEqual(c)?n=n.add(a):s.done()});r.push(o)}),db.waitFor(r).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Pb(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new f_(qw);return YS(e).J({range:i},(e,t,s)=>{const[i,a,c]=e,l=Rb(a);i===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):s.done()}).next(()=>this.xn(e,o))}xn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(JS(e).get(t).next(e=>{if(null===e)throw kw();xw(e.userId===this.userId),n.push(nS(this.serializer,e))}))}),db.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return GS(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),db.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return db.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return YS(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Rb(e[1]);r.push(t)}else n.done()}).next(()=>{xw(0===r.length)})})}containsKey(e,t){return QS(e,this.userId,t)}Nn(e){return XS(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QS(e,t,n){const r=Pb(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return YS(e).J({range:i,H:!0},(e,n,r)=>{const[i,a,c]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function JS(e){return i_(e,"mutations")}function YS(e){return i_(e,"documentMutations")}function XS(e){return i_(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ZS(0)}static kn(){return new ZS(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new ZS(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(e=>Gw.fromTimestamp(new Hw(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tk(e).delete(t.targetId)).next(()=>this.qn(e)).next(t=>(xw(t.targetCount>0),t.targetCount-=1,this.Qn(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return tk(e).J((i,o)=>{const a=rS(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>db.waitFor(s)).next(()=>r)}forEachTarget(e,t){return tk(e).J((e,n)=>{const r=rS(n);t(r)})}qn(e){return nk(e).get("targetGlobalKey").next(e=>(xw(null!==e),e))}Qn(e,t){return nk(e).put("targetGlobalKey",t)}Kn(e,t){return tk(e).put(sS(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=CI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return tk(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const i=rS(n);AI(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=rk(e);return t.forEach(t=>{const i=Ab(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),db.waitFor(r)}removeMatchingKeys(e,t,n){const r=rk(e);return db.forEach(t,t=>{const s=Ab(t.path);return db.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=rk(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rk(e);let s=lT();return r.J({range:n,H:!0},(e,t,n)=>{const r=Rb(e[1]),i=new Yw(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=Ab(t.path),r=IDBKeyRange.bound([n],[zw(n)],!1,!0);let s=0;return rk(e).J({index:"documentTargetsIndex",H:!0,range:r},([e,t],n,r)=>{0!==e&&(s++,r.done())}).next(()=>s>0)}ot(e,t){return tk(e).get(t).next(e=>e?rS(e):null)}}function tk(e){return i_(e,"targets")}function nk(e){return i_(e,"targetGlobal")}function rk(e){return i_(e,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk([e,t],[n,r]){const s=qw(e,n);return 0===s?qw(t,r):s}class ik{constructor(e){this.Un=e,this.buffer=new f_(sk),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();sk(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ok{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){Iw("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vb(e)?Iw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await hb(e)}await this.Hn(3e5)})}}class ak{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return db.resolve(Sb.oe);const n=new ik(t);return this.Jn.forEachTarget(e,e=>n.zn(e.sequenceNumber)).next(()=>this.Jn.Zn(e,e=>n.zn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Iw("LruGarbageCollector","Garbage collection skipped; disabled"),db.resolve(zS)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Iw("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zS):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,r,s,i,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Iw("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),_w()<=Ad.DEBUG&&Iw("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${r} in `+(o-i)+`ms\n\tRemoved ${s} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(c-a)+`ms\nTotal Duration: ${c-l}ms`),db.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ck(e,t){return new ak(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t){this.db=e,this.garbageCollector=ck(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(e,n)=>t(n))}addReference(e,t,n){return uk(e,n)}removeReference(e,t,n){return uk(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return uk(e,t)}nr(e,t){return function(e,t){let n=!1;return XS(e).Y(r=>QS(e,r,t).next(e=>(e&&(n=!0),db.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.tr(e,(i,o)=>{if(o<=t){const t=this.nr(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,Gw.min()),rk(e).delete([0,Ab(i.path)])))});r.push(t)}}).next(()=>db.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return uk(e,t)}tr(e,t){const n=rk(e);let r,s=Sb.oe;return n.J({index:"documentTargetsIndex"},([e,n],{path:i,sequenceNumber:o})=>{0===e?(s!==Sb.oe&&t(new Yw(Rb(r)),s),s=o,r=i):s=Sb.oe}).next(()=>{s!==Sb.oe&&t(new Yw(Rb(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uk(e,t){return rk(e).put((n=t,r=e.currentSequenceNumber,{targetId:0,path:Ab(n.path),sequenceNumber:r}));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.changes=new XI(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tI.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?db.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return gk(e).put(n)}removeEntry(e,t,n){return gk(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ZE(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=tI.newInvalidDocument(t);return gk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yk(t))},(e,r)=>{n=this.ir(t,r)}).next(()=>n)}sr(e,t){let n={size:0,document:tI.newInvalidDocument(t)};return gk(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yk(t))},(e,r)=>{n={document:this.ir(t,r),size:KS(r)}}).next(()=>n)}getEntries(e,t){let n=eT();return this._r(e,t,(e,t)=>{const r=this.ir(e,t);n=n.insert(e,r)}).next(()=>n)}ar(e,t){let n=eT(),r=new u_(Yw.comparator);return this._r(e,t,(e,t)=>{const s=this.ir(e,t);n=n.insert(e,s),r=r.insert(e,KS(t))}).next(()=>({documents:n,ur:r}))}_r(e,t,n){if(t.isEmpty())return db.resolve();let r=new f_(wk);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(yk(r.first()),yk(r.last())),i=r.getIterator();let o=i.getNext();return gk(e).J({index:"documentKeyIndex",range:s},(e,t,r)=>{const s=Yw.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&wk(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.$(yk(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,o=[i.popLast().toArray(),i.lastSegment(),ZE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return gk(e).U(IDBKeyRange.bound(o,a,!0)).next(e=>{null==s||s.incrementDocumentReadCount(e.length);let n=eT();for(const s of e){const e=this.ir(Yw.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(WI(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=eT();const i=vk(t,n),o=vk(t,ab.max());return gk(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(i,o,!0)},(e,t,n)=>{const i=this.ir(Yw.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new pk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return mk(e).get("remoteDocumentGlobalKey").next(e=>(xw(!!e),e))}rr(e,t){return mk(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const e=function(e,t){let n;if(t.document)n=PE(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Yw.fromSegments(t.noDocument.path),r=tS(t.noDocument.readTime);n=tI.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return kw();{const e=Yw.fromSegments(t.unknownDocument.path),r=tS(t.unknownDocument.version);n=tI.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Hw(e[0],e[1]);return Gw.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Gw.min()))return e}return tI.newInvalidDocument(e)}}function fk(e){return new dk(e)}class pk extends hk{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new XI(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new f_((e,t)=>qw(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=XE(this.cr.serializer,i);r=r.add(s.path.popLast());const c=KS(a);n+=c-o.size,t.push(this.cr.addEntry(e,s,a))}else if(n-=o.size,this.trackRemovals){const n=XE(this.cr.serializer,i.convertToNoDocument(Gw.min()));t.push(this.cr.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.cr.updateMetadata(e,n)),db.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(e=>(this.lr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:e,ur:t})=>(t.forEach((t,n)=>{this.lr.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function mk(e){return i_(e,"remoteDocumentGlobal")}function gk(e){return i_(e,"remoteDocumentsV14")}function yk(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function vk(e,t){const n=t.documentKey.path.toArray();return[e,ZE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wk(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=qw(n[i],r[i]),s)return s;return s=qw(n.length,r.length),s||(s=qw(n[n.length-2],r[r.length-2]),s||qw(n[n.length-1],r[r.length-1])
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class bk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&PT(n.mutation,e,g_.empty(),Hw.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,lT()).next(()=>t))}getLocalViewOfDocuments(e,t,n=lT()){const r=sT();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=nT();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=sT();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,lT()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=eT();const i=oT(),o=oT();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof UT)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),PT(o.mutation,t,o.mutation.getFieldMask(),Hw.now())):i.set(t.key,g_.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new bk(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=oT();let r=new u_((e,t)=>e-t),s=lT();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||g_.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||lT()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=iT();c.forEach(e=>{if(!s.has(e)){const r=RT(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return db.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return s=t,Yw.isDocumentKey(s.path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):UI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var s}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):db.resolve(sT());let o=-1,a=s;return i.next(t=>db.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?db.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,lT())).next(e=>({batchId:o,changes:rT(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yw(t)).next(e=>{let t=nT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=nT();return this.indexManager.getCollectionParents(e,s).next(o=>db.forEach(o,o=>{const a=(c=t,l=o.child(s),new PI(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,tI.newInvalidDocument(r)))});let n=nT();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&PT(i.mutation,r,g_.empty(),Hw.now()),WI(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return db.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(n=t).id,version:n.version,createTime:TE(n.createTime)}),db.resolve();var n}getNamedQuery(e,t){return db.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(n=t).name,query:iS(n.bundledQuery),readTime:TE(n.readTime)}),db.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.overlays=new u_(Yw.comparator),this.Ir=new Map}getOverlay(e,t){return db.resolve(this.overlays.get(t))}getOverlays(e,t){const n=sT();return db.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),db.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),db.resolve()}getOverlaysForCollection(e,t,n){const r=sT(),s=t.length+1,i=new Yw(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return db.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new u_((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=sT(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=sT(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return db.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new GT(t,n));let s=this.Ir.get(t);void 0===s&&(s=lT(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.sessionToken=v_.EMPTY_BYTE_STRING}getSessionToken(e){return db.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,db.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.Tr=new f_(kk.Er),this.dr=new f_(kk.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new kk(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new kk(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Yw(new Ww([])),n=new kk(t,e),r=new kk(t,e+1),s=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),s.push(e.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Yw(new Ww([])),n=new kk(t,e),r=new kk(t,e+1);let s=lT();return this.dr.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new kk(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kk{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Yw.comparator(e.key,t.key)||qw(e.wr,t.wr)}static Ar(e,t){return qw(e.wr,t.wr)||Yw.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new f_(kk.Er)}checkEmpty(e){return db.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new zT(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.br=this.br.add(new kk(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return db.resolve(i)}lookupMutationBatch(e,t){return db.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),s=r<0?0:r;return db.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return db.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return db.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kk(t,0),r=new kk(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);s.push(t)}),db.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new f_(qw);return t.forEach(e=>{const t=new kk(e,0),r=new kk(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),db.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Yw.isDocumentKey(s)||(s=s.child(""));const i=new kk(new Yw(s),0);let o=new f_(qw);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},i),db.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){xw(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return db.forEach(t.mutations,r=>{const s=new kk(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new kk(t,0),r=this.br.firstAfterOrEqual(n);return db.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,db.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.Mr=e,this.docs=new u_(Yw.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return db.resolve(n?n.document.mutableCopy():tI.newInvalidDocument(t))}getEntries(e,t){let n=eT();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():tI.newInvalidDocument(e))}),db.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=eT();const i=t.path,o=new Yw(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||cb(ob(o),n)<=0||(r.has(o.key)||WI(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return db.resolve(s)}getAllFromCollectionGroup(e,t,n,r){kw()}Or(e,t){return db.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ak(this)}getSize(e){return db.resolve(this.size)}}class Ak extends hk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),db.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.persistence=e,this.Nr=new XI(e=>CI(e),AI),this.lastRemoteSnapshotVersion=Gw.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sk,this.targetCount=0,this.kr=ZS.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),db.resolve()}getLastRemoteSnapshotVersion(e){return db.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return db.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),db.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),db.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new ZS(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,db.resolve()}updateTargetData(e,t){return this.Kn(t),db.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,db.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Nr.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),db.waitFor(s).next(()=>r)}getTargetCount(e){return db.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return db.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),db.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),db.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),db.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return db.resolve(n)}containsKey(e,t){return db.resolve(this.Br.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Sb(0),this.Kr=!1,this.Kr=!0,this.$r=new Ek,this.referenceDelegate=e(this),this.Ur=new Dk(this),this.indexManager=new LS,this.remoteDocumentCache=new Ck(e=>this.referenceDelegate.Wr(e)),this.serializer=new YE(t),this.Gr=new Ik(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new xk(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Iw("MemoryPersistence","Starting transaction:",e);const r=new Rk(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return db.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class Rk extends ub{constructor(e){super(),this.currentSequenceNumber=e}}class Ok{constructor(e){this.persistence=e,this.Jr=new Sk,this.Yr=null}static Zr(e){return new Ok(e)}get Xr(){if(this.Yr)return this.Yr;throw kw()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),db.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),db.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),db.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return db.forEach(this.Xr,n=>{const r=Yw.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Gw.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return db.or([()=>db.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Pk{constructor(e,t){this.persistence=e,this.ti=new XI(e=>Ab(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ck(this,t)}static Zr(e,t){return new Pk(e,t)}zr(){}jr(e){return db.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Yn(e){const t=this.er(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}er(e){let t=0;return this.Zn(e,e=>{t++}).next(()=>t)}Zn(e,t){return db.forEach(this.ti,(n,r)=>this.nr(e,n,r).next(e=>e?db.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Or(e,r=>this.nr(e,r,t).next(e=>{e||(n++,s.removeEntry(r,Gw.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ti.set(t,e.currentSequenceNumber),db.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),db.resolve()}removeReference(e,t,n){return this.ti.set(n,e.currentSequenceNumber),db.resolve()}updateLimboDocument(e,t){return this.ti.set(t,e.currentSequenceNumber),db.resolve()}Wr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=U_(e.data.value)),t}nr(e,t,n){return db.or([()=>this.persistence.Hr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ti.get(t);return db.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.serializer=e}O(e,t,n,r){const s=new fb("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore("owner"),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ob,{unique:!0}),e.createObjectStore("documentMutations")}(e),Mk(e),function(e){e.createObjectStore("remoteDocuments")}(e));let i=db.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Mk(e)),i=i.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gw.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store("mutations").U().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ob,{unique:!0});const r=t.store("mutations"),s=n.map(e=>r.put(e));return db.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.ni(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&r>=7&&(i=i.next(()=>this.ii(s))),n<8&&r>=8&&(i=i.next(()=>this.si(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.oi(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Wb});t.createIndex("collectionPathOverlayIndex",Qb,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Jb,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Fb});t.createIndex("documentKeyIndex",Ub),t.createIndex("collectionGroupIndex",Vb)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(i=i.next(()=>this.ai(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zb}).createIndex("sequenceNumberIndex",Hb,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Gb}).createIndex("documentKeyIndex",Kb,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)})),i}ri(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=KS(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(t=>db.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next(n=>db.forEach(n,n=>{xw(n.userId===t.userId);const r=nS(this.serializer,n);return GS(e,t.userId,r).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.J((n,s)=>{const i=new Ww(n),o=[0,Ab(i)];r.push(t.get(o).next(n=>{return n?db.resolve():(r=i,t.put({targetId:0,path:Ab(r),sequenceNumber:e.highestListenSequenceNumber}));var r}))}).next(()=>db.waitFor(r))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:$b});const n=t.store("collectionParents"),r=new MS,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ab(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>{const n=new Ww(e);return s(n.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([e,t,n],r)=>{const i=Rb(t);return s(i.popLast())}))}oi(e){const t=e.store("targets");return t.J((e,n)=>{const r=rS(n),s=sS(this.serializer,r);return t.put(s)})}_i(e,t){const n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{const s=t.store("remoteDocumentsV14"),i=(a=n,a.document?new Yw(Ww.fromString(a.document.name).popFirst(5)):a.noDocument?Yw.fromSegments(a.noDocument.path):a.unknownDocument?Yw.fromSegments(a.unknownDocument.path):kw()).path.toArray(),o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};var a;r.push(s.put(o))}).next(()=>db.waitFor(r))}ai(e,t){const n=t.store("mutations"),r=fk(this.serializer),s=new Nk(Ok.Zr,this.serializer.ct);return n.U().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:lT();nS(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),db.forEach(n,(e,n)=>{const i=new vw(n),o=dS.lt(this.serializer,i),a=s.getIndexManager(i),c=WS.lt(i,this.serializer,a,s.referenceDelegate);return new _k(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new s_(t,Sb.oe),e).next()})})}}function Mk(e){e.createObjectStore("targetDocuments",{keyPath:Bb}).createIndex("documentTargetsIndex",qb,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jb,{unique:!0}),e.createObjectStore("targetGlobal")}const Fk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Uk{constructor(e,t,n,r,s,i,o,a,c,l,u=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=s,this.window=i,this.document=o,this.ci=c,this.li=l,this.hi=u,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=e=>Promise.resolve(),!Uk.D())throw new Dw(Aw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lk(this,r),this.Ai=t+"main",this.serializer=new YE(a),this.Ri=new pb(this.Ai,this.hi,new Lk(this.serializer)),this.$r=new pS,this.Ur=new ek(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fk(this.serializer),this.Gr=new lS,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===l&&Tw("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Dw(Aw.FAILED_PRECONDITION,Fk);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Sb(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jk(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(e=>{e||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(vb(e))return Iw("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Iw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Vk(e).get("owner").next(e=>db.resolve(this.vi(e)))}Ci(e){return jk(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=i_(e,"clientMetadata");return t.U().next(e=>{const n=this.xi(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return db.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?db.resolve(!0):Vk(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Dw(Aw.FAILED_PRECONDITION,Fk);return!1}}return!(!this.networkEnabled||!this.inForeground)||jk(e).U().next(e=>void 0===this.xi(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Iw("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new s_(e,Sb.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(e=>this.Mi(e.updateTimeMs,t)&&!this.Ni(e.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jk(e).U().next(e=>this.xi(e,18e5).map(e=>e.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return WS.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new US(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dS.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){Iw("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=17===(i=this.hi)?r_:16===i?n_:15===i?t_:14===i?e_:13===i?Zb:12===i?Xb:11===i?Yb:void kw();var i;let o;return this.Ri.runTransaction(e,r,s,r=>(o=new s_(r,this.Qr?this.Qr.next():Sb.oe),"readwrite-primary"===t?this.wi(o).next(e=>!!e||this.Si(o)).next(t=>{if(!t)throw Tw(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Dw(Aw.FAILED_PRECONDITION,lb);return n(o)}).next(e=>this.Di(o).next(()=>e)):this.Ki(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Ki(e){return Vk(e).get("owner").next(e=>{if(null!==e&&this.Mi(e.leaseTimestampMs,5e3)&&!this.Ni(e.ownerId)&&!this.vi(e)&&!(this.li||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Dw(Aw.FAILED_PRECONDITION,Fk)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vk(e).put("owner",t)}static D(){return pb.D()}bi(e){const t=Vk(e);return t.get("owner").next(e=>this.vi(e)?(Iw("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):db.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t||e>n&&(Tw(`Detected an update time that is in the future: ${e} > ${n}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const e=/(?:Version|Mobile)\/1[456]/;dd()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Iw("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Tw("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(mL){Tw("Failed to set zombie client id.",mL)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch(mL){}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vk(e){return i_(e,"owner")}function jk(e){return i_(e,"clientMetadata")}function Bk(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class qk{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=lT(),r=lT();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new qk(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=dd()?8:mb(hd())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.Yi(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.Zi(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new $k;return this.Xi(e,t,n).next(r=>{if(s.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>s.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(_w()<=Ad.DEBUG&&Iw("QueryEngine","SDK will not create cache indexes for query:",KI(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),db.resolve()):(_w()<=Ad.DEBUG&&Iw("QueryEngine","Query:",KI(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(_w()<=Ad.DEBUG&&Iw("QueryEngine","The SDK decides to create cache indexes for query:",KI(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jI(t))):db.resolve())}Yi(e,t){if(FI(t))return db.resolve(null);let n=jI(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=zI(t,null,"F"),n=jI(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=lT(...r);return this.Ji.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ts(t,r);return this.ns(t,i,s,n.readTime)?this.Yi(e,zI(t,null,"F")):this.rs(e,i,t,n)}))})))}Zi(e,t,n,r){return FI(t)||r.isEqual(Gw.min())?db.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const i=this.ts(t,s);return this.ns(t,i,n,r)?db.resolve(null):(_w()<=Ad.DEBUG&&Iw("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),KI(t)),this.rs(e,i,t,ib(r,-1)).next(e=>e))})}ts(e,t){let n=new f_(JI(e));return t.forEach((t,r)=>{WI(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,t,n){return _w()<=Ad.DEBUG&&Iw("QueryEngine","Using full collection scan to execute query:",KI(t)),this.Ji.getDocumentsMatchingQuery(e,t,ab.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new u_(qw),this._s=new XI(e=>CI(e),AI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _k(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Gk(e,t,n,r){return new Hk(e,t,n,r)}async function Kk(e,t){const n=Cw(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=lT();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:s,addedBatchIds:i}))})})}function Wk(e){const t=Cw(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Qk(e,t,n){let r=lT(),s=lT();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=eT();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Gw.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Iw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{Ps:r,Is:s}})}function Jk(e,t){const n=Cw(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Yk(e,t){const n=Cw(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(s=>s?(r=s,db.resolve(r)):n.Ur.allocateTargetId(e).next(s=>(r=new JE(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Xk(e,t,n){const r=Cw(e),s=r.os.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(o){if(!vb(o))throw o;Iw("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.os=r.os.remove(t),r._s.delete(s.target)}function Zk(e,t,n){const r=Cw(e);let s=Gw.min(),i=lT();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Cw(e),s=r._s.get(n);return void 0!==s?db.resolve(r.os.get(s)):r.Ur.getTargetData(t,n)}(r,e,jI(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?s:Gw.min(),n?i:lT())).next(e=>(nx(r,QI(t),e),{documents:e,Ts:i})))}function ex(e,t){const n=Cw(e),r=Cw(n.Ur),s=n.os.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.ot(e,t).next(e=>e?e.target:null))}function tx(e,t){const n=Cw(e),r=n.us.get(t)||Gw.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.cs.getAllFromCollectionGroup(e,t,ib(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(nx(n,t,e),e))}function nx(e,t,n){let r=e.us.get(t)||Gw.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}async function rx(e,t,n=lT()){const r=await Yk(e,jI(iS(t.bundledQuery))),s=Cw(e);return s.persistence.runTransaction("Save named query","readwrite",e=>{const i=TE(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Gr.saveNamedQuery(e,t);const o=r.withResumeToken(v_.EMPTY_BYTE_STRING,i);return s.os=s.os.insert(o.targetId,o),s.Ur.updateTargetData(e,o).next(()=>s.Ur.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>s.Ur.addMatchingKeys(e,n,r.targetId)).next(()=>s.Gr.saveNamedQuery(e,t))})}function sx(e,t){return`firestore_clients_${e}_${t}`}function ix(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function ox(e,t){return`firestore_targets_${e}_${t}`}class ax{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Rs(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new Dw(r.error.code,r.error.message))),i?new ax(e,t,r.state,s):(Tw("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cx{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new Dw(n.error.code,n.error.message))),s?new cx(e,n.state,r):(Tw("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lx{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=hT();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=Cb(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new lx(e,s):(Tw("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ux{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ux(t.clientId,t.onlineState):(Tw("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hx{constructor(){this.activeTargetIds=hT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dx{constructor(e,t,n,r,s){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new u_(qw),this.started=!1,this.bs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=sx(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new hx),this.Cs=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.xs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Os=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const e=this.getItem(sx(this.persistenceKey,n));if(e){const t=lx.Rs(n,e);t&&(this.Ss=this.Ss.insert(t.clientId,t))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const e=this.Ls(t);e&&this.Bs(e)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(ox(this.persistenceKey,e));if(t){const r=cx.Rs(e,t);r&&(n=r.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ox(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Qs(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Iw("SharedClientState","READ",e,t),t}setItem(e,t){Iw("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Iw("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Iw("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Tw("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Cs.test(t.key)){if(null==t.newValue){const e=this.Gs(t.key);return this.zs(e,null)}{const e=this.js(t.key,t.newValue);if(e)return this.zs(e.clientId,e)}}else if(this.Fs.test(t.key)){if(null!==t.newValue){const e=this.Hs(t.key,t.newValue);if(e)return this.Js(e)}}else if(this.Ms.test(t.key)){if(null!==t.newValue){const e=this.Ys(t.key,t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.xs){if(null!==t.newValue){const e=this.Ls(t.newValue);if(e)return this.Bs(e)}}else if(t.key===this.vs){const e=function(e){let t=Sb.oe;if(null!=e)try{const n=JSON.parse(e);xw("number"==typeof n),t=n}catch(n){Tw("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(t.newValue);e!==Sb.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Os){const e=this.Xs(t.newValue);await Promise.all(e.map(e=>this.syncEngine.eo(e)))}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const r=new ax(this.currentUser,e,t,n),s=ix(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Vs())}Qs(e){const t=ix(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const r=ox(this.persistenceKey,e),s=new cx(e,t,n);this.setItem(r,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return lx.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),r=Number(n[1]),s=void 0!==n[2]?n[2]:null;return ax.Rs(new vw(s),r,t)}Ys(e,t){const n=this.Ms.exec(e),r=Number(n[1]);return cx.Rs(r,t)}Ls(e){return ux.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Iw("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),s=this.ks(n),i=[],o=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||o.push(e)}),this.syncEngine.io(i,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=hT();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class fx{constructor(){this.so=new hx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hx,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{_o(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Iw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Iw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gx=null;function yx(){return null===gx?gx=268435456+Math.round(2147483648*Math.random()):gx++,"0x"+gx.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="WebChannelConnection";class _x extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,s){const i=yx(),o=this.xo(e,t.toUriEncodedString());Iw("RestConnection",`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,s),this.No(e,o,a,n).then(t=>(Iw("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw Ew("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,s,i){return this.Mo(e,t,n,r,s)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ww,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=vx[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const s=yx();return new Promise((i,o)=>{const a=new cw;a.setWithCredentials(!0),a.listenOnce(uw.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case hw.NO_ERROR:const t=a.getResponseJson();Iw(bx,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case hw.TIMEOUT:Iw(bx,`RPC '${e}' ${s} timed out`),o(new Dw(Aw.DEADLINE_EXCEEDED,"Request time out"));break;case hw.HTTP_ERROR:const n=a.getStatus();if(Iw(bx,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Aw).indexOf(t)>=0?t:Aw.UNKNOWN}(t.status);o(new Dw(e,t.message))}else o(new Dw(Aw.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Dw(Aw.UNAVAILABLE,"Connection failed."));break;default:kw()}}finally{Iw(bx,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);Iw(bx,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",c,n,15)})}Bo(e,t,n){const r=yx(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=mw(),o=pw(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");Iw(bx,`Creating RPC '${e}' stream ${r}: ${l}`,a);const u=i.createWebChannel(l,a);let h=!1,d=!1;const f=new wx({Io:t=>{d?Iw(bx,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Iw(bx,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Iw(bx,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,lw.EventType.OPEN,()=>{d||(Iw(bx,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(u,lw.EventType.CLOSE,()=>{d||(d=!0,Iw(bx,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(u,lw.EventType.ERROR,t=>{d||(d=!0,Ew(bx,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Dw(Aw.UNAVAILABLE,"The operation could not be completed")))}),p(u,lw.EventType.MESSAGE,t=>{var n;if(!d){const s=t.data[0];xw(!!s);const i=s,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Iw(bx,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=QT[e];if(void 0!==t)return XT(t)}(t),s=o.message;void 0===n&&(n=Aw.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new Dw(n,s)),u.close()}else Iw(bx,`RPC '${e}' stream ${r} received:`,s),f.bo(s)}}),p(o,fw.STAT_EVENT,t=>{t.stat===dw.PROXY?Iw(bx,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===dw.NOPROXY&&Iw(bx,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return"undefined"!=typeof window?window:null}function Tx(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(e){return new vE(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t,n=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Iw("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,t,n,r,s,i,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Sx(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Aw.RESOURCE_EXHAUSTED?(Tw(t.toString()),Tw("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Aw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Yo===t&&this.P_(e,n)},t=>{e(()=>{const e=new Dw(Aw.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Iw("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Iw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xx extends kx{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const s="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:kw(),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(xw(void 0===t||"string"==typeof t),v_.fromBase64String(t||"")):(xw(void 0===t||t instanceof Buffer||t instanceof Uint8Array),v_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(e){const t=void 0===e.code?Aw.UNKNOWN:XT(e.code);return new Dw(t,e.message||"")}(a);n=new uE(s,i,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=CE(e,r.document.name),i=TE(r.document.updateTime),o=r.document.createTime?TE(r.document.createTime):Gw.min(),a=new Z_({mapValue:{fields:r.document.fields}}),c=tI.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new cE(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=CE(e,r.document),i=r.readTime?TE(r.readTime):Gw.min(),o=tI.newNoDocument(s,i),a=r.removedTargetIds||[];n=new cE([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=CE(e,r.document),i=r.removedTargetIds||[];n=new cE([],i,s,null)}else{if(!("filter"in t))return kw();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new WT(r,s),o=e.targetId;n=new lE(o,i)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gw.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gw.min():t.readTime?TE(t.readTime):Gw.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=NE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=DI(r)?{documents:FE(e,r)}:{query:UE(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_E(e,t.resumeToken);const r=wE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gw.min())>0){n.readTime=bE(e,t.snapshotVersion.toTimestamp());const r=wE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kw()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=NE(this.serializer),t.removeTarget=e,this.a_(t)}}class Cx extends kx{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return xw(!!e.streamToken),this.lastStreamToken=e.streamToken,xw(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){xw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(xw(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?TE(e.updateTime):TE(t);return n.isEqual(Gw.min())&&(n=TE(t)),new CT(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=TE(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=NE(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>LE(this.serializer,e))};this.a_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Dw(Aw.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Mo(e,SE(t,n),r,s,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Aw.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Dw(Aw.UNKNOWN,e.toString())})}Lo(e,t,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Lo(e,SE(t,n),r,i,o,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Aw.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Dw(Aw.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Dx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Tw(t),this.D_=!1):Iw("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(e=>{n.enqueueAndForget(async()=>{jx(this)&&(Iw("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Cw(e);t.L_.add(4),await Ox(t),t.q_.set("Unknown"),t.L_.delete(4),await Rx(t)}(this))})}),this.q_=new Dx(n,r)}}async function Rx(e){if(jx(e))for(const t of e.B_)await t(!0)}async function Ox(e){for(const t of e.B_)await t(!1)}function Px(e,t){const n=Cw(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Vx(n)?Ux(n):iC(n).r_()&&Mx(n,t))}function Lx(e,t){const n=Cw(e),r=iC(n);n.N_.delete(t),r.r_()&&Fx(n,t),0===n.N_.size&&(r.r_()?r.o_():jx(n)&&n.q_.set("Unknown"))}function Mx(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gw.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}iC(e).A_(t)}function Fx(e,t){e.Q_.xe(t),iC(e).R_(t)}function Ux(e){e.Q_=new dE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),iC(e).start(),e.q_.v_()}function Vx(e){return jx(e)&&!iC(e).n_()&&e.N_.size>0}function jx(e){return 0===Cw(e).L_.size}function Bx(e){e.Q_=void 0}async function qx(e){e.q_.set("Online")}async function $x(e){e.N_.forEach((t,n)=>{Mx(e,t)})}async function zx(e,t){Bx(e),Vx(e)?(e.q_.M_(t),Ux(e)):e.q_.set("Unknown")}async function Hx(e,t,n){if(e.q_.set("Online"),t instanceof uE&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(r){Iw("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Gx(e,r)}else if(t instanceof cE?e.Q_.Ke(t):t instanceof lE?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Gw.min()))try{const t=await Wk(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.N_.get(r);s&&e.N_.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(v_.EMPTY_BYTE_STRING,r.snapshotVersion)),Fx(e,t);const s=new JE(r.target,t,n,r.sequenceNumber);Mx(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(s){Iw("RemoteStore","Failed to raise snapshot:",s),await Gx(e,s)}}async function Gx(e,t,n){if(!vb(t))throw t;e.L_.add(1),await Ox(e),e.q_.set("Offline"),n||(n=()=>Wk(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Iw("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Rx(e)})}function Kx(e,t){return t().catch(n=>Gx(e,n,t))}async function Wx(e){const t=Cw(e),n=oC(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Qx(t);)try{const e=await Jk(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,Jx(t,e)}catch(s){await Gx(t,s)}Yx(t)&&Xx(t)}function Qx(e){return jx(e)&&e.O_.length<10}function Jx(e,t){e.O_.push(t);const n=oC(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Yx(e){return jx(e)&&!oC(e).n_()&&e.O_.length>0}function Xx(e){oC(e).start()}async function Zx(e){oC(e).p_()}async function eC(e){const t=oC(e);for(const n of e.O_)t.m_(n.mutations)}async function tC(e,t,n){const r=e.O_.shift(),s=HT.from(r,t,n);await Kx(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Wx(e)}async function nC(e,t){t&&oC(e).V_&&await async function(e,t){if(YT(n=t.code)&&n!==Aw.ABORTED){const n=e.O_.shift();oC(e).s_(),await Kx(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Wx(e)}var n}(e,t),Yx(e)&&Xx(e)}async function rC(e,t){const n=Cw(e);n.asyncQueue.verifyOperationInProgress(),Iw("RemoteStore","RemoteStore received new credentials");const r=jx(n);n.L_.add(3),await Ox(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Rx(n)}async function sC(e,t){const n=Cw(e);t?(n.L_.delete(2),await Rx(n)):t||(n.L_.add(2),await Ox(n),n.q_.set("Unknown"))}function iC(e){return e.K_||(e.K_=function(e,t,n){const r=Cw(e);return r.w_(),new xx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:qx.bind(null,e),Ro:$x.bind(null,e),mo:zx.bind(null,e),d_:Hx.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Vx(e)?Ux(e):e.q_.set("Unknown")):(await e.K_.stop(),Bx(e))})),e.K_}function oC(e){return e.U_||(e.U_=function(e,t,n){const r=Cw(e);return r.w_(),new Cx(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zx.bind(null,e),mo:nC.bind(null,e),f_:eC.bind(null,e),g_:tC.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await Wx(e)):(await e.U_.stop(),e.O_.length>0&&(Iw("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class aC{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Nw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new aC(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Dw(Aw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cC(e,t){if(Tw("AsyncQueue",`${t}: ${e}`),vb(e))return new Dw(Aw.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Yw.comparator(t.key,n.key):(e,t)=>Yw.comparator(e.key,t.key),this.keyedMap=nT(),this.sortedSet=new u_(this.comparator)}static emptySet(e){return new lC(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lC))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lC;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.W_=new u_(Yw.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):kw():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class hC{constructor(e,t,n,r,s,i,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new hC(e,t,lC.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class fC{constructor(){this.queries=pC(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Cw(e),r=n.queries;n.queries=pC(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Dw(Aw.ABORTED,"Firestore shutting down"))}}function pC(){return new XI(e=>GI(e),HI)}async function mC(e,t){const n=Cw(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.H_()&&t.J_()&&(r=2):(i=new dC,r=t.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const e=cC(o,`Initialization of query '${KI(t.query)}' failed`);return void t.onError(e)}n.queries.set(s,i),i.j_.push(t),t.Z_(n.onlineState),i.z_&&t.X_(i.z_)&&wC(n)}async function gC(e,t){const n=Cw(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.j_.indexOf(t);e>=0&&(i.j_.splice(e,1),0===i.j_.length?s=t.J_()?0:1:!i.H_()&&t.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yC(e,t){const n=Cw(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(s)&&(r=!0);t.z_=s}}r&&wC(n)}function vC(e,t,n){const r=Cw(e),s=r.queries.get(t);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(t)}function wC(e){e.Y_.forEach(e=>{e.next()})}var bC,_C;(_C=bC||(bC={})).ea="default",_C.Cache="cache";class IC{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hC(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=hC.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bC.Cache}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.serializer=e}Es(e){return CE(this.serializer,e)}ds(e){return e.metadata.exists?PE(this.serializer,e.document,!1):tI.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return TE(e)}}class SC{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kC(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=Ww.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new EC(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Es(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||lT()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const s=Cw(e);let i=lT(),o=eT();for(const u of n){const e=t.Es(u.metadata.name);u.document&&(i=i.add(e));const n=t.ds(u);n.setReadTime(t.As(u.metadata.readTime)),o=o.insert(e,n)}const a=s.cs.newChangeBuffer({trackRemovals:!0}),c=await Yk(s,(l=r,jI(MI(Ww.fromString(`__bundle__/docs/${l}`)))));var l;return s.persistence.runTransaction("Apply bundle documents","readwrite",e=>Qk(e,a,o).next(t=>(a.apply(e),t)).next(t=>s.Ur.removeMatchingKeysForTargetId(e,c.targetId).next(()=>s.Ur.addMatchingKeys(e,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(e,t.Ps,t.Is)).next(()=>t.Ps)))}(this.localStore,new EC(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const n of this.queries)await rx(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function kC(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.key=e}}class CC{constructor(e){this.key=e}}class AC{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lT(),this.mutatedKeys=lT(),this.Aa=JI(e),this.Ra=new lC(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new uC,r=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=WI(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||c&&this.Aa(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Ra:i,fa:n,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const i=e.fa.G_();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kw()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,c=a!==this.Ea;return this.Ea=a,0!==i.length||c?{snapshot:new hC(this.query,e.Ra,s,i,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=lT(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new CC(e))}),this.da.forEach(n=>{e.has(n)||t.push(new xC(n))}),t}ba(e){this.Ta=e.Ts,this.da=lT();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return hC.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class DC{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class NC{constructor(e){this.key=e,this.va=!1}}class RC{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new XI(e=>GI(e),HI),this.Ma=new Map,this.xa=new Set,this.Oa=new u_(Yw.comparator),this.Na=new Map,this.La=new Sk,this.Ba={},this.ka=new Map,this.qa=ZS.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function OC(e,t,n=!0){const r=cA(e);let s;const i=r.Fa.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await LC(r,t,n,!0),s}async function PC(e,t){const n=cA(e);await LC(n,t,!0,!1)}async function LC(e,t,n,r){const s=await Yk(e.localStore,jI(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await MC(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&Px(e.remoteStore,s),a}async function MC(e,t,n,r,s){e.Ka=(t,n,r)=>async function(e,t,n,r){let s=t.view.ma(n);s.ns&&(s=await Zk(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,s)));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return WC(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const i=await Zk(e.localStore,t,!0),o=new AC(t,i.Ts),a=o.ma(i.documents),c=aE.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);WC(e,n,l.wa);const u=new DC(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),l.snapshot}async function FC(e,t,n){const r=Cw(e),s=r.Fa.get(t),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(e=>!HI(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Xk(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lx(r.remoteStore,s.targetId),GC(r,s.targetId)}).catch(hb)):(GC(r,s.targetId),await Xk(r.localStore,s.targetId,!0))}async function UC(e,t){const n=Cw(e),r=n.Fa.get(t),s=n.Ma.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lx(n.remoteStore,r.targetId))}async function VC(e,t){const n=Cw(e);try{const e=await function(e,t){const n=Cw(e),r=t.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const o=[];t.targetChanges.forEach((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.Ur.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,i.addedDocuments,a)));let l=c.withSequenceNumber(e.currentSequenceNumber);var u,h,d;null!==t.targetMismatches.get(a)?l=l.withResumeToken(v_.EMPTY_BYTE_STRING,Gw.min()).withLastLimboFreeSnapshotVersion(Gw.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),h=l,d=i,(0===(u=c).resumeToken.approximateByteSize()||h.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size>0)&&o.push(n.Ur.updateTargetData(e,l))});let a=eT(),c=lT();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Qk(e,i,t.documentUpdates).next(e=>{a=e.Ps,c=e.Is})),!r.isEqual(Gw.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return db.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.os=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(xw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?xw(r.va):e.removedDocuments.size>0&&(xw(r.va),r.va=!1))}),await YC(n,e,t)}catch(r){await hb(r)}}function jC(e,t,n){const r=Cw(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const s=r.view.Z_(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Cw(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.j_)s.Z_(t)&&(r=!0)}),r&&wC(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function BC(e,t,n){const r=Cw(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Na.get(t),i=s&&s.key;if(i){let e=new u_(Yw.comparator);e=e.insert(i,tI.newNoDocument(i,Gw.min()));const n=lT().add(i),s=new oE(Gw.min(),new Map,new u_(qw),e,n);await VC(r,s),r.Oa=r.Oa.remove(i),r.Na.delete(t),JC(r)}else await Xk(r.localStore,t,!1).then(()=>GC(r,t,n)).catch(hb)}async function qC(e,t){const n=Cw(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Cw(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=db.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);xw(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=lT();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);HC(n,r,null),zC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await YC(n,e)}catch(s){await hb(s)}}async function $C(e,t,n){const r=Cw(e);try{const e=await function(e,t){const n=Cw(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(xw(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);HC(r,t,n),zC(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await YC(r,e)}catch(s){await hb(s)}}function zC(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function HC(e,t,n){const r=Cw(e);let s=r.Ba[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Ba[r.currentUser.toKey()]=s}}function GC(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||KC(e,t)})}function KC(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Lx(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),JC(e))}function WC(e,t,n){for(const r of n)r instanceof xC?(e.La.addReference(r.key,t),QC(e,r)):r instanceof CC?(Iw("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||KC(e,r.key)):kw()}function QC(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Iw("SyncEngine","New document in limbo: "+n),e.xa.add(r),JC(e))}function JC(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Yw(Ww.fromString(t)),r=e.qa.next();e.Na.set(r,new NC(n)),e.Oa=e.Oa.insert(n,r),Px(e.remoteStore,new JE(jI(MI(n.path)),r,"TargetPurposeLimboResolution",Sb.oe))}}async function YC(e,t,n){const r=Cw(e),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const s=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=qk.Wi(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(e,t){const n=Cw(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>db.forEach(t,t=>db.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>db.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!vb(r))throw r;Iw("LocalStore","Failed to update sequence numbers: "+r)}for(const s of t){const e=s.targetId;if(!s.fromCache){const t=n.os.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,s)}}}(r.localStore,i))}async function XC(e,t){const n=Cw(e);if(!n.currentUser.isEqual(t)){Iw("SyncEngine","User change. New user:",t.toKey());const e=await Kk(n.localStore,t);n.currentUser=t,s="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).ka.forEach(e=>{e.forEach(e=>{e.reject(new Dw(Aw.CANCELLED,s))})}),r.ka.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await YC(n,e.hs)}var r,s}function ZC(e,t){const n=Cw(e),r=n.Na.get(t);if(r&&r.va)return lT().add(r.key);{let e=lT();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}async function eA(e,t){const n=Cw(e),r=await Zk(n.localStore,t.query,!0),s=t.view.ba(r);return n.isPrimaryClient&&WC(n,t.targetId,s.wa),s}async function tA(e,t){const n=Cw(e);return tx(n.localStore,t).then(e=>YC(n,e))}async function nA(e,t,n,r){const s=Cw(e),i=await function(e,t){const n=Cw(e),r=Cw(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Mn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):db.resolve(null)))}(s.localStore,t);var o,a;null!==i?("pending"===n?await Wx(s.remoteStore):"acknowledged"===n||"rejected"===n?(HC(s,t,r||null),zC(s,t),o=s.localStore,a=t,Cw(Cw(o).mutationQueue).On(a)):kw(),await YC(s,i)):Iw("SyncEngine","Cannot apply mutation batch with id: "+t)}async function rA(e,t,n){const r=Cw(e),s=[],i=[];for(const o of t){let e;const t=r.Ma.get(o);if(t&&0!==t.length){e=await Yk(r.localStore,jI(t[0]));for(const e of t){const t=r.Fa.get(e),n=await eA(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await ex(r.localStore,o);e=await Yk(r.localStore,t),await MC(r,sA(t),o,!1,e.resumeToken)}s.push(e)}return r.Ca.d_(i),s}function sA(e){return LI(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function iA(e){return t=Cw(e).localStore,Cw(Cw(t).persistence).Qi();var t}async function oA(e,t,n,r){const s=Cw(e);if(s.Qa)return void Iw("SyncEngine","Ignoring unexpected query state notification.");const i=s.Ma.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await tx(s.localStore,QI(i[0])),r=oE.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,v_.EMPTY_BYTE_STRING);await YC(s,e,r);break}case"rejected":await Xk(s.localStore,t,!0),GC(s,t,r);break;default:kw()}}async function aA(e,t,n){const r=cA(e);if(r.Qa){for(const e of t){if(r.Ma.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Iw("SyncEngine","Adding an already active target "+e);continue}const t=await ex(r.localStore,e),n=await Yk(r.localStore,t);await MC(r,sA(t),n.targetId,!1,n.resumeToken),Px(r.remoteStore,n)}for(const e of n)r.Ma.has(e)&&await Xk(r.localStore,e,!1).then(()=>{Lx(r.remoteStore,e),GC(r,e)}).catch(hb)}}function cA(e){const t=Cw(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=VC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BC.bind(null,t),t.Ca.d_=yC.bind(null,t.eventManager),t.Ca.$a=vC.bind(null,t.eventManager),t}function lA(e){const t=Cw(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$C.bind(null,t),t}class uA{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ex(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Gk(this.persistence,new zk,e.initialUser,this.serializer)}Ga(e){return new Nk(Ok.Zr,this.serializer)}Wa(e){return new fx}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uA.provider={build:()=>new uA};class hA extends uA{constructor(e){super(),this.cacheSizeBytes=e}ja(e,t){xw(this.persistence.referenceDelegate instanceof Pk);const n=this.persistence.referenceDelegate.garbageCollector;return new ok(n,e.asyncQueue,t)}Ga(e){const t=void 0!==this.cacheSizeBytes?HS.withCacheSize(this.cacheSizeBytes):HS.DEFAULT;return new Nk(e=>Pk.Zr(e,t),this.serializer)}}class dA extends uA{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await lA(this.Ja.syncEngine),await Wx(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return Gk(this.persistence,new zk,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ok(n,e.asyncQueue,t)}Ha(e,t){const n=new Eb(t,this.persistence);return new Tb(e.asyncQueue,n)}Ga(e){const t=Bk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?HS.withCacheSize(this.cacheSizeBytes):HS.DEFAULT;return new Uk(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ix(),Tx(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new fx}}class fA extends dA{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof dx&&(this.sharedClientState.syncEngine={no:nA.bind(null,t),ro:oA.bind(null,t),io:aA.bind(null,t),Qi:iA.bind(null,t),eo:tA.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async e=>{await async function(e,t){const n=Cw(e);if(cA(n),lA(n),!0===t&&!0!==n.Qa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await rA(n,e.toArray());n.Qa=!0,await sC(n.remoteStore,!0);for(const r of t)Px(n.remoteStore,r)}else if(!1===t&&!1!==n.Qa){const e=[];let t=Promise.resolve();n.Ma.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(GC(n,s),Xk(n.localStore,s,!0))),Lx(n.remoteStore,s)}),await t,await rA(n,e),function(e){const t=Cw(e);t.Na.forEach((e,n)=>{Lx(t.remoteStore,n)}),t.La.pr(),t.Na=new Map,t.Oa=new u_(Yw.comparator)}(n),n.Qa=!1,await sC(n.remoteStore,!1)}}(this.Ja.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Wa(e){const t=Ix();if(!dx.D(t))throw new Dw(Aw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Bk(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class pA{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>jC(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=XC.bind(null,this.syncEngine),await sC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new fC}createDatastore(e){const t=Ex(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new _x(r));var r;return function(e,t,n,r){return new Ax(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>jC(this.syncEngine,e,0),i=mx.D()?new mx:new px,new Nx(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new RC(e,t,n,r,s,i);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Cw(e);Iw("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Ox(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function mA(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pA.provider={build:()=>new pA};class gA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Tw("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Nw,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(e=>{e&&e.ua()?this.metadata.resolve(e.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.aa)}`))},e=>this.metadata.reject(e))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(null===e)return null;const t=this.eu.decode(e),n=Number(t);isNaN(n)&&this.ru(`length string (${t}) is not valid number`);const r=await this.iu(n);return new TC(JSON.parse(r),e.length+n)}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async nu(){for(;this.su()<0&&!(await this.ou()););if(0===this.buffer.length)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Dw(Aw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Cw(e),r={documents:t.map(e=>xE(n.serializer,e))},s=await n.Lo("BatchGetDocuments",n.serializer.databaseId,Ww.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){xw(!!t.found),t.found.name,t.found.updateTime;const n=CE(e,t.found.name),r=TE(t.found.updateTime),s=t.found.createTime?TE(t.found.createTime):Gw.min(),i=new Z_({mapValue:{fields:t.found.fields}});return tI.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){xw(!!t.missing),xw(!!t.readTime);const n=CE(e,t.missing),r=TE(t.readTime);return tI.newNoDocument(n,r)}(e,t):kw()}(n.serializer,e);i.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=i.get(e.toString());xw(!!t),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new qT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=Yw.fromPath(t);this.mutations.push(new $T(n,this.precondition(n)))}),await async function(e,t){const n=Cw(e),r={writes:t.map(e=>LE(n.serializer,e))};await n.Mo("Commit",n.serializer.databaseId,Ww.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw kw();t=Gw.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Dw(Aw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gw.min())?AT.exists(!1):AT.updateTime(t):AT.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gw.min()))throw new Dw(Aw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return AT.updateTime(t)}return AT.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this._u=n.maxAttempts,this.t_=new Sx(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new vA(this.datastore),t=this.cu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.lu(e)}))}).catch(e=>{this.lu(e)})})}cu(e){try{const t=this.updateFunction(e);return!kb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!YT(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=vw.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Iw("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Iw("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=cC(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function _A(e,t){e.asyncQueue.verifyOperationInProgress(),Iw("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Kk(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function IA(e,t){e.asyncQueue.verifyOperationInProgress();const n=await TA(e);Iw("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>rC(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>rC(t.remoteStore,n)),e._onlineComponents=t}async function TA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Iw("FirestoreClient","Using user provided OfflineComponentProvider");try{await _A(e,e._uninitializedComponentsProvider._offline)}catch(n){const r=n;if(!("FirebaseError"===(t=r).name?t.code===Aw.FAILED_PRECONDITION||t.code===Aw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw r;Ew("Error using user provided cache. Falling back to memory cache: "+r),await _A(e,new uA)}}else Iw("FirestoreClient","Using default OfflineComponentProvider"),await _A(e,new uA);var t;return e._offlineComponents}async function EA(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Iw("FirestoreClient","Using user provided OnlineComponentProvider"),await IA(e,e._uninitializedComponentsProvider._online)):(Iw("FirestoreClient","Using default OnlineComponentProvider"),await IA(e,new pA))),e._onlineComponents}function SA(e){return TA(e).then(e=>e.persistence)}function kA(e){return TA(e).then(e=>e.localStore)}function xA(e){return EA(e).then(e=>e.remoteStore)}function CA(e){return EA(e).then(e=>e.syncEngine)}function AA(e){return EA(e).then(e=>e.datastore)}async function DA(e){const t=await EA(e),n=t.eventManager;return n.onListen=OC.bind(null,t.syncEngine),n.onUnlisten=FC.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=PC.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=UC.bind(null,t.syncEngine),n}function NA(e,t,n={}){const r=new Nw;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new gA({next:a=>{i.Za(),t.enqueueAndForget(()=>gC(e,o));const c=a.docs.has(n);!c&&a.fromCache?s.reject(new Dw(Aw.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?s.reject(new Dw(Aw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new IC(MI(n.path),i,{includeMetadataChanges:!0,_a:!0});return mC(e,o)}(await DA(e),e.asyncQueue,t,n,r)),r.promise}function RA(e,t,n={}){const r=new Nw;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new gA({next:n=>{i.Za(),t.enqueueAndForget(()=>gC(e,o)),n.fromCache&&"server"===r.source?s.reject(new Dw(Aw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new IC(n,i,{includeMetadataChanges:!0,_a:!0});return mC(e,o)}(await DA(e),e.asyncQueue,t,n,r)),r.promise}function OA(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?eE().encode(e):e,r=function(e,t){if(e instanceof Uint8Array)return mA(e,t);if(e instanceof ArrayBuffer)return mA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),new yA(r,t);var r}(n,Ex(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=Cw(e);(async function(e,t,n){try{const s=await t.getMetadata();if(await function(e,t){const n=Cw(e),r=TE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Gr.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,s))return await t.close(),n._completeWith({taskState:"Success",documentsLoaded:(r=s).totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}),Promise.resolve(new Set);n._updateProgress(kC(s));const i=new SC(s,e.localStore,t.serializer);let o=await t.Ua();for(;o;){const e=await i.la(o);e&&n._updateProgress(e),o=await t.Ua()}const a=await i.complete();return await YC(e,a.Ia,void 0),await function(e,t){const n=Cw(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Gr.saveBundleMetadata(e,t))}(e.localStore,s),n._completeWith(a.progress),Promise.resolve(a.Pa)}catch(r){return Ew("SyncEngine",`Loading bundle failed with ${r}`),n._failWith(r),Promise.resolve(new Set)}var r})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await CA(e),s,r)})}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function PA(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const LA=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(e,t,n){if(!n)throw new Dw(Aw.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function FA(e,t,n,r){if(!0===t&&!0===r)throw new Dw(Aw.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function UA(e){if(!Yw.isDocumentKey(e))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function VA(e){if(Yw.isDocumentKey(e))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function jA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":kw()}function BA(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Dw(Aw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jA(e);throw new Dw(Aw.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function qA(e,t){if(t<=0)throw new Dw(Aw.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Dw(Aw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Dw(Aw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PA(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Dw(Aw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Dw(Aw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Dw(Aw.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class zA{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $A({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Dw(Aw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Dw(Aw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $A(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ow;switch(e.type){case"firstParty":return new Fw(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Dw(Aw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=LA.get(e);t&&(Iw("ComponentProvider","Removing Datastore"),LA.delete(e),t.terminate())}(this),Promise.resolve()}}function HA(e,t,n,r={}){var s;const i=(e=BA(e,zA))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==o&&Ew("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=vw.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[rd(JSON.stringify({alg:"none",type:"JWT"})),rd(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Dw(Aw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new vw(i)}e._authCredentials=new Pw(new Rw(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new GA(this.firestore,e,this._query)}}class KA{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new WA(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new KA(this.firestore,e,this._key)}}class WA extends GA{constructor(e,t,n){super(e,t,MI(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new KA(this.firestore,null,new Yw(e))}withConverter(e){return new WA(this.firestore,e,this._path)}}function QA(e,t,...n){if(e=Ed(e),MA("collection","path",t),e instanceof zA){const r=Ww.fromString(t,...n);return VA(r),new WA(e,null,r)}{if(!(e instanceof KA||e instanceof WA))throw new Dw(Aw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ww.fromString(t,...n));return VA(r),new WA(e.firestore,null,r)}}function JA(e,t,...n){if(e=Ed(e),1===arguments.length&&(t=Bw.newId()),MA("doc","path",t),e instanceof zA){const r=Ww.fromString(t,...n);return UA(r),new KA(e,null,new Yw(r))}{if(!(e instanceof KA||e instanceof WA))throw new Dw(Aw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ww.fromString(t,...n));return UA(r),new KA(e.firestore,e instanceof WA?e.converter:null,new Yw(r))}}function YA(e,t){return e=Ed(e),t=Ed(t),e instanceof GA&&t instanceof GA&&e.firestore===t.firestore&&HI(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class XA{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Sx(this,"async_queue_retry"),this.Vu=()=>{const e=Tx();e&&Iw("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Tx();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Tx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Nw;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(mL){if(!vb(mL))throw mL;Iw("AsyncQueue","Operation failed with retryable error: "+mL)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;throw Tw("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=aC.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&kw()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ZA(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class eD{constructor(){this._progressObserver={},this._taskCompletionResolver=new Nw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD extends zA{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new XA,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XA(e),this._firestoreClient=void 0,await e}}}function nD(e,t){const n="string"==typeof e?e:t||"(default)",r=Mf("object"==typeof e?e:qf(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=ad(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&HA(r,...e)}return r}function rD(e){if(e._terminated)throw new Dw(Aw.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||sD(e),e._firestoreClient}function sD(e){var t,n,r;const s=e._freezeSettings(),i=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",c=e._persistenceKey,new k_(o,a,c,(l=s).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,PA(l.experimentalLongPollingOptions),l.useFetchStreams));var o,a,c,l;e._componentsProvider||(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new bA(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function iD(e,t,n){if((e=BA(e,tD))._firestoreClient||e._terminated)throw new Dw(Aw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Dw(Aw.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},sD(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class oD{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class aD{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cD(v_.fromBase64String(e))}catch(t){throw new Dw(Aw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cD(v_.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Dw(Aw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jw(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class uD{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Dw(Aw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Dw(Aw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qw(this._lat,e._lat)||qw(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=/^__.*__$/;class pD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new UT(e,this.data,this.fieldMask,t,this.fieldTransforms):new FT(e,this.data,t,this.fieldTransforms)}}class mD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new UT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kw()}}class yD{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new yD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return FD(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(gD(this.Cu)&&fD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class vD{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ex(e)}Qu(e,t,n,r=!1){return new yD({Cu:e,methodName:t,qu:n,path:Jw.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wD(e){const t=e._freezeSettings(),n=Ex(e._databaseId);return new vD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bD(e,t,n,r,s,i={}){const o=e.Qu(i.merge||i.mergeFields?2:0,t,n,s);OD("Data must be an object, but it was:",o,r);const a=ND(r,o);let c,l;if(i.merge)c=new g_(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=PD(t,r,n);if(!o.contains(s))throw new Dw(Aw.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);UD(e,s)||e.push(s)}c=new g_(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new pD(new Z_(a),c,l)}class _D extends uD{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _D}}function ID(e,t,n){return new yD({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class TD extends uD{_toFieldTransform(e){return new xT(e.path,new wT)}isEqual(e){return e instanceof TD}}class ED extends uD{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=ID(this,e,!0),n=this.Ku.map(e=>DD(e,t)),r=new bT(n);return new xT(e.path,r)}isEqual(e){return e instanceof ED&&yd(this.Ku,e.Ku)}}class SD extends uD{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=ID(this,e,!0),n=this.Ku.map(e=>DD(e,t)),r=new IT(n);return new xT(e.path,r)}isEqual(e){return e instanceof SD&&yd(this.Ku,e.Ku)}}class kD extends uD{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new ET(e.serializer,pT(e.serializer,this.$u));return new xT(e.path,t)}isEqual(e){return e instanceof kD&&this.$u===e.$u}}function xD(e,t,n,r){const s=e.Qu(1,t,n);OD("Data must be an object, but it was:",s,r);const i=[],o=Z_.empty();a_(r,(e,r)=>{const a=MD(t,e,n);r=Ed(r);const c=s.Nu(a);if(r instanceof _D)i.push(a);else{const e=DD(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new g_(i);return new mD(o,a,s.fieldTransforms)}function CD(e,t,n,r,s,i){const o=e.Qu(1,t,n),a=[PD(t,r,n)],c=[s];if(i.length%2!=0)throw new Dw(Aw.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(PD(t,i[d])),c.push(i[d+1]);const l=[],u=Z_.empty();for(let d=a.length-1;d>=0;--d)if(!UD(l,a[d])){const e=a[d];let t=c[d];t=Ed(t);const n=o.Nu(e);if(t instanceof _D)l.push(e);else{const r=DD(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new g_(l);return new mD(u,h,o.fieldTransforms)}function AD(e,t,n,r=!1){return DD(n,e.Qu(r?4:3,t))}function DD(e,t){if(RD(e=Ed(e)))return OD("Unsupported field value:",t,e),ND(e,t);if(e instanceof uD)return function(e,t){if(!gD(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=DD(s,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ed(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pT(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Hw.fromDate(e);return{timestampValue:bE(t.serializer,n)}}if(e instanceof Hw){const n=new Hw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bE(t.serializer,n)}}if(e instanceof hD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cD)return{bytesValue:_E(t.serializer,e._byteString)};if(e instanceof KA){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:EE(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof dD)return n=t,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw n.Bu("VectorValues must only contain numeric values.");return dT(n.serializer,e)})}}}}};var n;throw t.Bu(`Unsupported field value: ${jA(e)}`)}(e,t)}function ND(e,t){const n={};return l_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):a_(e,(e,r)=>{const s=DD(r,t.Mu(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function RD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Hw||e instanceof hD||e instanceof cD||e instanceof KA||e instanceof uD||e instanceof dD)}function OD(e,t,n){if(!RD(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=jA(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}var r}function PD(e,t,n){if((t=Ed(t))instanceof lD)return t._internalPath;if("string"==typeof t)return MD(e,t);throw FD("Field path arguments must be of type string or ",e,!1,void 0,n)}const LD=new RegExp("[~\\*/\\[\\]]");function MD(e,t,n){if(t.search(LD)>=0)throw FD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new lD(...t.split("."))._internalPath}catch(r){throw FD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function FD(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Dw(Aw.INVALID_ARGUMENT,a+e+c)}function UD(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new KA(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(BD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jD extends VD{data(){return super.data()}}function BD(e,t){return"string"==typeof t?MD(e,t):t instanceof lD?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Dw(Aw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $D{}class zD extends $D{}function HD(e,t,...n){let r=[];t instanceof $D&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof WD).length,n=e.filter(e=>e instanceof GD).length;if(t>1||t>0&&n>0)throw new Dw(Aw.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class GD extends zD{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new GD(e,t,n)}_apply(e){const t=this._parse(e);return rN(e._query,t),new GA(e.firestore,e.converter,$I(e._query,t))}_parse(e){const t=wD(e.firestore);return function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){nN(o,i);const t=[];for(const n of o)t.push(tN(r,e,n));a={arrayValue:{values:t}}}else a=tN(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||nN(o,i),a=AD(n,t,o,"in"===i||"not-in"===i);return cI.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function KD(e,t,n){const r=t,s=BD("where",e);return GD._create(s,r,n)}class WD extends $D{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new WD(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:lI.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)rN(n,s),n=$I(n,s)}(e._query,t),new GA(e.firestore,e.converter,$I(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class QD extends zD{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QD(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Dw(Aw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Dw(Aw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iI(t,n)}(e._query,this._field,this._direction);return new GA(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new PI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function JD(e,t="asc"){const n=t,r=BD("orderBy",e);return QD._create(r,n)}class YD extends zD{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new YD(e,t,n)}_apply(e){return new GA(e.firestore,e.converter,zI(e._query,this._limit,this._limitType))}}class XD extends zD{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new XD(e,t,n)}_apply(e){const t=eN(e,this.type,this._docOrFields,this._inclusive);return new GA(e.firestore,e.converter,(n=e._query,r=t,new PI(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,r,n.endAt)));var n,r}}class ZD extends zD{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ZD(e,t,n)}_apply(e){const t=eN(e,this.type,this._docOrFields,this._inclusive);return new GA(e.firestore,e.converter,(n=e._query,r=t,new PI(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,r)));var n,r}}function eN(e,t,n,r){if(n[0]=Ed(n[0]),n[0]instanceof VD)return function(e,t,n,r,s){if(!r)throw new Dw(Aw.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const o of VI(e))if(o.field.isKeyField())i.push(V_(t,r.key));else{const e=r.data.field(o.field);if(T_(e))throw new Dw(Aw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}i.push(e)}return new nI(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=wD(e.firestore);return function(e,t,n,r,s,i){const o=e.explicitOrderBy;if(s.length>o.length)throw new Dw(Aw.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<s.length;c++){const i=s[c];if(o[c].field.isKeyField()){if("string"!=typeof i)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof i}`);if(!UI(e)&&-1!==i.indexOf("/"))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${i}' contains a slash.`);const n=e.path.child(Ww.fromString(i));if(!Yw.isDocumentKey(n))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new Yw(n);a.push(V_(t,s))}else{const e=AD(n,r,i);a.push(e)}}return new nI(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function tN(e,t,n){if("string"==typeof(n=Ed(n))){if(""===n)throw new Dw(Aw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UI(t)&&-1!==n.indexOf("/"))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ww.fromString(n));if(!Yw.isDocumentKey(r))throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V_(e,new Yw(r))}if(n instanceof KA)return V_(e,n._key);throw new Dw(Aw.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jA(n)}.`)}function nN(e,t){if(!Array.isArray(e)||0===e.length)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function rN(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Dw(Aw.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Dw(Aw.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function sN(e,t){if(!(t instanceof GD||t instanceof WD))throw new Dw(Aw.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class iN{convertValue(e,t="none"){switch(D_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(I_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kw()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return a_(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const s=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>__(e.doubleValue));return new dD(s)}convertGeoPoint(e){return new hD(__(e.latitude),__(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=E_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(S_(e));default:return null}}convertTimestamp(e){const t=b_(e);return new Hw(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ww.fromString(e);xw(QE(n));const r=new x_(n.get(1),n.get(3)),s=new Yw(n.popFirst(5));return r.isEqual(t)||Tw(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class aN extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new cD(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new KA(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return new oD("count")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class lN{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uN extends VD{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hN(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(BD("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hN extends uN{data(e={}){return super.data(e)}}class dN{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lN(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hN(this._firestore,this._userDataWriter,n.key,n,new lN(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Dw(Aw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new hN(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lN(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new hN(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lN(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:fN(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fN(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kw()}}class pN extends iN{constructor(e){super(),this.firestore=e}convertBytes(e){return new cD(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new KA(this.firestore,null,t)}}function mN(e,t,n){e=BA(e,KA);const r=BA(e.firestore,tD),s=oN(e.converter,t,n);return bN(r,[bD(wD(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,AT.none())])}function gN(e,t,n,...r){e=BA(e,KA);const s=BA(e.firestore,tD),i=wD(s);let o;return o="string"==typeof(t=Ed(t))||t instanceof lD?CD(i,"updateDoc",e._key,t,n,r):xD(i,"updateDoc",e._key,t),bN(s,[o.toMutation(e._key,AT.exists(!0))])}function yN(e){return bN(BA(e.firestore,tD),[new qT(e._key,AT.none())])}function vN(e,t){const n=BA(e.firestore,tD),r=JA(e),s=oN(e.converter,t);return bN(n,[bD(wD(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,AT.exists(!1))]).then(()=>r)}function wN(e,...t){var n,r,s;e=Ed(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof t[o]||ZA(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(ZA(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,l,u;if(e instanceof KA)l=BA(e.firestore,tD),u=MI(e._key.path),c={next:n=>{t[o]&&t[o](_N(l,e,n))},error:t[o+1],complete:t[o+2]};else{const n=BA(e,GA);l=BA(n.firestore,tD),u=n._query;const r=new pN(l);c={next:e=>{t[o]&&t[o](new dN(l,r,n,e))},error:t[o+1],complete:t[o+2]},qD(e._query)}return function(e,t,n,r){const s=new gA(r),i=new IC(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>mC(await DA(e),i)),()=>{s.Za(),e.asyncQueue.enqueueAndForget(async()=>gC(await DA(e),i))}}(rD(l),u,a,c)}function bN(e,t){return function(e,t){const n=new Nw;return e.asyncQueue.enqueueAndForget(async()=>async function(t,n,r){const s=lA(t);try{const e=await function(e,t){const n=Cw(e),r=Hw.now(),s=t.reduce((e,t)=>e.add(t.key),lT());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=eT(),c=lT();return n.cs.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=LT(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new UT(e.key,t,eI(t.value.mapValue),AT.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:rT(i)}))}(s.localStore,n);s.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new u_(qw)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(s,e.batchId,r),await YC(s,e.changes),await Wx(s.remoteStore)}catch(e){const n=cC(e,"Failed to persist write");r.reject(n)}}(await CA(e),t,n)),n.promise}(rD(e),t)}function _N(e,t,n){const r=n.docs.get(t._key),s=new pN(e);return new uN(e,s,t._key,r,new lN(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(e,t){const n=BA(e.firestore,tD),r=rD(n),s=c_(t,(e,t)=>new KT(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new Nw;return e.asyncQueue.enqueueAndForget(async()=>{try{const s=await AA(e);r.resolve(async function(e,t,n){var r;const s=Cw(e),{request:i,ut:o,parent:a}=VE(s.serializer,BI(t),n);s.connection.Fo||delete i.parent;const c=(await s.Lo("RunAggregationQuery",s.serializer.databaseId,a,i,1)).filter(e=>!!e.result);xw(1===c.length);const l=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(l).reduce((e,t)=>(e[o[t]]=l[t],e),{})}(s,t,n))}catch(s){r.reject(s)}}),r.promise}(r,e._query,s).then(t=>function(e,t,n){const r=new pN(e);return new aD(t,r,n)}(n,e,t))}class TN{constructor(e){this.kind="memory",this._onlineComponentProvider=pA.provider,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=uA.provider}toJSON(){return{kind:this.kind}}}class EN{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=AN(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class SN{constructor(){this.kind="memoryEager",this._offlineComponentProvider=uA.provider}toJSON(){return{kind:this.kind}}}class kN{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new hA(e)}}toJSON(){return{kind:this.kind}}}class xN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pA.provider,this._offlineComponentProvider={build:t=>new dA(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class CN{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pA.provider,this._offlineComponentProvider={build:t=>new fA(t,null==e?void 0:e.cacheSizeBytes)}}}function AN(e){return new xN(null==e?void 0:e.forceOwnership)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const DN={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wD(e)}set(e,t,n){this._verifyNotCommitted();const r=RN(e,this._firestore),s=oN(r.converter,t,n),i=bD(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,AT.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const s=RN(e,this._firestore);let i;return i="string"==typeof(t=Ed(t))||t instanceof lD?CD(this._dataReader,"WriteBatch.update",s._key,t,n,r):xD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(i.toMutation(s._key,AT.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=RN(e,this._firestore);return this._mutations=this._mutations.concat(new qT(t._key,AT.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Dw(Aw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function RN(e,t){if((e=Ed(e)).firestore!==t)throw new Dw(Aw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wD(e)}get(e){const t=RN(e,this._firestore),n=new aN(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return kw();const r=e[0];if(r.isFoundDocument())return new VD(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new VD(this._firestore,n,t._key,null,t.converter);throw kw()})}set(e,t,n){const r=RN(e,this._firestore),s=oN(r.converter,t,n),i=bD(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n,...r){const s=RN(e,this._firestore);let i;return i="string"==typeof(t=Ed(t))||t instanceof lD?CD(this._dataReader,"Transaction.update",s._key,t,n,r):xD(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){const t=RN(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=RN(e,this._firestore),n=new pN(this._firestore);return super.get(e).then(e=>new uN(this._firestore,n,t._key,e._document,new lN(!1,!1),t.converter))}}function PN(){return new TD("serverTimestamp")}function LN(e,t){if("string"!=typeof e[t])throw new Dw(Aw.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function FN(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>{return n=await kA(e),r=t,void(Cw(n).ss.zi=r);var n,r})})(rD(e._firestore),t).then(e=>Iw(`setting persistent cache index auto creation isEnabled=${t} succeeded`)).catch(e=>Ew(`setting persistent cache index auto creation isEnabled=${t} failed`,e))}const UN=new WeakMap;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.Uu=new Map}static get instance(){return jN||(jN=new VN,function(e){if(ZT)throw new Error("a TestingHooksSpi instance is already set");ZT=e}(jN)),jN}et(e){this.Uu.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Uu;return n.set(t,e),()=>n.delete(t)}}let jN=null;!function(e,t=!0){ww=jf,Lf(new Sd("firestore",(e,{instanceIdentifier:n,options:r})=>{const s=e.getProvider("app").getImmediate(),i=new tD(new Lw(e.getProvider("auth-internal")),new Vw(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Dw(Aw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new x_(e.options.projectId,t)}(s,n),s);return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i},"PUBLIC").setMultipleInstances(!0)),$f(yw,"4.7.3",e),$f(yw,"4.7.3","esm2017")}();const BN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:iN,AggregateField:oD,AggregateQuerySnapshot:aD,Bytes:cD,CACHE_SIZE_UNLIMITED:-1,CollectionReference:WA,DocumentReference:KA,DocumentSnapshot:uN,FieldPath:lD,FieldValue:uD,Firestore:tD,FirestoreError:Dw,GeoPoint:hD,LoadBundleTask:eD,PersistentCacheIndexManager:MN,Query:GA,QueryCompositeFilterConstraint:WD,QueryConstraint:zD,QueryDocumentSnapshot:hN,QueryEndAtConstraint:ZD,QueryFieldFilterConstraint:GD,QueryLimitConstraint:YD,QueryOrderByConstraint:QD,QuerySnapshot:dN,QueryStartAtConstraint:XD,SnapshotMetadata:lN,Timestamp:Hw,Transaction:ON,VectorValue:dD,WriteBatch:NN,_AutoId:Bw,_ByteString:v_,_DatabaseId:x_,_DocumentKey:Yw,_EmptyAppCheckTokenProvider:class{getToken(){return Promise.resolve(new Uw(""))}invalidateToken(){}start(e,t){}shutdown(){}},_EmptyAuthCredentialsProvider:Ow,_FieldPath:Jw,_TestingHooks:
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return VN.instance.onExistenceFilterMismatch(e)}},_cast:BA,_debugAssert:function(e,t){e||kw()},_internalAggregationQueryToProtoRunAggregationQueryRequest:function(e,t){var n;const r=c_(t,(e,t)=>new KT(t,e.aggregateType,e._internalFieldPath)),s=null===(n=rD(BA(e.firestore,tD))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===s?null:VE(s,BI(e._query),r,!0).request},_internalQueryToProtoQueryTarget:function(e){var t;const n=null===(t=rD(BA(e.firestore,tD))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:UE(n,jI(e._query))._t},_isBase64Available:function(){return"undefined"!=typeof atob},_logWarn:Ew,_validateIsNotUsedTogether:FA,addDoc:vN,aggregateFieldEqual:function(e,t){var n,r;return e instanceof oD&&t instanceof oD&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())},aggregateQuerySnapshotEqual:function(e,t){return YA(e.query,t.query)&&yd(e.data(),t.data())},and:function(...e){return e.forEach(e=>sN("and",e)),WD._create("and",e)},arrayRemove:function(...e){return new SD("arrayRemove",e)},arrayUnion:function(...e){return new ED("arrayUnion",e)},average:function(e){return new oD("avg",PD("average",e))},clearIndexedDbPersistence:function(e){if(e._initialized&&!e._terminated)throw new Dw(Aw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Nw;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!pb.D())return Promise.resolve();const t=e+"main";await pb.delete(t)}(Bk(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}}),t.promise},collection:QA,collectionGroup:function(e,t){if(e=BA(e,zA),MA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Dw(Aw.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new GA(e,null,(n=t,new PI(Ww.emptyPath(),n)));var n},connectFirestoreEmulator:HA,count:cN,deleteAllPersistentCacheIndexes:function(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=Cw(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await kA(e)))})(rD(e._firestore)).then(e=>Iw("deleting all persistent cache indexes succeeded")).catch(e=>Ew("deleting all persistent cache indexes failed",e))},deleteDoc:yN,deleteField:
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return new _D("deleteField")},disableNetwork:function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await SA(e),n=await xA(e);return t.setNetworkEnabled(!1),async function(e){const t=Cw(e);t.L_.add(0),await Ox(t),t.q_.set("Offline")}(n)})}(rD(e=BA(e,tD)))},disablePersistentCacheIndexAutoCreation:function(e){FN(e,!1)},doc:JA,documentId:function(){return new lD("__name__")},enableIndexedDbPersistence:function(e,t){Ew("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return iD(e,pA.provider,{build:e=>new dA(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()},enableMultiTabIndexedDbPersistence:async function(e){Ew("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();iD(e,pA.provider,{build:e=>new fA(e,t.cacheSizeBytes)})},enableNetwork:function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await SA(e),n=await xA(e);return t.setNetworkEnabled(!0),function(e){const t=Cw(e);return t.L_.delete(0),Rx(t)}(n)})}(rD(e=BA(e,tD)))},enablePersistentCacheIndexAutoCreation:function(e){FN(e,!0)},endAt:function(...e){return ZD._create("endAt",e,!0)},endBefore:function(...e){return ZD._create("endBefore",e,!1)},ensureFirestoreConfigured:rD,executeWrite:bN,getAggregateFromServer:IN,getCountFromServer:function(e){return IN(e,{count:cN()})},getDoc:
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){e=BA(e,KA);const t=BA(e.firestore,tD);return NA(rD(t),e._key).then(n=>_N(t,e,n))},getDocFromCache:function(e){e=BA(e,KA);const t=BA(e.firestore,tD),n=rD(t),r=new pN(t);return function(e,t){const n=new Nw;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=Cw(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Dw(Aw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){const e=cC(r,`Failed to get document '${t} from cache`);n.reject(e)}}(await kA(e),t,n)),n.promise}(n,e._key).then(n=>new uN(t,r,e._key,n,new lN(null!==n&&n.hasLocalMutations,!0),e.converter))},getDocFromServer:function(e){e=BA(e,KA);const t=BA(e.firestore,tD);return NA(rD(t),e._key,{source:"server"}).then(n=>_N(t,e,n))},getDocs:function(e){e=BA(e,GA);const t=BA(e.firestore,tD),n=rD(t),r=new pN(t);return qD(e._query),RA(n,e._query).then(n=>new dN(t,r,e,n))},getDocsFromCache:function(e){e=BA(e,GA);const t=BA(e.firestore,tD),n=rD(t),r=new pN(t);return function(e,t){const n=new Nw;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Zk(e,t,!0),s=new AC(t,r.Ts),i=s.ma(r.documents),o=s.applyChanges(i,!1);n.resolve(o.snapshot)}catch(r){const e=cC(r,`Failed to execute query '${t} against cache`);n.reject(e)}}(await kA(e),t,n)),n.promise}(n,e._query).then(n=>new dN(t,r,e,n))},getDocsFromServer:function(e){e=BA(e,GA);const t=BA(e.firestore,tD),n=rD(t),r=new pN(t);return RA(n,e._query,{source:"server"}).then(n=>new dN(t,r,e,n))},getFirestore:nD,getPersistentCacheIndexManager:function(e){var t;e=BA(e,tD);const n=UN.get(e);if(n)return n;if("persistent"!==(null===(t=rD(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new MN(e);return UN.set(e,r),r},increment:function(e){return new kD("increment",e)},initializeFirestore:function(e,t,n){n||(n="(default)");const r=Mf(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n});if(yd(r.getOptions(n),t))return e;throw new Dw(Aw.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new Dw(Aw.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Dw(Aw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})},limit:function(e){return qA("limit",e),YD._create("limit",e,"F")},limitToLast:function(e){return qA("limitToLast",e),YD._create("limitToLast",e,"L")},loadBundle:function(e,t){const n=rD(e=BA(e,tD)),r=new eD;return OA(n,e._databaseId,t,r),r},memoryEagerGarbageCollector:function(){return new SN},memoryLocalCache:function(e){return new TN(e)},memoryLruGarbageCollector:function(e){return new kN(null==e?void 0:e.cacheSizeBytes)},namedQuery:function(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=Cw(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Gr.getNamedQuery(e,t))}(await kA(e),t))}(rD(e=BA(e,tD)),t).then(t=>t?new GA(e,null,t.query):null)},onSnapshot:wN,onSnapshotsInSync:function(e,t){return function(e,t){const n=new gA(t);return e.asyncQueue.enqueueAndForget(async()=>{return t=await DA(e),r=n,Cw(t).Y_.add(r),void r.next();var t,r}),()=>{n.Za(),e.asyncQueue.enqueueAndForget(async()=>{return t=await DA(e),r=n,void Cw(t).Y_.delete(r);var t,r})}}(rD(e=BA(e,tD)),ZA(t)?t:{next:t})},or:function(...e){return e.forEach(e=>sN("or",e)),WD._create("or",e)},orderBy:JD,persistentLocalCache:function(e){return new EN(e)},persistentMultipleTabManager:function(){return new CN},persistentSingleTabManager:AN,query:HD,queryEqual:YA,refEqual:function(e,t){return e=Ed(e),t=Ed(t),(e instanceof KA||e instanceof WA)&&(t instanceof KA||t instanceof WA)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},runTransaction:function(e,t,n){e=BA(e,tD);const r=Object.assign(Object.assign({},DN),n);return function(e){if(e.maxAttempts<1)throw new Dw(Aw.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Nw;return e.asyncQueue.enqueueAndForget(async()=>{const s=await AA(e);new wA(e.asyncQueue,s,n,t,r).au()}),r.promise}(rD(e),n=>t(new ON(e,n)),r)},serverTimestamp:PN,setDoc:mN,setIndexConfiguration:
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){const n=rD(e=BA(e,tD));return n._uninitializedComponentsProvider&&"memory"!==n._uninitializedComponentsProvider._offline.kind?function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=Cw(e),r=n.indexManager,s=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>
/**
      * @license
      * Copyright 2017 Google LLC
      *
      * Licensed under the Apache License, Version 2.0 (the "License");
      * you may not use this file except in compliance with the License.
      * You may obtain a copy of the License at
      *
      *   http://www.apache.org/licenses/LICENSE-2.0
      *
      * Unless required by applicable law or agreed to in writing, software
      * distributed under the License is distributed on an "AS IS" BASIS,
      * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      * See the License for the specific language governing permissions and
      * limitations under the License.
      */function(e,t,n,r,s){e=[...e],t=[...t],e.sort(n),t.sort(n);const i=e.length,o=t.length;let a=0,c=0;for(;a<o&&c<i;){const i=n(e[c],t[a]);i<0?s(e[c++]):i>0?r(t[a++]):(a++,c++)}for(;a<o;)r(t[a++]);for(;c<i;)s(e[c++])}(n,t,tb,t=>{s.push(r.addFieldIndex(e,t))},t=>{s.push(r.deleteFieldIndex(e,t))})).next(()=>db.waitFor(s)))}(await kA(e),t))}(n,function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(t){throw new Dw(Aw.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==t?void 0:t.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=LN(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=MD("setIndexConfiguration",LN(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new nb(e,2)):"ASCENDING"===n.order?t.push(new nb(e,0)):"DESCENDING"===n.order&&t.push(new nb(e,1))}n.push(new Xw(Xw.UNKNOWN_ID,e,t,sb.empty()))}return n}(t)):(Ew("Cannot enable indexes when persistence is disabled"),Promise.resolve())},setLogLevel:function(e){bw.setLogLevel(e)},snapshotEqual:function(e,t){return e instanceof uN&&t instanceof uN?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dN&&t instanceof dN&&e._firestore===t._firestore&&YA(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},startAfter:function(...e){return XD._create("startAfter",e,!1)},startAt:function(...e){return XD._create("startAt",e,!0)},sum:function(e){return new oD("sum",PD("sum",e))},terminate:function(e){return function(e,t,n=Af){Mf(e,t).clearInstance(n)}(e.app,"firestore",e._databaseId.database),e._delete()},updateDoc:gN,vector:function(e){return new dD(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,waitForPendingWrites:function(e){return function(e){const t=new Nw;return e.asyncQueue.enqueueAndForget(async()=>async function(t,n){const r=Cw(t);jx(r.remoteStore)||Iw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Cw(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(r.localStore);if(-1===e)return void n.resolve();const t=r.ka.get(e)||[];t.push(n),r.ka.set(e,t)}catch(e){const r=cC(e,"Initialization of waitForPendingWrites() operation failed");n.reject(r)}}(await CA(e),t)),t.promise}(rD(e=BA(e,tD)))},where:KD,writeBatch:function(e){return rD(e=BA(e,tD)),new NN(e,t=>bN(e,t))}},Symbol.toStringTag,{value:"Module"}));var qN={};const $N=[Ql,eu,Iv,kv,xv,Cv,Av,tw,nw,sw,hc(async()=>{let e,t;{const i="true"===qN.FIREBASE_USE_EMULATOR||!1,o=mc(),a=i?{apiKey:"demo-api-key",authDomain:"demo-test.firebaseapp.com",projectId:"demo-test",storageBucket:"demo-test.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:demo123"}:{apiKey:o.public.firebase.apiKey||"AIzaSyBTvdrOvdcdhNrONF_b9uXeInoqvVmKYfY",authDomain:o.public.firebase.authDomain||"haircut-reservation-dev.firebaseapp.com",projectId:o.public.firebase.projectId||"haircut-reservation-dev",storageBucket:o.public.firebase.storageBucket||"haircut-reservation-dev.firebasestorage.app",messagingSenderId:o.public.firebase.messagingSenderId||"509197594275",appId:o.public.firebase.appId||"1:509197594275:web:c2aab827763cddcf441916"};try{const s=Bf(a),o=mv(s),c=nD(s);if(!i){const{setPersistence:r,browserLocalPersistence:s}=([e,t]=rc(()=>Ll(()=>Promise.resolve().then(()=>yv),void 0,import.meta.url)),e=await e,t(),e);try{[e,t]=rc(()=>r(o,s)),await e,t()}catch(n){}}const l=null;if(i){const{connectAuthEmulator:n}=([e,t]=rc(()=>Ll(()=>Promise.resolve().then(()=>yv),void 0,import.meta.url)),e=await e,t(),e),{connectFirestoreEmulator:s}=([e,t]=rc(()=>Ll(()=>Promise.resolve().then(()=>BN),void 0,import.meta.url)),e=await e,t(),e);try{n(o,`http://${qN.FIREBASE_AUTH_EMULATOR_HOST||"localhost:9099"}`);const e=qN.FIRESTORE_EMULATOR_HOST||"localhost:8080",[t,r]=e.split(":");s(c,t,parseInt(r))}catch(r){}}return{provide:{firebaseApp:s,firebaseAuth:o,firebaseFirestore:c,firebaseAnalytics:l}}}catch(s){throw s}}return{}}),hc(async()=>{try{const{$firebaseAuth:e}=pc();if(!e)return;Ng(e,e=>{e?(localStorage.setItem("lastActivity",Date.now().toString()),localStorage.setItem("firebase-auth-user",JSON.stringify({uid:e.uid,email:e.email,displayName:e.displayName,timestamp:Date.now()}))):(localStorage.removeItem("lastActivity"),localStorage.removeItem("firebase-auth-user"))})}catch(e){}})],zN=(e="RouteProvider")=>Fn({name:e,props:{route:{type:Object,required:!0},vnode:Object,vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(e){const t=e.renderKey,n=e.route,r={};for(const s in e.route)Object.defineProperty(r,s,{get:()=>t===e.renderKey?e.route[s]:n[s],enumerable:!0});return Kr(Nc,ft(r)),()=>e.vnode?Di(e.vnode,{ref:e.vnodeRef}):e.vnode}}),HN=zN(),GN=new WeakMap,KN=Fn({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(e,{attrs:t,slots:n,expose:r}){const s=pc(),i=St(),o=Wr(Nc,null);let a;r({pageRef:i});const c=Wr(Dc,null);let l;const u=s.deferHydration();if(s.isHydrating){const e=s.hooks.hookOnce("app:error",u);Rc().beforeEach(e)}e.pageKey&&bs(()=>e.pageKey,(e,t)=>{e!==t&&s.callHook("page:loading:start")});let h=!1;{const e=Rc().beforeResolve(()=>{h=!1});dr(()=>{e()})}return()=>Di(Lh,{name:e.name,route:e.route,...t},{default:t=>{const r=function(e,t,n){if(!e)return!1;const r=t.matched.findIndex(e=>{var t;return(null==(t=e.components)?void 0:t.default)===(null==n?void 0:n.type)});if(!r||-1===r)return!1;return t.matched.slice(0,r).some((t,n)=>{var r,s,i;return(null==(r=t.components)?void 0:r.default)!==(null==(i=null==(s=e.matched[n])?void 0:s.components)?void 0:i.default)})||n&&Bh({route:t,Component:n})!==Bh({route:e,Component:n})}(o,t.route,t.Component),d=o&&o.matched.length===t.route.matched.length;if(!t.Component)return l&&!d?l:void u();if(l&&c&&!c.isCurrent(t.route))return l;if(r&&o&&(!c||(null==c?void 0:c.isCurrent(o))))return d?l:null;const f=Bh(t,e.pageKey),p=function(e,t,n){if(!e)return!1;return t.matched.findIndex(e=>{var t;return(null==(t=e.components)?void 0:t.default)===(null==n?void 0:n.type)})<t.matched.length-1}(o,t.route,t.Component);s.isHydrating||a!==f||p||Yt(()=>{h=!0,s.callHook("page:loading:end")}),a=f;const m=!!(e.transition??t.route.meta.pageTransition),g=m&&function(e){const t=e.filter(Boolean).map(e=>({...e,onAfterLeave:e.onAfterLeave?qh(e.onAfterLeave):void 0}));return Ec(...t)}([e.transition,t.route.meta.pageTransition,sc,{onAfterLeave(){delete s._runningTransition,s.callHook("page:transition:finish",t.Component)}}]),y=e.keepalive??t.route.meta.keepalive??false;return l=zh(m&&g,((e,t)=>({default:()=>e?Di(Xn,!0===e?{}:e,t):t}))(y,Di(Ls,{suspensible:!0,onPending:()=>{m&&(s._runningTransition=!0),s.callHook("page:start",t.Component)},onResolve:()=>{Yt(()=>s.callHook("page:finish",t.Component).then(()=>{if(!h&&!p)return h=!0,s.callHook("page:loading:end")}).finally(u))}},{default:()=>{const e={key:f||void 0,vnode:n.default?WN(n.default,t):t.Component,route:t.route,renderKey:f||void 0,trackRootNodes:m,vnodeRef:i};if(!y)return Di(HN,e);const r=t.Component.type,s=r;let o=GN.get(s);return o||(o=zN(r.name||r.__name),GN.set(s,o)),Di(o,e)}}))).default(),l}})}});function WN(e,t){const n=e(t);return 1===n.length?Di(n[0]):Di(Bs,void 0,n)}const QN=Fn({name:"LayoutLoader",inheritAttrs:!1,props:{name:String,layoutProps:Object},setup:(e,t)=>()=>Di(rw[e.name],e.layoutProps,t.slots)}),JN=Fn({name:"NuxtLayout",inheritAttrs:!1,props:{name:{type:[String,Boolean,Object],default:null},fallback:{type:[String,Object],default:null}},setup(e,t){const n=pc(),r=Wr(Nc),s=!r||r===Oc()?Fh():r,i=Ai(()=>{let t=At(e.name)??(null==s?void 0:s.meta.layout)??"default";return t&&!(t in rw)&&e.fallback&&(t=At(e.fallback)),t}),o=kt();t.expose({layoutRef:o});const a=n.deferHydration();if(n.isHydrating){const e=n.hooks.hookOnce("app:error",a);Rc().beforeEach(e)}let c;return()=>{const n=i.value&&i.value in rw,r=(null==s?void 0:s.meta.layoutTransition)??false,l=c;return c=i.value,zh(n&&r,{default:()=>Di(Ls,{suspensible:!0,onResolve:()=>{Yt(a)}},{default:()=>Di(YN,{layoutProps:di(t.attrs,{ref:o}),key:i.value||void 0,name:i.value,shouldProvide:!e.name,isRenderingNewLayout:e=>e!==l&&e===i.value,hasTransition:!!r},t.slots)})}).default()}}}),YN=Fn({name:"NuxtLayoutProvider",inheritAttrs:!1,props:{name:{type:[String,Boolean]},layoutProps:{type:Object},hasTransition:{type:Boolean},shouldProvide:{type:Boolean},isRenderingNewLayout:{type:Function,required:!0}},setup(e,t){const n=e.name;e.shouldProvide&&Kr(Dc,{isCurrent:e=>n===(e.meta.layout??"default")});const r=Wr(Nc);if(r&&r===Oc()){const t=Fh(),n={};for(const s in t){const i=s;Object.defineProperty(n,i,{enumerable:!0,get:()=>e.isRenderingNewLayout(e.name)?t[i]:r[i]})}Kr(Nc,ft(n))}return()=>{var r,s;return!n||"string"==typeof n&&!(n in rw)?null==(s=(r=t.slots).default)?void 0:s.call(r):Di(QN,{key:n,layoutProps:e.layoutProps,name:n},t.slots)}}}),XN=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};const ZN=XN({},[["render",function(e,t){const n=KN,r=JN;return Ks(),Zs(r,null,{default:ln(()=>[ii(n)]),_:1})}]]),eR={class:"error-page"},tR={class:"container"},nR={class:"row justify-content-center"},rR={class:"col-md-8 col-lg-6"},sR={class:"error-card text-center"},iR={class:"error-icon mb-4"},oR={key:0,class:"bi bi-compass display-1 text-warning"},aR={key:1,class:"bi bi-exclamation-triangle display-1 text-danger"},cR={key:2,class:"bi bi-shield-exclamation display-1 text-info"},lR={class:"error-title mb-3"},uR={class:"error-description text-muted mb-4"},hR={class:"error-actions"},dR=["disabled"],fR={class:"support-info mt-5 pt-4 border-top"},pR={class:"small text-muted"},mR=XN(Fn({__name:"error",props:{error:{}},setup(e){const t=e,n=window.history.length>1,r=()=>{const{statusCode:e}=t.error;switch(e){case 404:return"";case 403:return"";case 500:return"";case 503:return"";default:return""}},s=()=>{const{statusCode:e,statusMessage:n}=t.error;switch(e){case 404:return"";case 403:return"";case 500:return"";case 503:return"";default:return n||""}},i=()=>{window.history.length>1?window.history.back():window.location.href="/"},o=()=>{window.location.reload()};return Ol({title:` ${t.error.statusCode} - Beauty Salon Reservation`,meta:[{name:"robots",content:"noindex, nofollow"}]}),(e,t)=>{const a=Xv;return Ks(),Xs("div",eR,[si("div",tR,[si("div",nR,[si("div",rR,[si("div",sR,[si("div",iR,[404===e.error.statusCode?(Ks(),Xs("i",oR)):e.error.statusCode>=500?(Ks(),Xs("i",aR)):(Ks(),Xs("i",cR))]),si("h1",lR,X(r()),1),si("p",uR,X(s()),1),ci("",!0),si("div",hR,[si("button",{class:"btn btn-primary me-3",disabled:!At(n),onClick:i},t[1]||(t[1]=[si("i",{class:"bi bi-arrow-left me-2"},null,-1),ai("  ",-1)]),8,dR),ii(a,{to:"/",class:"btn btn-outline-primary me-3"},{default:ln(()=>t[2]||(t[2]=[si("i",{class:"bi bi-house me-2"},null,-1),ai("  ",-1)])),_:1,__:[2]}),si("button",{class:"btn btn-outline-secondary",onClick:o},t[3]||(t[3]=[si("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),ai("  ",-1)]))]),si("div",fR,[t[4]||(t[4]=si("p",{class:"small text-muted mb-2"},"  ",-1)),si("p",pR," ID: "+X(`${Date.now().toString(36)}-${Math.random().toString(36).substr(2,5)}`.toUpperCase()),1)])])])])])])}}}),[["__scopeId","data-v-442c3d4f"]]),gR={key:0},yR={__name:"nuxt-root",setup(e){const t=()=>null,n=pc(),r=n.deferHydration();if(n.isHydrating){const e=n.hooks.hookOnce("app:error",r);Rc().beforeEach(e)}const s=!1;Kr(Nc,Oc()),n.hooks.callHookWith(e=>e.map(e=>e()),"vue:setup");const i=Uc(),o=/bot\b|chrome-lighthouse|facebookexternalhit|google\b/i;yr((e,t,r)=>(n.hooks.callHook("vue:error",e,t,r).catch(e=>{}),o.test(navigator.userAgent)?(n.hooks.callHook("app:error",e),!1):Bc(e)&&(e.fatal||e.unhandled)?(n.runWithContext(()=>Vc(e)),!1):void 0));const a=!1;return(e,n)=>(Ks(),Zs(Ls,{onResolve:At(r)},{default:ln(()=>{return[At(false)?(Ks(),Xs("div",gR)):At(i)?(Ks(),Zs(At(mR),{key:1,error:At(i)},null,8,["error"])):At(a)?(Ks(),Zs(At(t),{key:2,context:At(a)},null,8,["context"])):At(s)?(Ks(),Zs((e=At(s),v(e)?_r(vr,e,!1)||e:e||br),{key:3})):(Ks(),Zs(At(ZN),{key:4}))];var e}),_:1},8,["onResolve"]))}};let vR;{let e;vR=async function(){var t,n;if(e)return e;const r=Boolean((null==(t=window.__NUXT__)?void 0:t.serverRendered)??"true"===(null==(n=document.getElementById("__NUXT_DATA__"))?void 0:n.dataset.ssr))?((...e)=>{const t=Bo().createApp(...e),{mount:n}=t;return t.mount=e=>{const t=$o(e);if(t)return n(t,!0,qo(t))},t})(yR):((...e)=>{const t=jo().createApp(...e),{mount:n}=t;return t.mount=e=>{const r=$o(e);if(!r)return;const s=t._component;y(s)||s.render||s.template||(s.template=r.innerHTML),1===r.nodeType&&(r.textContent="");const i=n(r,!1,qo(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t})(yR),s=function(e){var t;let n=0;const r={_id:e.id||oc||"nuxt-app",_scope:se(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.17.7"},get vue(){return r.vueApp.version}},payload:ft({...(null==(t=e.ssrContext)?void 0:t.payload)||{},data:ft({}),state:dt({}),once:new Set,_errors:ft({})}),static:{data:{}},runWithContext:e=>r._scope.active&&!ie()?r._scope.run(()=>dc(r,e)):dc(r,e),isHydrating:!0,deferHydration(){if(!r.isHydrating)return()=>{};n++;let e=!1;return()=>{if(!e)return e=!0,n--,0===n?(r.isHydrating=!1,r.callHook("app:suspense:resolve")):void 0}},_asyncDataPromises:{},_asyncData:ft({}),_payloadRevivers:{},...e};{const e=window.__NUXT__;if(e)for(const t in e)switch(t){case"data":case"state":case"_errors":Object.assign(r.payload[t],e[t]);break;default:r.payload[t]=e[t]}}r.hooks=Ya(),r.hook=r.hooks.hook,r.callHook=r.hooks.callHook,r.provide=(e,t)=>{const n="$"+e;gc(r,n,t),gc(r.vueApp.config.globalProperties,n,t)},gc(r.vueApp,"$nuxt",r),gc(r.vueApp.config.globalProperties,"$nuxt",r);{window.addEventListener("vite:preloadError",e=>{r.callHook("app:chunkError",{error:e.payload}),e.payload.message.includes("Unable to preload CSS")&&e.preventDefault()}),window.useNuxtApp||(window.useNuxtApp=pc);const e=r.hook("app:error",(...e)=>{});r.hook("app:mounted",e)}const s=r.payload.config;return r.provide("config",s),r}({vueApp:r});async function i(e){var t;await s.callHook("app:error",e),(t=s.payload).error||(t.error=qc(e))}r.config.errorHandler=i,s.hook("app:suspense:resolve",()=>{r.config.errorHandler===i&&(r.config.errorHandler=void 0)});try{await async function(e,t){const n=new Set,r=[],s=[],i=[];let o=0;async function a(c){var l;const u=(null==(l=c.dependsOn)?void 0:l.filter(e=>t.some(t=>t._name===e)&&!n.has(e)))??[];if(u.length>0)r.push([new Set(u),c]);else{const t=async function(e,t){if("function"==typeof t){const{provide:n}=await e.runWithContext(()=>t(e))||{};if(n&&"object"==typeof n)for(const t in n)e.provide(t,n[t])}}(e,c).then(async()=>{c._name&&(n.add(c._name),await Promise.all(r.map(async([e,t])=>{e.has(c._name)&&(e.delete(c._name),0===e.size&&(o++,await a(t)))})))});c.parallel?s.push(t.catch(e=>i.push(e))):await t}}for(const c of t)uc(e,c);for(const c of t)await a(c);if(await Promise.all(s),o)for(let c=0;c<o;c++)await Promise.all(s);if(i.length)throw i[0]}(s,$N)}catch(o){i(o)}try{await s.hooks.callHook("app:created",r),await s.hooks.callHook("app:beforeMount",r),r.mount("#__nuxt"),await s.hooks.callHook("app:mounted",r),await Yt()}catch(o){i(o)}return r},e=vR().catch(e=>{throw e})}var wR={};function bR(){var e,t,n;try{const s=qf(),i=mv(s),o=nD(s);if("local"===wR.FIREBASE_ENV)try{if(!("config"in i)||!(null==(e=i.config)?void 0:e.emulator)){Cm(i,`http://${wR.FIREBASE_AUTH_EMULATOR_HOST||"localhost:9099"}`,{disableWarnings:!0})}const r=o._settings;if(!(null==(t=null==r?void 0:r.host)?void 0:t.includes("localhost"))&&!(null==(n=null==r?void 0:r.host)?void 0:n.includes("firebase-emulator"))){const e=wR.FIREBASE_FIRESTORE_EMULATOR_HOST||"localhost:8080",[t,n]=e.split(":");t&&n&&HA(o,t,parseInt(n))}}catch(r){}return{auth:i,firestore:o}}catch(r){throw r}}const _R=Qv("auth",{state:()=>({user:null,loading:!1,error:null}),getters:{isAuthenticated:e=>!!e.user,isLoading:e=>e.loading,userEmail:e=>{var t;return(null==(t=e.user)?void 0:t.email)||""},userName:e=>{var t,n;return(null==(t=e.user)?void 0:t.displayName)||(null==(n=e.user)?void 0:n.email)||"User"}},actions:{setUser(e){this.user=e,this.error=null},setLoading(e){this.loading=e},setError(e){this.error=e},async checkAuthState(){this.setLoading(!0);try{const{auth:t}=bR();if(!wR.FIREBASE_ENV||"local"!==wR.FIREBASE_ENV)try{const{setPersistence:e,browserLocalPersistence:n}=await Ll(async()=>{const{setPersistence:e,browserLocalPersistence:t}=await Promise.resolve().then(()=>yv);return{setPersistence:e,browserLocalPersistence:t}},void 0,import.meta.url);await e(t,n)}catch(e){}return new Promise(e=>{const n=t.onAuthStateChanged(async t=>{try{t?(this.setUser(t),localStorage.setItem("lastActivity",Date.now().toString()),e(!0)):(this.setUser(null),e(!1))}catch(r){this.setError(""),e(!1)}finally{this.setLoading(!1),n()}})})}catch(t){return this.setError(""),this.setLoading(!1),!1}}}}),IR=Object.freeze(Object.defineProperty({__proto__:null,getFirebaseInstances:bR,useAuthStore:_R},Symbol.toStringTag,{value:"Module"})),TR={class:"min-h-screen bg-gray-50 flex items-center justify-center"},ER={__name:"index",setup(e){const t=_R();return lr(async()=>{await t.checkAuthState()?await Lc("/calendar"):await Lc("/login")}),(e,t)=>(Ks(),Xs("div",TR,t[0]||(t[0]=[si("div",{class:"text-center"},[si("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),si("p",{class:"mt-4 text-gray-600"}," ... ")],-1)])))}},SR=Object.freeze(Object.defineProperty({__proto__:null,default:ER},Symbol.toStringTag,{value:"Module"})),kR={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 px-4"},xR={class:"mx-auto w-full max-w-md"},CR={class:"bg-white shadow rounded-lg px-6 py-8"},AR={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},DR=["disabled"],NR={key:0},RR={key:1},OR={__name:"login",setup(e){Ol({title:" - "});const t=St(!1),n=St(""),r=dt({email:"",password:""}),s=async()=>{t.value=!0,n.value="";try{const{$firebaseAuth:t}=pc(),n=t;try{const{setPersistence:e,browserLocalPersistence:t}=await Ll(async()=>{const{setPersistence:e,browserLocalPersistence:t}=await Promise.resolve().then(()=>yv);return{setPersistence:e,browserLocalPersistence:t}},void 0,import.meta.url);await e(n,t)}catch(e){}const s=await bg(n,r.email,r.password),i=_R();i.setUser(s.user),localStorage.setItem("lastActivity",Date.now().toString()),await i.checkAuthState();const o=2e3;await new Promise(e=>setTimeout(e,o));n.currentUser;await Lc("/")}catch(s){n.value=i(s.code)}finally{t.value=!1}},i=e=>{switch(e){case"auth/user-not-found":return"";case"auth/wrong-password":return"";case"auth/invalid-email":return"";case"auth/user-disabled":return"";default:return""}};return(e,i)=>(Ks(),Xs("div",kR,[si("div",xR,[i[4]||(i[4]=si("div",{class:"text-center mb-8"},[si("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"  "),si("p",{class:"text-gray-600"},"  ")],-1)),si("div",CR,[si("form",{class:"space-y-6",onSubmit:Mo(s,["prevent"])},[At(n)?(Ks(),Xs("div",AR,X(At(n)),1)):ci("",!0),si("div",null,[i[2]||(i[2]=si("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"email","onUpdate:modelValue":i[0]||(i[0]=e=>At(r).email=e),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""},null,512),[[xo,At(r).email]])]),si("div",null,[i[3]||(i[3]=si("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"password","onUpdate:modelValue":i[1]||(i[1]=e=>At(r).password=e),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""},null,512),[[xo,At(r).password]])]),si("button",{type:"submit",disabled:At(t),class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[At(t)?(Ks(),Xs("span",NR,"...")):(Ks(),Xs("span",RR,""))],8,DR)],32)])])]))}},PR=Object.freeze(Object.defineProperty({__proto__:null,default:OR},Symbol.toStringTag,{value:"Module"})),LR={cut:60,color:90,perm:120,straight:180,mesh:90,other:60},MR=(e,t)=>{const[n=0,r=0]=e.split(":").map(Number),s=60*n+r+t,i=s%60;return`${Math.floor(s/60).toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},FR=()=>{const e=St([]),t=St(!1),n=St(null);let r=null;const s=()=>{try{const t=mv().currentUser;if(!t)return void(n.value="");const s=nD(),i=HD(QA(s,"reservations"),KD("userId","==",t.uid),JD("date","asc"),JD("startTime","asc"));r=wN(i,t=>{e.value=t.docs.map(e=>{const t=e.data();return t.timeSlot&&!t.startTime&&(t.startTime=t.timeSlot,t.duration=t.duration||LR[t.category]||60),{id:e.id,...t}})},e=>{const t=e instanceof Error?e.message:"Unknown error";n.value=`: ${t}`})}catch(t){const e=t instanceof Error?t.message:"Unknown error";n.value=`: ${e}`}};return lr(async()=>{try{const e=mv();e.currentUser?s():n.value=""}catch(e){s()}}),fr(()=>{r&&r()}),{reservations:e,loading:t,error:n,addReservation:async e=>{t.value=!0,n.value=null;try{const t=mv().currentUser;if(!t)throw new Error("");const n=QA(nD(),"reservations"),r={...e,userId:t.uid,createdAt:PN(),updatedAt:PN()};return(await vN(n,r)).id}catch(r){const e=r instanceof Error?r.message:"Unknown error";throw n.value=`: ${e}`,r}finally{t.value=!1}},updateReservation:async(e,r)=>{t.value=!0,n.value=null;try{const t=JA(nD(),"reservations",e),n={...r};await gN(t,{...n,updatedAt:PN()})}catch(s){const e=s instanceof Error?s.message:"Unknown error";throw n.value=`: ${e}`,s}finally{t.value=!1}},deleteReservation:async e=>{t.value=!0,n.value=null;try{const t=JA(nD(),"reservations",e);await yN(t)}catch(r){const e=r instanceof Error?r.message:"Unknown error";throw n.value=`: ${e}`,r}finally{t.value=!1}},calculateEndTime:MR,DEFAULT_DURATIONS:LR}},UR={class:"bg-white shadow-sm border-b sticky top-0 z-40"},VR={class:"px-2 sm:px-4 py-2 sm:py-3"},jR={class:"flex flex-row items-center gap-2 sm:gap-0"},BR={class:"flex items-center gap-2 sm:gap-3 flex-1 sm:justify-center justify-start order-1 sm:order-1"},qR={class:"font-semibold text-gray-900 px-1 sm:px-2",style:{"font-size":"var(--calendar-month-text)"}},$R={class:"flex justify-end gap-1 sm:gap-2 order-2 sm:order-2"},zR={__name:"CalendarHeader",props:{currentMonthText:{type:String,required:!0},showStats:{type:Boolean,default:!1}},emits:["previous-days","next-days","go-to-today","show-calendar-modal","open-tag-modal","show-stats","logout"],setup(e,{emit:t}){const n=t,r=St(!1),s=St(null),i=St({}),o=()=>{if(!r.value&&s.value){const e=s.value.getBoundingClientRect();i.value={top:`${e.bottom+4}px`,right:window.innerWidth-e.right+"px"}}r.value=!r.value},a=()=>{r.value=!1},c=()=>{a(),n("open-tag-modal")},l=()=>{a(),n("show-stats")},u=()=>{a(),n("logout")},h=e=>{e.target.closest(".relative")||(r.value=!1)};return lr(()=>{document.addEventListener("click",h)}),fr(()=>{document.removeEventListener("click",h)}),(t,n)=>(Ks(),Xs("div",null,[si("header",UR,[si("div",VR,[un(si("div",jR,[si("div",BR,[si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:n[0]||(n[0]=e=>t.$emit("previous-days"))},n[5]||(n[5]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),si("h1",qR,X(e.currentMonthText),1),si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:n[1]||(n[1]=e=>t.$emit("next-days"))},n[6]||(n[6]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),si("div",$R,[si("button",{class:"px-2 sm:px-3 py-1 text-xs border border-gray-800 rounded-full hover:bg-gray-100 transition-colors flex items-center gap-1",onClick:n[2]||(n[2]=e=>t.$emit("show-calendar-modal"))},n[7]||(n[7]=[si("svg",{class:"w-3 h-3 sm:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),si("span",{class:"hidden sm:inline"},"",-1)])),si("button",{class:"px-2 sm:px-3 py-1 text-xs border border-gray-800 rounded-full hover:bg-gray-100 transition-colors flex items-center gap-1",onClick:n[3]||(n[3]=e=>t.$emit("go-to-today"))},n[8]||(n[8]=[si("svg",{class:"w-3 h-3 sm:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),si("span",{class:"hidden sm:inline"},"",-1),si("span",{class:"sm:hidden"},"",-1)])),si("div",{ref_key:"dropdownContainer",ref:s,class:"relative"},[si("button",{class:"p-1.5 border border-gray-800 rounded-full hover:bg-gray-100 transition-colors",onClick:o},n[9]||(n[9]=[si("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)]))],512)])],512),[[ro,!e.showStats]])])]),(Ks(),Zs(_n,{to:"body"},[At(r)?(Ks(),Xs("div",{key:0,class:"fixed inset-0 z-[9999]",onClick:a},[si("div",{class:"absolute bg-white rounded-lg shadow-lg border w-40 sm:w-48",style:B(At(i)),onClick:n[4]||(n[4]=Mo(()=>{},["stop"]))},[si("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center",onClick:c},n[10]||(n[10]=[si("svg",{class:"w-4 h-4 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),ai("  ",-1)])),si("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center",onClick:l},n[11]||(n[11]=[si("svg",{class:"w-4 h-4 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),ai("  ",-1)])),si("button",{class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center",onClick:u},n[12]||(n[12]=[si("svg",{class:"w-4 h-4 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),ai("  ",-1)]))],4)])):ci("",!0)]))]))}},HR={key:0,class:"max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6"},GR={class:"bg-white rounded-lg shadow p-3 sm:p-6"},KR={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-3"},WR={class:"flex items-center gap-2 sm:gap-4"},QR={class:"text-base sm:text-lg font-semibold text-gray-900"},JR={class:"sm:hidden"},YR={class:"hidden sm:inline"},XR={class:"flex items-center justify-center gap-2"},ZR={class:"text-sm font-medium min-w-[100px] text-center"},eO={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4"},tO={class:"bg-gray-50 rounded-lg p-4 text-center sm:text-left"},nO={class:"text-xl sm:text-2xl font-bold"},rO={class:"bg-green-50 rounded-lg p-4 text-center sm:text-left"},sO={class:"text-xl sm:text-2xl font-bold text-green-700"},iO={class:"bg-blue-50 rounded-lg p-4 text-center sm:text-left"},oO={class:"text-xl sm:text-2xl font-bold text-blue-700"},aO={class:"bg-red-50 rounded-lg p-4 text-center sm:text-left"},cO={class:"text-xl sm:text-2xl font-bold text-red-700"},lO={__name:"CalendarStats",props:{showStats:{type:Boolean,default:!1},selectedMonthText:{type:String,required:!0},monthlyStats:{type:Object,required:!0,default:()=>({total:0,completed:0,active:0,cancelled:0})}},emits:["hide-stats","previous-month","next-month"],setup:(e,{emit:t})=>(t,n)=>e.showStats?(Ks(),Xs("div",HR,[si("div",GR,[si("div",KR,[si("div",WR,[si("button",{class:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm text-gray-900 hover:text-gray-800 hover:bg-gray-100 rounded transition-colors",onClick:n[0]||(n[0]=e=>t.$emit("hide-stats"))},n[3]||(n[3]=[si("svg",{class:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),si("span",{class:"hidden sm:inline"},"",-1),si("span",{class:"sm:hidden"},"",-1)])),si("h2",QR,[si("span",JR,X(e.selectedMonthText),1),si("span",YR,X(e.selectedMonthText)+"",1)])]),si("div",XR,[si("button",{class:"p-1.5 sm:p-1 hover:bg-gray-100 rounded touch-manipulation",onClick:n[1]||(n[1]=e=>t.$emit("previous-month"))},n[4]||(n[4]=[si("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),si("span",ZR,X(e.selectedMonthText),1),si("button",{class:"p-1.5 sm:p-1 hover:bg-gray-100 rounded touch-manipulation",onClick:n[2]||(n[2]=e=>t.$emit("next-month"))},n[5]||(n[5]=[si("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))])]),si("div",eO,[si("div",tO,[n[6]||(n[6]=si("div",{class:"text-xs sm:text-sm text-gray-600 mb-1"},"  ",-1)),si("div",nO,X(e.monthlyStats.total),1)]),si("div",rO,[n[7]||(n[7]=si("div",{class:"text-xs sm:text-sm text-green-600 mb-1"},"  ",-1)),si("div",sO,X(e.monthlyStats.completed),1)]),si("div",iO,[n[8]||(n[8]=si("div",{class:"text-xs sm:text-sm text-blue-600 mb-1"},"  ",-1)),si("div",oO,X(e.monthlyStats.active),1)]),si("div",aO,[n[9]||(n[9]=si("div",{class:"text-xs sm:text-sm text-red-600 mb-1"},"  ",-1)),si("div",cO,X(e.monthlyStats.cancelled),1)])])])])):ci("",!0)},uO={class:"calendar-container"},hO={class:"calendar-scroll-container overflow-x-auto"},dO={class:"bg-gray-200 min-w-max"},fO={class:"flex bg-white border-b-2 border-gray-300 sticky top-0 z-20"},pO=["onClick"],mO={class:"flex bg-gray-200"},gO={class:"relative calendar-day-content"},yO={class:"bg-white flex-1 border-l border-gray-200 first:border-l-0",style:{minWidth:"clamp(40px, 20vw, 220px)"}},vO={class:"relative calendar-day-content"},wO=["onClick"],bO={class:"font-medium truncate leading-tight",style:{fontSize:"var(--calendar-reservation-text)"}},_O={key:0,class:"ml-0.5",style:{"font-size":"10px"}},IO={key:1,class:"ml-0.5",style:{"font-size":"10px"}},TO={key:2,class:"ml-0.5 text-gray-500 hidden lg:inline"},EO=["onClick"],SO=XN({__name:"CalendarGrid",props:{showStats:{type:Boolean,default:!1},displayDays:{type:Array,required:!0},displayHours:{type:Array,default:()=>[8,9,10,11,12,13,14,15,16,17,18,19,20]},reservations:{type:Array,default:()=>[]},tags:{type:Array,default:()=>[]},isSingleDayView:{type:Boolean,default:!1},selectedSingleDate:{type:String,default:null}},emits:["edit-reservation","time-click","date-header-click"],setup(e,{emit:t}){const n=e,r=t,s=St("undefined"!=typeof window?window.innerWidth:768),i=Ai(()=>s.value>=1024?100:s.value>=768?75:50),o=Ai(()=>n.isSingleDayView?{width:"clamp(50px, 15vw, 140px)",minWidth:"50px"}:{width:"clamp(20px, 6vw, 60px)",minWidth:"20px"}),a=Ai(()=>n.isSingleDayView?{fontSize:"var(--calendar-time-text-lg)"}:{fontSize:"var(--calendar-time-text-sm)"}),c=()=>{s.value=window.innerWidth};lr(()=>{"undefined"!=typeof window&&window.addEventListener("resize",c)}),fr(()=>{"undefined"!=typeof window&&window.removeEventListener("resize",c)});const l=Ai(()=>{if(n.isSingleDayView&&n.selectedSingleDate)return[n.displayDays];const e=[];for(let t=0;t<n.displayDays.length;t+=3)e.push(n.displayDays.slice(t,t+3));return e}),u=e=>{const t=n.reservations.filter(t=>t.date===e),r={};t.forEach(e=>{const t=e.startTime;r[t]||(r[t]=[]),r[t].push(e)});const s=[];return Object.entries(r).forEach(([e,t])=>{const n=Math.min(t.length,3);t.sort((e,t)=>new Date(e.createdAt)-new Date(t.createdAt)).slice(0,3).forEach((e,t)=>{s.push({...e,horizontalIndex:t,totalAtSameTime:n})})}),s},h=()=>{const e=new Date,t=e.getHours(),n=e.getMinutes();return(t-8)*i.value+n/60*i.value},d=e=>{const t=n.tags.find(t=>t.id===e);return t&&t.color?`tag-color-${t.color}`:"tag-color-default"},f=e=>{const t=(e=>{const[t,n]=e.split(":").map(Number);return(t-8)*i.value+n/60*i.value-4})(e.startTime),n=e.totalAtSameTime||1,r=e.horizontalIndex||0,s=n>1?`calc((100% - 4px) / ${n})`:"calc(100% - 4px)",o=n>1?`calc(2px + ((100% - 4px) / ${n}) * ${r})`:"2px",a=(e.duration||30)/30*(i.value/2)-4;return{top:`${t}px`,left:o,width:s,height:`${Math.max(20,a)}px`,fontSize:"inherit"}};return(t,n)=>un((Ks(),Xs("div",uO,[si("div",hO,[si("div",dO,[(Ks(!0),Xs(Bs,null,Tr(At(l),(s,c)=>(Ks(),Xs("div",{key:`group-${c}`,class:"mb-4"},[si("div",fO,[(Ks(!0),Xs(Bs,null,Tr(s,e=>(Ks(),Xs("div",{key:`header-${e.date}`,class:"flex-1 px-2 py-2 text-center border-r border-gray-200 last:border-r-0 cursor-pointer hover:bg-gray-50",style:{minWidth:"clamp(60px, 25vw, 300px)"},onClick:t=>(e=>{r("date-header-click",e.date)})(e)},[si("div",{class:G(["flex items-center justify-center",e.isToday?"text-blue-600":"text-gray-900"])},[si("span",{class:G(["font-bold",e.isToday?"text-blue-600":"text-gray-900"]),style:{fontSize:"var(--calendar-date-text)"}},X(e.dateNumber)+"("+X(e.dayName)+") ",3)],2)],8,pO))),128))]),si("div",mO,[(Ks(!0),Xs(Bs,null,Tr(s,s=>(Ks(),Xs("div",{key:`data-${s.date}`,class:"contents"},[si("div",{class:"bg-white time-column flex-shrink-0 border-l border-gray-200",style:B(At(o))},[si("div",gO,[(Ks(!0),Xs(Bs,null,Tr(e.displayHours,e=>(Ks(),Xs("div",{key:`${s.date}-hour-${e}`,class:"absolute left-0 right-0",style:B({top:(e-8)*At(i)+"px"})},[si("span",{class:"absolute -top-2 left-0 right-0 text-center text-gray-500",style:B(At(a))},[ai(X(e),1),n[0]||(n[0]=si("span",{class:"hidden md:inline"},":00",-1))],4)],4))),128)),(Ks(!0),Xs(Bs,null,Tr(e.displayHours,(t,r)=>(Ks(),Xs(Bs,null,[r<e.displayHours.length-1?(Ks(),Xs("div",{key:`${s.date}-half-${t}`,class:"absolute left-0 right-0 flex justify-center",style:B({top:(t-8)*At(i)+At(i)/2+"px"})},n[1]||(n[1]=[si("span",{class:"text-gray-600 font-bold leading-none",style:{"font-size":"clamp(4px, 0.67vw, 5.33px)",transform:"translateY(-50%)"}},"  ",-1)]),4)):ci("",!0)],64))),256))])],4),si("div",yO,[si("div",vO,[(Ks(!0),Xs(Bs,null,Tr(u(s.date),e=>(Ks(),Xs("div",{key:e.id,class:G(["absolute p-0.5 rounded cursor-pointer shadow-sm hover:shadow-md transition-shadow z-10 reservation-block",d(e.tagId),"completed"===e.status?"opacity-70":"","cancelled"===e.status?"opacity-50 line-through":""]),style:B(f(e)),onClick:n=>t.$emit("edit-reservation",e)},[si("div",bO,[ai(X(e.customerName)+" ",1),"completed"===e.status?(Ks(),Xs("span",_O,"")):ci("",!0),"cancelled"===e.status?(Ks(),Xs("span",IO,"")):ci("",!0),e.memo?(Ks(),Xs("span",TO,"")):ci("",!0)])],14,wO))),128)),s.isToday?(Ks(),Xs("div",{key:0,class:"absolute left-0 right-0 h-0.5 bg-red-500 z-10",style:B({top:`${h()}px`})},null,4)):ci("",!0),si("div",{class:"absolute inset-0",onClick:e=>((e,t)=>{const n=e.currentTarget.getBoundingClientRect(),s=e.clientY-n.top,o=Math.floor(s/i.value)+8,a=30*Math.round(s%i.value/i.value*2),c=`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`;r("time-click",{date:t,startTime:c})})(e,s.date)},null,8,EO)])])]))),128))])]))),128))])])],512)),[[ro,!e.showStats]])}},[["__scopeId","data-v-21628134"]]),kO={class:"bg-white rounded-t-2xl sm:rounded-2xl w-full sm:max-w-md max-h-[90vh] sm:max-h-[80vh] overflow-y-auto modal-content"},xO={class:"flex items-center gap-2"},CO=["value"],AO={"data-screen":"reservation-form"},DO={key:0,class:"tag-selection"},NO=["data-color","onClick"],RO={class:"tag-name"},OO={key:1,class:"text-sm text-gray-500 italic"},PO={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3"},LO=["value"],MO=["value"],FO=["value"],UO=["value"],VO={key:0},jO={class:"grid grid-cols-3 gap-1 sm:gap-2"},BO={class:"flex gap-3 pt-4"},qO=["disabled"],$O={__name:"ReservationModal",props:{showModal:{type:Boolean,default:!1},editingReservation:{type:Object,default:null},reservationForm:{type:Object,required:!0},tags:{type:Array,default:()=>[]},timeSlots:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["close-modal","save-reservation","delete-reservation","update-form"],setup:(e,{emit:t})=>(t,n)=>e.showModal?(Ks(),Xs("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-end sm:items-center justify-center z-50 px-0 sm:px-4",onClick:n[11]||(n[11]=Mo(e=>t.$emit("close-modal"),["self"]))},[si("div",kO,[si("div",{class:G(["sticky top-0 border-b px-4 py-3 flex justify-between items-center",e.editingReservation?"bg-blue-50":"bg-green-50"])},[si("div",xO,[si("div",{class:G(["w-3 h-3 rounded-full",e.editingReservation?"bg-blue-500":"bg-green-500"])},null,2),si("h2",{class:G(["text-lg font-semibold",e.editingReservation?"text-blue-700":"text-green-700"])},X(e.editingReservation?" ":" "),3)]),si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:n[0]||(n[0]=e=>t.$emit("close-modal"))},n[12]||(n[12]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))],2),si("form",{class:"p-3 sm:p-4 space-y-3 sm:space-y-4 modal-body",onSubmit:n[10]||(n[10]=Mo(e=>t.$emit("save-reservation"),["prevent"]))},[si("div",null,[n[13]||(n[13]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},[ai("  "),si("span",{class:"text-red-500"},"*")],-1)),si("input",{value:e.reservationForm.customerName,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base sm:text-sm",placeholder:": ",onInput:n[1]||(n[1]=e=>t.$emit("update-form",{field:"customerName",value:e.target.value}))},null,40,CO)]),si("div",AO,[n[15]||(n[15]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"  ",-1)),e.tags.length>0?(Ks(),Xs("div",DO,[(Ks(!0),Xs(Bs,null,Tr(e.tags,r=>(Ks(),Xs("button",{key:r.id,type:"button",class:G(["tag-option",e.reservationForm.tagId===r.id?"selected":""]),"data-color":r.color,onClick:e=>t.$emit("update-form",{field:"tagId",value:r.id})},[n[14]||(n[14]=si("span",{class:"swatch","aria-hidden":"true"},null,-1)),si("span",RO,X(r.label),1)],10,NO))),128))])):(Ks(),Xs("div",OO,"  "))]),si("div",PO,[si("div",null,[n[16]||(n[16]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"  ",-1)),si("input",{value:e.reservationForm.date,type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base sm:text-sm",onInput:n[2]||(n[2]=e=>t.$emit("update-form",{field:"date",value:e.target.value}))},null,40,LO)]),si("div",null,[n[17]||(n[17]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"  ",-1)),si("select",{value:e.reservationForm.startTime,required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base sm:text-sm",onChange:n[3]||(n[3]=e=>t.$emit("update-form",{field:"startTime",value:e.target.value}))},[(Ks(!0),Xs(Bs,null,Tr(e.timeSlots,e=>(Ks(),Xs("option",{key:e,value:e},X(e),9,FO))),128))],40,MO)])]),si("div",null,[n[18]||(n[18]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"  ",-1)),si("textarea",{value:e.reservationForm.memo,placeholder:"...",rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none text-base sm:text-sm",onInput:n[4]||(n[4]=e=>t.$emit("update-form",{field:"memo",value:e.target.value}))},null,40,UO)]),e.editingReservation?(Ks(),Xs("div",VO,[n[19]||(n[19]=si("label",{class:"block text-sm font-medium text-gray-700 mb-1 sm:mb-2"},"  ",-1)),si("div",jO,[si("button",{type:"button",class:G(["px-3 py-2 text-sm rounded-lg transition-colors font-medium","active"===e.reservationForm.status?"bg-blue-100 text-blue-800 border-2 border-blue-300":"bg-gray-100 hover:bg-gray-200 text-gray-900 border border-gray-300"]),onClick:n[5]||(n[5]=e=>t.$emit("update-form",{field:"status",value:"active"}))},"  ",2),si("button",{type:"button",class:G(["px-3 py-2 text-sm rounded-lg transition-colors font-medium","completed"===e.reservationForm.status?"bg-green-100 text-green-800 border-2 border-green-300":"bg-gray-100 hover:bg-gray-200 text-gray-900 border border-gray-300"]),onClick:n[6]||(n[6]=e=>t.$emit("update-form",{field:"status",value:"completed"}))},"  ",2),si("button",{type:"button",class:G(["px-3 py-2 text-sm rounded-lg transition-colors font-medium","cancelled"===e.reservationForm.status?"bg-red-100 text-red-800 border-2 border-red-300":"bg-gray-100 hover:bg-gray-200 text-gray-900 border border-gray-300"]),onClick:n[7]||(n[7]=e=>t.$emit("update-form",{field:"status",value:"cancelled"}))},"  ",2)])])):ci("",!0),si("div",BO,[e.editingReservation?(Ks(),Xs("button",{key:0,type:"button",class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",onClick:n[8]||(n[8]=e=>t.$emit("delete-reservation"))},"  ")):ci("",!0),si("button",{type:"button",class:"flex-1 px-4 py-3 border border-gray-300 text-gray-900 rounded-lg hover:bg-gray-50 font-medium",onClick:n[9]||(n[9]=e=>t.$emit("close-modal"))},"  "),si("button",{type:"submit",disabled:e.loading,class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium"},X(e.loading?"...":""),9,qO)])],32)])])):ci("",!0)},zO={class:"bg-white rounded-2xl w-full max-w-sm sm:max-w-md max-h-[85vh] sm:max-h-[80vh] overflow-y-auto modal-content"},HO={class:"p-3 sm:p-4","data-screen":"tag-settings"},GO={class:"mb-4"},KO={class:"max-h-60 overflow-y-auto"},WO={class:"tag-list"},QO=["data-color"],JO={class:"tag-name"},YO=["onClick"],XO={class:"p-3 bg-gray-50 rounded-lg"},ZO=["value"],eP={class:"grid grid-cols-4 gap-1 sm:gap-2 mb-2"},tP=["onClick"],nP={__name:"TagModal",props:{showTagModal:{type:Boolean,default:!1},tags:{type:Array,default:()=>[]},newTagName:{type:String,default:""},newTagColor:{type:String,default:"blue"},tagColors:{type:Array,default:()=>[]}},emits:["close-tag-modal","remove-tag","add-tag","update-new-tag-name","update-new-tag-color"],setup:(e,{emit:t})=>(t,n)=>e.showTagModal?(Ks(),Xs("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",onClick:n[3]||(n[3]=Mo(e=>t.$emit("close-tag-modal"),["self"]))},[si("div",zO,[n[8]||(n[8]=si("div",{class:"sticky top-0 bg-white border-b px-3 sm:px-4 py-2 sm:py-3"},[si("h2",{class:"text-base sm:text-lg font-semibold text-gray-900"},"  ")],-1)),si("div",HO,[si("div",GO,[n[6]||(n[6]=si("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"  ",-1)),si("div",KO,[si("ul",WO,[(Ks(!0),Xs(Bs,null,Tr(e.tags,e=>(Ks(),Xs("li",{key:e.id,class:"tag-item","data-color":e.color},[n[5]||(n[5]=si("span",{class:"swatch","aria-hidden":"true"},null,-1)),si("span",JO,X(e.label),1),e.id.startsWith("custom_")?(Ks(),Xs("button",{key:0,class:"ml-auto p-1 hover:bg-black hover:bg-opacity-10 rounded",onClick:n=>t.$emit("remove-tag",e.id)},n[4]||(n[4]=[si("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,YO)):ci("",!0)],8,QO))),128))])])]),si("div",XO,[n[7]||(n[7]=si("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"  ",-1)),si("input",{value:e.newTagName,type:"text",placeholder:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2 text-base sm:text-sm",onInput:n[0]||(n[0]=e=>t.$emit("update-new-tag-name",e.target.value))},null,40,ZO),si("div",eP,[(Ks(!0),Xs(Bs,null,Tr(e.tagColors,n=>(Ks(),Xs("button",{key:n.name,type:"button",class:G(["h-7 sm:h-8 rounded",n.bgClass,e.newTagColor===n.name?"ring-2 ring-offset-1 sm:ring-offset-2 ring-blue-500":""]),onClick:e=>t.$emit("update-new-tag-color",n.name)},null,10,tP))),128))]),si("button",{class:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:n[1]||(n[1]=e=>t.$emit("add-tag"))},"  ")]),si("button",{class:"w-full mt-4 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-900",onClick:n[2]||(n[2]=e=>t.$emit("close-tag-modal"))},"  ")])])])):ci("",!0)},rP={class:"bg-white rounded-2xl w-full max-w-xs sm:max-w-sm modal-content"},sP={class:"p-3 sm:p-4 border-b"},iP={class:"flex justify-between items-center"},oP={class:"p-3 sm:p-4"},aP={class:"flex justify-between items-center mb-4"},cP={class:"text-base font-medium text-gray-900"},lP={class:"grid grid-cols-7 gap-0.5 sm:gap-1 mb-2"},uP={class:"grid grid-cols-7 gap-0.5 sm:gap-1"},hP=["onClick"],dP={__name:"CalendarModal",props:{showCalendarModal:{type:Boolean,default:!1},calendarMonthText:{type:String,required:!0},calendarDates:{type:Array,default:()=>[]}},emits:["close-calendar-modal","previous-calendar-month","next-calendar-month","select-date"],setup:(e,{emit:t})=>(t,n)=>e.showCalendarModal?(Ks(),Xs("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",onClick:n[3]||(n[3]=Mo(e=>t.$emit("close-calendar-modal"),["self"]))},[si("div",rP,[si("div",sP,[si("div",iP,[n[5]||(n[5]=si("h2",{class:"text-base sm:text-lg font-semibold text-gray-900"},"  ",-1)),si("button",{class:"p-1 hover:bg-gray-100 rounded",onClick:n[0]||(n[0]=e=>t.$emit("close-calendar-modal"))},n[4]||(n[4]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),si("div",oP,[si("div",aP,[si("button",{class:"p-1 hover:bg-gray-100 rounded",onClick:n[1]||(n[1]=e=>t.$emit("previous-calendar-month"))},n[6]||(n[6]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),si("h3",cP,X(e.calendarMonthText),1),si("button",{class:"p-1 hover:bg-gray-100 rounded",onClick:n[2]||(n[2]=e=>t.$emit("next-calendar-month"))},n[7]||(n[7]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))]),si("div",lP,[(Ks(),Xs(Bs,null,Tr(["","","","","","",""],e=>si("div",{key:e,class:"text-center text-xs font-medium text-gray-500 py-0.5 sm:py-1"},X(e),1)),64))]),si("div",uP,[(Ks(!0),Xs(Bs,null,Tr(e.calendarDates,e=>(Ks(),Xs("button",{key:e.dateStr,class:G(["p-1 sm:p-2 text-xs sm:text-sm rounded hover:bg-gray-100 transition-colors min-h-[32px] sm:min-h-[36px]",e.isCurrentMonth?"text-gray-900":"text-gray-400",e.isToday?"bg-blue-100 text-blue-600 font-bold":"",e.isSelected?"bg-blue-500 text-white hover:bg-blue-600":""]),onClick:n=>t.$emit("select-date",e.date)},X(e.day),11,hP))),128))])])])])):ci("",!0)},fP={class:"min-h-screen bg-gray-50 overflow-hidden"},pP={class:"pb-4 px-2 sm:px-4"},mP={__name:"calendar",setup(e){Ol({title:" - "});const{reservations:t,loading:n,addReservation:r,updateReservation:s,deleteReservation:i}=FR(),o=St(new Date),a=St(new Date),c=St(!1),l=St(!1),u=St(!1),h=St(!1),d=St(new Date),f=St(null),p=St(null),m=St(""),g=St("blue"),y=St(!1),v=St(null),w=St([]),b=[{name:"pink",bgClass:"tag-color-picker-pink"},{name:"blue",bgClass:"tag-color-picker-blue"},{name:"green",bgClass:"tag-color-picker-green"},{name:"yellow",bgClass:"tag-color-picker-yellow"},{name:"purple",bgClass:"tag-color-picker-purple"},{name:"orange",bgClass:"tag-color-picker-orange"},{name:"red",bgClass:"tag-color-picker-red"},{name:"gray",bgClass:"tag-color-picker-gray"}],_=Ai(()=>w.value),I=dt({customerName:"",date:"",startTime:"09:00",duration:30,tagId:"default",category:"default",status:"active",memo:""}),T=Ai(()=>{const e=[];if(y.value&&v.value){const[e,t,n]=v.value.split("-").map(Number),r=new Date(e,t-1,n);return[{date:v.value,dayName:["","","","","","",""][r.getDay()],dateNumber:r.getDate(),isToday:r.toDateString()===(new Date).toDateString()}]}const t=new Date(o.value),n=t.getDay(),r=[];if(n>=2&&n<=4){const e=new Date(t);e.setDate(t.getDate()-(n-2));for(let t=0;t<3;t++){const n=new Date(e);n.setDate(e.getDate()+t),r.push(n)}}else{const s=new Date(t);if(5===n);else if(6===n)s.setDate(t.getDate()-1);else if(0===n)s.setDate(t.getDate()-2);else if(1===n){const n=new Date(t);n.setDate(t.getDate()+1);for(let e=0;e<3;e++){const t=new Date(n);t.setDate(n.getDate()+e),r.push(t)}for(const t of r){const n={date:`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,dayName:["","","","","","",""][t.getDay()],dateNumber:t.getDate(),isToday:t.toDateString()===(new Date).toDateString()};e.push(n)}return e}for(let e=0;e<3;e++){const t=new Date(s);t.setDate(s.getDate()+e),r.push(t)}}for(const s of r){const t={date:`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,dayName:["","","","","","",""][s.getDay()],dateNumber:s.getDate(),isToday:s.toDateString()===(new Date).toDateString()};e.push(t)}return e}),E=Ai(()=>{if(y.value&&v.value){const[e,t]=v.value.split("-").map(Number);return`${e}${t}`}const e=o.value;return`${e.getFullYear()}${e.getMonth()+1}`}),S=Ai(()=>{const e=a.value;return`${e.getFullYear()}${e.getMonth()+1}`}),k=Ai(()=>d.value?`${d.value.getFullYear()}${d.value.getMonth()+1}`:""),x=[8,9,10,11,12,13,14,15,16,17,18,19,20],C=Ai(()=>{const e=[];for(let t=8;t<=20;t++)e.push(`${t.toString().padStart(2,"0")}:00`),t<20&&e.push(`${t.toString().padStart(2,"0")}:30`);return e}),A=Ai(()=>{const e=a.value.getMonth(),n=a.value.getFullYear(),r=t.value.filter(t=>{const r=new Date(t.date);return r.getMonth()===e&&r.getFullYear()===n});return{total:r.length,completed:r.filter(e=>"completed"===e.status).length,active:r.filter(e=>"active"===e.status).length,cancelled:r.filter(e=>"cancelled"===e.status).length}}),D=({date:e,startTime:t})=>{B(e,t)},N=({field:e,value:t})=>{I[e]=t},R=()=>{const e=new Date(o.value);if(y.value){e.setDate(e.getDate()-1);const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");v.value=`${t}-${n}-${r}`}else{const t=e.getDay();t>=2&&t<=4?e.setDate(e.getDate()-(t-2)-4):5===t?e.setDate(e.getDate()-3):6===t?e.setDate(e.getDate()-4):0===t?e.setDate(e.getDate()-5):1===t&&e.setDate(e.getDate()-3)}o.value=e},O=()=>{const e=new Date(o.value);if(y.value){e.setDate(e.getDate()+1);const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");v.value=`${t}-${n}-${r}`}else{const t=e.getDay();t>=2&&t<=4?e.setDate(e.getDate()+(5-t)):5===t?e.setDate(e.getDate()+4):6===t?e.setDate(e.getDate()+3):0===t?e.setDate(e.getDate()+2):1===t&&e.setDate(e.getDate()+4)}o.value=e},P=()=>{o.value=new Date,y.value=!1,v.value=null},L=e=>{if(y.value&&v.value===e)y.value=!1,v.value=null;else{y.value=!0,v.value=e;const[t,n,r]=e.split("-").map(Number);o.value=new Date(t,n-1,r)}},M=()=>{const e=[],t=d.value.getFullYear(),n=d.value.getMonth(),r=new Date(t,n,1),s=new Date(r);s.setDate(s.getDate()-r.getDay());for(let i=0;i<42;i++){const t=new Date(s);t.setDate(s.getDate()+i);const r=t.toISOString().split("T")[0],a=t.getMonth()===n,c=r===(new Date).toISOString().split("T")[0],l=r===o.value.toISOString().split("T")[0];e.push({date:t,dateStr:r,day:t.getDate(),isCurrentMonth:a,isToday:c,isSelected:l})}return e},F=()=>{d.value=new Date(o.value),h.value=!0},U=e=>{o.value=new Date(e),d.value=new Date(e),h.value=!1},V=()=>{const e=new Date(a.value);e.setMonth(e.getMonth()-1),a.value=e},j=()=>{const e=new Date(a.value);e.setMonth(e.getMonth()+1),a.value=e},B=(e=null,t=null)=>{var n,r,s,i;f.value=null,I.customerName="",I.date=e||T.value[Math.floor(T.value.length/2)].date,I.startTime=t||"09:00",I.duration=30,I.tagId=(null==(n=p.value)?void 0:n.id)||(null==(r=_.value[0])?void 0:r.id)||"default",I.category=(null==(s=p.value)?void 0:s.id)||(null==(i=_.value[0])?void 0:i.id)||"default",I.status="active",I.memo="",c.value=!0},q=e=>{f.value=e,Object.assign(I,{customerName:e.customerName,date:e.date,startTime:e.startTime||e.timeSlot,duration:e.duration||30,tagId:e.tagId||e.category||"default",category:e.category||e.tagId||"default",status:e.status||"active",memo:e.memo||""}),c.value=!0},$=()=>{c.value=!1,f.value=null},z=async()=>{try{const e={customerName:I.customerName,date:I.date,startTime:I.startTime,duration:I.duration||30,status:I.status||"active",tagId:I.tagId||"default",category:I.category||I.tagId||"default",memo:I.memo||""};f.value?await s(f.value.id,e):await r(e),$()}catch(e){alert("")}},H=async()=>{if(confirm(""))try{await i(f.value.id),$()}catch(e){alert("")}},G=()=>{l.value=!0},K=()=>{l.value=!1,m.value="",g.value="blue"},W=async()=>{if(!m.value.trim())return;const e={id:`custom_${Date.now()}`,label:m.value,color:g.value};w.value.push(e),await J(),m.value="",g.value="blue"},Q=async e=>{w.value=w.value.filter(t=>t.id!==e),await J()},J=async()=>{try{const{$firebaseFirestore:e}=pc(),t=mv().currentUser;if(!t)return;const{doc:n,setDoc:r}=await Ll(async()=>{const{doc:e,setDoc:t}=await Promise.resolve().then(()=>BN);return{doc:e,setDoc:t}},void 0,import.meta.url),s=n(e,"userTags",t.uid);await r(s,{tags:w.value,updatedAt:new Date})}catch(e){localStorage.setItem("customTags",JSON.stringify(w.value))}},Y=async()=>{try{const e=mv();await Rg(e),await Lc("/login")}catch(e){}};return lr(async()=>{await(async()=>{try{const{$firebaseFirestore:e}=pc(),t=mv().currentUser;if(!t){const e=localStorage.getItem("customTags");return void(e&&(w.value=JSON.parse(e)))}const{doc:n,getDoc:r}=await Ll(async()=>{const{doc:e,getDoc:t}=await Promise.resolve().then(()=>BN);return{doc:e,getDoc:t}},void 0,import.meta.url),s=n(e,"userTags",t.uid),i=await r(s);if(i.exists()){const e=i.data();w.value=e.tags||[]}else{const e=localStorage.getItem("customTags");e?(w.value=JSON.parse(e),await J(),localStorage.removeItem("customTags")):w.value=[]}}catch(e){const t=localStorage.getItem("customTags");w.value=t?JSON.parse(t):[]}})()}),(e,r)=>(Ks(),Xs("div",fP,[ii(zR,{"current-month-text":At(E),"show-stats":At(u),onPreviousDays:R,onNextDays:O,onGoToToday:P,onShowCalendarModal:F,onOpenTagModal:G,onShowStats:r[0]||(r[0]=e=>u.value=!0),onLogout:Y},null,8,["current-month-text","show-stats"]),si("main",pP,[ii(lO,{"show-stats":At(u),"selected-month-text":At(S),"monthly-stats":At(A),onHideStats:r[1]||(r[1]=e=>u.value=!1),onPreviousMonth:V,onNextMonth:j},null,8,["show-stats","selected-month-text","monthly-stats"]),ii(SO,{"show-stats":At(u),"display-days":At(T),"display-hours":x,reservations:At(t),tags:At(_),"is-single-day-view":At(y),"selected-single-date":At(v),onEditReservation:q,onTimeClick:D,onDateHeaderClick:L},null,8,["show-stats","display-days","reservations","tags","is-single-day-view","selected-single-date"])]),si("button",{class:"lg:hidden fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 flex items-center justify-center z-30 transition-all hover:scale-110",onClick:r[2]||(r[2]=e=>B())},r[8]||(r[8]=[si("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),ii($O,{"show-modal":At(c),"editing-reservation":At(f),"reservation-form":At(I),tags:At(_),"time-slots":At(C),loading:At(n),onCloseModal:$,onSaveReservation:z,onDeleteReservation:H,onUpdateForm:N},null,8,["show-modal","editing-reservation","reservation-form","tags","time-slots","loading"]),ii(nP,{"show-tag-modal":At(l),tags:At(_),"new-tag-name":At(m),"new-tag-color":At(g),"tag-colors":b,onCloseTagModal:K,onRemoveTag:Q,onAddTag:W,onUpdateNewTagName:r[3]||(r[3]=e=>m.value=e),onUpdateNewTagColor:r[4]||(r[4]=e=>g.value=e)},null,8,["show-tag-modal","tags","new-tag-name","new-tag-color"]),ii(dP,{"show-calendar-modal":At(h),"calendar-month-text":At(k),"calendar-dates":M(),onCloseCalendarModal:r[5]||(r[5]=e=>h.value=!1),onPreviousCalendarMonth:r[6]||(r[6]=e=>d.value=new Date(At(d).getFullYear(),At(d).getMonth()-1)),onNextCalendarMonth:r[7]||(r[7]=e=>d.value=new Date(At(d).getFullYear(),At(d).getMonth()+1)),onSelectDate:U},null,8,["show-calendar-modal","calendar-month-text","calendar-dates"])]))}},gP=Object.freeze(Object.defineProperty({__proto__:null,default:mP},Symbol.toStringTag,{value:"Module"})),yP={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 px-4"},vP={class:"mx-auto w-full max-w-md"},wP={class:"bg-white shadow rounded-lg px-6 py-8"},bP={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},_P={class:"flex items-start"},IP=["disabled"],TP={key:0},EP={key:1},SP={__name:"register",setup(e){Ol({title:" - "});const t=St(!1),n=St(""),r=dt({name:"",email:"",password:"",confirmPassword:"",acceptTerms:!0}),s=Ai(()=>r.email.trim().length>0&&r.password.length>=6&&r.password===r.confirmPassword),i=async()=>{if(s.value){t.value=!0,n.value="";try{const{$firebaseAuth:t}=pc(),n=t,s=nD();try{const{setPersistence:e,browserLocalPersistence:t}=await Ll(async()=>{const{setPersistence:e,browserLocalPersistence:t}=await Promise.resolve().then(()=>yv);return{setPersistence:e,browserLocalPersistence:t}},void 0,import.meta.url);await e(n,t)}catch(e){}const i=(await wg(n,r.email,r.password)).user,o=r.name.trim()||"";await _g(i,{displayName:o}),await mN(JA(s,"users",i.uid),{displayName:o,email:r.email,role:"admin",createdAt:new Date});const a=_R();a.setUser(i),localStorage.setItem("lastActivity",Date.now().toString()),await a.checkAuthState();const c=2e3;await new Promise(e=>setTimeout(e,c));n.currentUser;await Lc("/")}catch(i){n.value=o(i.code)}finally{t.value=!1}}else n.value=""},o=e=>{switch(e){case"auth/email-already-in-use":return"";case"auth/invalid-email":return"";case"auth/weak-password":return"6";case"auth/operation-not-allowed":return"/";default:return""}};return(e,o)=>(Ks(),Xs("div",yP,[si("div",vP,[o[10]||(o[10]=si("div",{class:"text-center mb-8"},[si("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"  "),si("p",{class:"text-gray-600"},"  ")],-1)),si("div",wP,[si("form",{class:"space-y-6",onSubmit:Mo(i,["prevent"])},[At(n)?(Ks(),Xs("div",bP,X(At(n)),1)):ci("",!0),un(si("div",null,[o[5]||(o[5]=si("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=e=>At(r).name=e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""},null,512),[[xo,At(r).name]])],512),[[ro,!1]]),si("div",null,[o[6]||(o[6]=si("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=e=>At(r).email=e),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""},null,512),[[xo,At(r).email]])]),si("div",null,[o[7]||(o[7]=si("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"password","onUpdate:modelValue":o[2]||(o[2]=e=>At(r).password=e),type:"password",required:"",minlength:"6",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"6"},null,512),[[xo,At(r).password]])]),si("div",null,[o[8]||(o[8]=si("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{id:"confirmPassword","onUpdate:modelValue":o[3]||(o[3]=e=>At(r).confirmPassword=e),type:"password",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""},null,512),[[xo,At(r).confirmPassword]])]),un(si("div",_P,[un(si("input",{id:"acceptTerms","onUpdate:modelValue":o[4]||(o[4]=e=>At(r).acceptTerms=e),type:"checkbox",class:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[Co,At(r).acceptTerms]]),o[9]||(o[9]=si("label",{for:"acceptTerms",class:"ml-2 block text-sm text-gray-700"},"  ",-1))],512),[[ro,!1]]),si("button",{type:"submit",disabled:At(t)||!At(s),class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[At(t)?(Ks(),Xs("span",TP,"...")):(Ks(),Xs("span",EP,""))],8,IP)],32)])])]))}},kP=Object.freeze(Object.defineProperty({__proto__:null,default:SP},Symbol.toStringTag,{value:"Module"})),xP={class:"min-h-screen bg-gray-50"},CP={class:"bg-white shadow-sm border-b sticky top-0 z-40"},AP={class:"px-4 py-3"},DP={class:"mb-3"},NP={class:"flex overflow-x-auto gap-2 pb-2 scrollbar-hide"},RP=["onClick"],OP={class:"flex justify-between items-center"},PP={class:"text-center"},LP={class:"text-sm font-semibold text-gray-900"},MP={class:"pb-20"},FP=["onClick"],UP={class:"text-xs font-medium text-gray-500"},VP={class:"relative",style:{height:"600px","overflow-y":"auto"}},jP=["onClick"],BP={class:"font-medium truncate"},qP={class:"text-xs opacity-75"},$P=["onClick"],zP={class:"bg-white rounded-t-2xl w-full max-h-[90vh] overflow-y-auto"},HP={class:"sticky top-0 bg-white border-b px-4 py-3 flex justify-between items-center"},GP={class:"text-lg font-semibold"},KP={class:"grid grid-cols-3 gap-2"},WP=["onClick"],QP={class:"grid grid-cols-2 gap-3"},JP=["value"],YP={class:"grid grid-cols-3 gap-2"},XP=["onClick"],ZP={class:"flex gap-3 pt-4"},eL=["disabled"],tL={class:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto"},nL={class:"p-4"},rL={class:"mb-4 p-3 bg-gray-50 rounded-lg"},sL={class:"grid grid-cols-4 gap-2 mb-2"},iL=["onClick"],oL={class:"space-y-2"},aL={class:"font-medium"},cL=["onClick"],lL=XN({__name:"calendar-mobile",setup(e){Ol({title:" - "});const{reservations:t,loading:n,addReservation:r,updateReservation:s,deleteReservation:i}=FR(),o=St(new Date),a=St(!1),c=St(!1),l=St(null),u=St(null),h=St(""),d=St("blue"),f=St(!1),p=St(null),m=St([]),g=[{name:"pink",bgClass:"bg-pink-200",activeClass:"bg-pink-200 text-pink-800",badgeClass:"bg-pink-200 text-pink-700"},{name:"blue",bgClass:"bg-blue-200",activeClass:"bg-blue-200 text-blue-800",badgeClass:"bg-blue-200 text-blue-700"},{name:"green",bgClass:"bg-green-200",activeClass:"bg-green-200 text-green-800",badgeClass:"bg-green-200 text-green-700"},{name:"yellow",bgClass:"bg-yellow-200",activeClass:"bg-yellow-200 text-yellow-800",badgeClass:"bg-yellow-200 text-yellow-700"},{name:"purple",bgClass:"bg-purple-200",activeClass:"bg-purple-200 text-purple-800",badgeClass:"bg-purple-200 text-purple-700"},{name:"orange",bgClass:"bg-orange-200",activeClass:"bg-orange-200 text-orange-800",badgeClass:"bg-orange-200 text-orange-700"},{name:"red",bgClass:"bg-red-200",activeClass:"bg-red-200 text-red-800",badgeClass:"bg-red-200 text-red-700"},{name:"gray",bgClass:"bg-gray-200",activeClass:"bg-gray-300 text-gray-800",badgeClass:"bg-gray-200 text-gray-700"}],y=Ai(()=>m.value),v=dt({customerName:"",notes:"",date:"",startTime:"09:00",duration:60,tagId:"cut",status:"active"}),w=[{value:30,label:"30"},{value:60,label:"1"},{value:90,label:"1.5"},{value:120,label:"2"},{value:150,label:"2.5"},{value:180,label:"3"}],b=Ai(()=>{const e=[];if(f.value&&p.value){const[t,n,r]=p.value.split("-").map(Number),s=new Date(t,n-1,r);e.push({date:p.value,dayName:["","","","","","",""][s.getDay()],dateNumber:s.getDate(),isToday:s.toDateString()===(new Date).toDateString()})}else{const t=new Date(o.value),n=t.getDay(),r=[];if(n>=2&&n<=4){const e=new Date(t);e.setDate(t.getDate()-(n-2));for(let t=0;t<3;t++){const n=new Date(e);n.setDate(e.getDate()+t),r.push(n)}}else{const s=new Date(t);if(5===n);else if(6===n)s.setDate(t.getDate()-1);else if(0===n)s.setDate(t.getDate()-2);else if(1===n){const n=new Date(t);n.setDate(t.getDate()+1);for(let e=0;e<3;e++){const t=new Date(n);t.setDate(n.getDate()+e),r.push(t)}for(const t of r)e.push({date:t.toISOString().split("T")[0],dayName:["","","","","","",""][t.getDay()],dateNumber:t.getDate(),isToday:t.toDateString()===(new Date).toDateString()});return e}for(let e=0;e<3;e++){const t=new Date(s);t.setDate(s.getDate()+e),r.push(t)}}for(const s of r)e.push({date:s.toISOString().split("T")[0],dayName:["","","","","","",""][s.getDay()],dateNumber:s.getDate(),isToday:s.toDateString()===(new Date).toDateString()})}return e}),_=Ai(()=>{const e=o.value;return`${e.getFullYear()}${e.getMonth()+1}`}),I=[8,9,10,11,12,13,14,15,16,17,18,19,20],T=Ai(()=>{const e=[];for(let t=8;t<=20;t++)e.push(`${t.toString().padStart(2,"0")}:00`),t<20&&e.push(`${t.toString().padStart(2,"0")}:30`);return e}),E=e=>{const[t,n]=e.split(":").map(Number);return 50*(t-8)+n/60*50},S=e=>{const t=y.value.find(t=>t.id===e);return t?t.bgClass:"bg-gray-100"},k=()=>{const e=new Date(o.value);if(f.value){e.setDate(e.getDate()-1);const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");p.value=`${t}-${n}-${r}`}else{const t=e.getDay();t>=2&&t<=4?e.setDate(e.getDate()-(t-2)-4):5===t?e.setDate(e.getDate()-3):6===t?e.setDate(e.getDate()-4):0===t?e.setDate(e.getDate()-5):1===t&&e.setDate(e.getDate()-3)}o.value=e},x=()=>{const e=new Date(o.value);if(f.value){e.setDate(e.getDate()+1);const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");p.value=`${t}-${n}-${r}`}else{const t=e.getDay();t>=2&&t<=4?e.setDate(e.getDate()+(5-t)):5===t?e.setDate(e.getDate()+4):6===t?e.setDate(e.getDate()+3):0===t?e.setDate(e.getDate()+2):1===t&&e.setDate(e.getDate()+4)}o.value=e},C=()=>{o.value=new Date,f.value=!1,p.value=null},A=(e=null,t=null)=>{var n,r;l.value=null,v.customerName="",v.notes="",v.date=e||b.value[1].date,v.startTime=t||"09:00",v.duration=60,v.tagId=(null==(n=u.value)?void 0:n.id)||(null==(r=y.value[0])?void 0:r.id)||"default",v.status="active",a.value=!0},D=()=>{a.value=!1,l.value=null},N=async()=>{try{const e={...v,tag:y.value.find(e=>e.id===v.tagId)};l.value?await s(l.value.id,e):await r(e),D()}catch(e){alert("")}},R=async()=>{if(confirm(""))try{await i(l.value.id),D()}catch(e){alert("")}},O=()=>{c.value=!0},P=()=>{c.value=!1,h.value="",d.value="blue"},L=async()=>{if(!h.value.trim())return;const e=g.find(e=>e.name===d.value),t={id:`custom_${Date.now()}`,label:h.value,color:d.value,...e};m.value.push(t),await M(),h.value="",d.value="blue"},M=async()=>{try{const{$firebaseFirestore:e}=pc(),{getAuth:t}=await Ll(async()=>{const{getAuth:e}=await Promise.resolve().then(()=>yv);return{getAuth:e}},void 0,import.meta.url),n=t().currentUser;if(!n)return;const{doc:r,setDoc:s}=await Ll(async()=>{const{doc:e,setDoc:t}=await Promise.resolve().then(()=>BN);return{doc:e,setDoc:t}},void 0,import.meta.url),i=r(e,"userTags",n.uid);await s(i,{tags:m.value,updatedAt:new Date})}catch(e){localStorage.setItem("customTags",JSON.stringify(m.value))}};return lr(async()=>{await(async()=>{try{const{$firebaseFirestore:e}=pc(),{getAuth:t}=await Ll(async()=>{const{getAuth:e}=await Promise.resolve().then(()=>yv);return{getAuth:e}},void 0,import.meta.url),n=t().currentUser;if(!n){const e=localStorage.getItem("customTags");return void(e&&(m.value=JSON.parse(e)))}const{doc:r,getDoc:s}=await Ll(async()=>{const{doc:e,getDoc:t}=await Promise.resolve().then(()=>BN);return{doc:e,getDoc:t}},void 0,import.meta.url),i=r(e,"userTags",n.uid),o=await s(i);if(o.exists()){const e=o.data();m.value=e.tags||[]}else{const e=localStorage.getItem("customTags");e&&(m.value=JSON.parse(e),await M(),localStorage.removeItem("customTags"))}}catch(e){const t=localStorage.getItem("customTags");t&&(m.value=JSON.parse(t))}})()}),(e,r)=>(Ks(),Xs("div",xP,[si("header",CP,[si("div",AP,[si("div",DP,[si("div",NP,[(Ks(!0),Xs(Bs,null,Tr(At(y),e=>{var t;return Ks(),Xs("button",{key:e.id,type:"button",class:G(["px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all",(null==(t=At(u))?void 0:t.id)===e.id?e.activeClass:"bg-gray-100 text-gray-600 hover:bg-gray-200"]),onClick:t=>(e=>{u.value=e,v.tagId=e.id})(e)},X(e.label),11,RP)}),128)),si("button",{type:"button",class:"px-3 py-1.5 rounded-full text-xs font-medium bg-gray-200 text-gray-700 hover:bg-gray-300 whitespace-nowrap",onClick:O}," +  ")])]),si("div",OP,[si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:k},r[6]||(r[6]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),si("div",PP,[si("h1",LP,X(At(_)),1),si("button",{class:"text-xs text-blue-600 hover:text-blue-700",onClick:C},"  ")]),si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:x},r[7]||(r[7]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))])])]),si("main",MP,[si("div",{class:G(["grid gap-px bg-gray-200",At(f)?"grid-cols-1":"grid-cols-3"])},[(Ks(!0),Xs(Bs,null,Tr(At(b),(e,n)=>{return Ks(),Xs("div",{key:e.date,class:"bg-white"},[si("div",{class:G(["px-2 py-2 text-center border-b cursor-pointer",e.isToday?"bg-blue-50 border-blue-200":"border-gray-200","hover:bg-gray-50"]),onClick:t=>(e=>{if(f.value&&p.value===e)f.value=!1,p.value=null;else{f.value=!0,p.value=e;const[t,n,r]=e.split("-").map(Number);o.value=new Date(t,n-1,r)}})(e.date)},[si("div",UP,X(e.dayName),1),si("div",{class:G(["text-sm font-bold",e.isToday?"text-blue-600":"text-gray-900"])},X(e.dateNumber),3)],10,FP),si("div",VP,[(Ks(),Xs(Bs,null,Tr(I,e=>si("div",{key:e,class:"absolute left-0 right-0 border-t border-gray-100",style:B({top:50*(e-8)+"px"})},[0===n||At(f)?(Ks(),Xs("span",{key:0,class:G(["absolute -left-1 -top-2 bg-white px-1",At(f)?"text-sm text-gray-600":"text-xs text-gray-400"])},X(e)+":00 ",3)):ci("",!0)],4)),64)),(Ks(!0),Xs(Bs,null,Tr((r=e.date,t.value.filter(e=>e.date===r&&"cancelled"!==e.status)),e=>(Ks(),Xs("div",{key:e.id,class:G(["absolute left-1 right-1 p-1 rounded text-xs cursor-pointer",S(e.tagId),"shadow-sm hover:shadow-md transition-shadow"]),style:B({top:`${E(e.startTime)}px`,height:e.duration/60*50+"px"}),onClick:t=>(e=>{var t;l.value=e,Object.assign(v,{customerName:e.customerName,notes:e.notes||"",date:e.date,startTime:e.startTime,duration:e.duration||60,tagId:e.tagId||(null==(t=y.value[0])?void 0:t.id)||"default",status:e.status}),a.value=!0})(e)},[si("div",BP,X(e.customerName),1),si("div",qP,X(e.startTime),1),e.tag?(Ks(),Xs("div",{key:0,class:G(["mt-1 inline-block px-1 py-0.5 rounded text-xs",e.tag.badgeClass])},X(e.tag.label),3)):ci("",!0)],14,jP))),128)),si("div",{class:"absolute inset-0",onClick:t=>((e,t)=>{const n=e.currentTarget.getBoundingClientRect(),r=e.clientY-n.top,s=Math.floor(r/50)+8,i=30*Math.round(r%50/50*2);A(t,`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`)})(t,e.date)},null,8,$P)])]);var r}),128))],2)]),si("button",{class:"fixed bottom-6 right-6 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 flex items-center justify-center z-30",onClick:r[0]||(r[0]=e=>A())},r[8]||(r[8]=[si("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])),At(a)?(Ks(),Xs("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50",onClick:Mo(D,["self"])},[si("div",zP,[si("div",HP,[si("h2",GP,X(At(l)?"":""),1),si("button",{class:"p-2 hover:bg-gray-100 rounded-lg",onClick:D},r[9]||(r[9]=[si("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),si("form",{class:"p-4 space-y-4",onSubmit:Mo(N,["prevent"])},[si("div",null,[r[10]||(r[10]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[ai("  "),si("span",{class:"text-red-500"},"*")],-1)),un(si("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>At(v).customerName=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:": "},null,512),[[xo,At(v).customerName]])]),si("div",null,[r[11]||(r[11]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),si("div",KP,[(Ks(!0),Xs(Bs,null,Tr(At(y),e=>(Ks(),Xs("button",{key:e.id,type:"button",class:G(["px-3 py-2 text-sm rounded-lg transition-colors",At(v).tagId===e.id?e.activeClass:"bg-gray-100 hover:bg-gray-200 text-gray-600"]),onClick:t=>At(v).tagId=e.id},X(e.label),11,WP))),128))])]),si("div",QP,[si("div",null,[r[12]||(r[12]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>At(v).date=e),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[xo,At(v).date]])]),si("div",null,[r[13]||(r[13]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("select",{"onUpdate:modelValue":r[3]||(r[3]=e=>At(v).startTime=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"},[(Ks(!0),Xs(Bs,null,Tr(At(T),e=>(Ks(),Xs("option",{key:e,value:e},X(e),9,JP))),128))],512),[[Do,At(v).startTime]])])]),si("div",null,[r[14]||(r[14]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),si("div",YP,[(Ks(),Xs(Bs,null,Tr(w,e=>si("button",{key:e.value,type:"button",class:G(["px-3 py-2 text-sm rounded-lg transition-colors",At(v).duration===e.value?"bg-blue-100 text-blue-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"]),onClick:t=>At(v).duration=e.value},X(e.label),11,XP)),64))])]),si("div",null,[r[15]||(r[15]=si("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"  ",-1)),un(si("textarea",{"onUpdate:modelValue":r[4]||(r[4]=e=>At(v).notes=e),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:""},null,512),[[xo,At(v).notes]])]),si("div",ZP,[At(l)?(Ks(),Xs("button",{key:0,type:"button",class:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium",onClick:R},"  ")):ci("",!0),si("button",{type:"button",class:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium",onClick:D},"  "),si("button",{type:"submit",disabled:At(n),class:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium"},X(At(n)?"...":""),9,eL)])],32)])])):ci("",!0),At(c)?(Ks(),Xs("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:Mo(P,["self"])},[si("div",tL,[r[17]||(r[17]=si("div",{class:"sticky top-0 bg-white border-b px-4 py-3"},[si("h2",{class:"text-lg font-semibold"},"  ")],-1)),si("div",nL,[si("div",rL,[un(si("input",{"onUpdate:modelValue":r[5]||(r[5]=e=>Et(h)?h.value=e:null),type:"text",placeholder:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"},null,512),[[xo,At(h)]]),si("div",sL,[(Ks(),Xs(Bs,null,Tr(g,e=>si("button",{key:e.name,type:"button",class:G(["h-8 rounded",e.bgClass,At(d)===e.name?"ring-2 ring-offset-2 ring-blue-500":""]),onClick:t=>d.value=e.name},null,10,iL)),64))]),si("button",{class:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",onClick:L},"  ")]),si("div",oL,[(Ks(!0),Xs(Bs,null,Tr(At(m),e=>(Ks(),Xs("div",{key:e.id,class:G(["flex items-center justify-between p-2 rounded-lg",e.bgClass])},[si("span",aL,X(e.label),1),si("button",{class:"p-1 hover:bg-black hover:bg-opacity-10 rounded",onClick:t=>(async e=>{m.value=m.value.filter(t=>t.id!==e),await M()})(e.id)},r[16]||(r[16]=[si("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[si("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,cL)],2))),128))]),si("button",{class:"w-full mt-4 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",onClick:P},"  ")])])])):ci("",!0)]))}},[["__scopeId","data-v-689af6c4"]]),uL=Object.freeze(Object.defineProperty({__proto__:null,default:lL},Symbol.toStringTag,{value:"Module"})),hL={class:"auth-layout"},dL={class:"auth-content"};const fL=XN({},[["render",function(e,t){return Ks(),Xs("div",hL,[t[0]||(t[0]=si("div",{class:"auth-background"},null,-1)),si("div",dL,[Er(e.$slots,"default",{},void 0)])])}],["__scopeId","data-v-52856ae8"]]),pL=Object.freeze(Object.defineProperty({__proto__:null,default:fL},Symbol.toStringTag,{value:"Module"}));
