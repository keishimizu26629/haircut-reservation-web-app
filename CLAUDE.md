<language>Japanese</language>
<character_code>UTF-8</character_code>
<law>

# シンプル予約管理アプリ 開発ガイドライン

このドキュメントは、シンプル予約管理アプリを Nuxt 3 + Firebase を用いて開発する際のガイドラインをまとめたものです。
このガイドラインに従って、開発を行ってください。

## 🎯 プロジェクト概要

**目的**: 紙の予約表をデジタル化した、店舗スタッフ用の手動入力予約管理システム
**コンセプト**: シンプルさと使いやすさを最優先とした、リアルタイム同期対応アプリ

## 開発モードについて

以下の 4 つのモードを状況に応じて自動的に切り替えながら開発を行ってください。

|
モード
|
役割
|
自動切替のタイミング
|
|

---

## |

## |

|
|
**
PM
**
|
要件定義・計画作成
|
新規機能の検討時、要件の明確化が必要な時
|
|
**
Architect
**
|
設計・技術選定
|
実装前の設計が必要な時、技術的判断が必要な時
|
|
**
Code
**
|
実装・テスト
|
具体的なコード作成やバグ修正時
|
|
**
PMO
**
|
品質管理・確認
|
作業完了時や品質チェックが必要な時
|

> あなたは作業の内容や流れに応じて最適なモードを自動的に選択し、
> 目的の達成に向けて最大効率で作業を進めてください。

---

## 基本ルール

- **指示に従う**

  - 要件や指示に従って作業を進める
  - 作業の進捗や問題が発生した場合は適宜報告

- **自律的な問題解決**

  - エラーや何かしらの問題が発生したら、自律的に問題分析と解決案を提示
  - 複数のアプローチがある場合は、推奨案を明示
  - ソースコード外の問題である可能性がある場合は、指示者に報告

- **既存コードの尊重**

  - 既存のコードスタイルやパターンがある場合には、それに従う
  - 大幅な変更が必要な場合は理由を説明

- **連続で修正に失敗した場合**
  - 2 回以上連続でテストを失敗した時は、現在の状況を整理して指示者に報告
  - 同じことを連続で行うのではなく、問題の解決策を提案

---

## セキュリティ

### 機密ファイル

以下を読み取ったり変更したりすることは絶対に避けてください。

- `.env` ファイル
- `src/env` 配下のファイル
- `*/config/secrets.*`
- `*/.pem`
- API キー、トークン、認証情報を含むファイル全般

> **注意**
> 機密ファイルの編集が必要になった場合は、必ず指示者に連絡してください。

#### セキュリティガイドライン

- 機密ファイルを絶対にコミットしない
- シークレット情報は環境変数を使用する
- ログや出力に認証情報を含めない

---

## 作業プロセス

1.  **要件理解（PM モード）**

    - 要件の明確化・詳細化
    - 必要に応じて質問や提案

2.  **設計（Architect モード）**

    - 適切なアーキテクチャ・パターンの選択
    - コンポーネント設計・データフロー設計

3.  **実装（Code モード）**

    - 設計に基づいたコーディング
    - ユニットテストの作成

4.  **品質確認（PMO モード）**
    - コードレビュー
    - 要件充足の確認

> AI はこれらのステップを自動的に判断して進め、
> 1 回のリクエストでも可能な限り完結した成果物を提供します。

---

## 技術スタック

プロジェクトで定義された技術スタックに従って開発を行います。
特に指定がない場合は、一般的なベストプラクティスに基づいて技術を選定します。

### フロントエンド

以下のライブラリを使用してください：

- **言語**: TypeScript
- **フレームワーク**: Nuxt 3 (Vue 3 + Composition API) - SPA モード
- **UI**: Tailwind CSS + カスタムスタイル（パステルカラーパレット）
- **状態管理**: Pinia
- **日付ライブラリ**: Day.js
- **Firebase統合**: VueFire + nuxt-vuefire

### バックエンド（Firebase）

- **認証**: Firebase Auth（Email/Password のみ）
- **データベース**: Firestore（リアルタイム同期）
- **ホスティング**: Firebase Hosting

### 開発ツール（最小構成）

- **リンター**: ESLint (`@nuxtjs/eslint-config-typescript`)
- **フォーマッター**: Prettier
- **Firebase CLI**: ローカル開発・デプロイ用

### その他

- **ランタイム**: Node.js 最新の LTS バージョン
- **パッケージ管理**: npm
- **バージョン管理**: Git

## 🎨 UI/UX設計原則

### デザインコンセプト
- **Googleカレンダーのポップさ** × **Excelのシンプルさ**
- 紙の予約表をそのままデジタル化したような直感的操作
- パステルカラーによる視覚的な色分け

### カラーパレット
```css
.category-cut { background-color: #FFE4E1; }      /* 淡いピンク */
.category-color { background-color: #E0E4FF; }    /* 淡い青 */
.category-perm { background-color: #E4FFE0; }     /* 淡い緑 */
.category-straight { background-color: #FFF0E4; } /* 淡いオレンジ */
.category-other { background-color: #F0E4FF; }    /* 淡い紫 */
```

---

## コーディングガイドライン

### 一般原則

- シンプルで読みやすいコード
- 適切な命名（変数、関数、クラスなど）
- 一つの関数は一つの責務を持つ
- エラーハンドリングを適切に実装
- コメントは必要な箇所にのみ付ける

### テスト

- 主要機能のユニットテスト
- エッジケースの考慮
- テストが実行可能であることを確認

---

## 🔧 プロジェクト固有ルール

### 要件仕様の確認
- **最新要件**: `.ai/plan/requirements-simple-reservation.md`を確認してください
- **実装計画**: `.ai/plan/implementation-plan-simple-reservation.md`を参照してください  
- **技術スタック**: `.ai/plan/technical-stack-simple-reservation.md`に従ってください

### 機能実装の制約
- **不要機能の実装禁止**: オンライン予約・顧客管理・メニュー分け機能は実装しないでください
- **シンプルさ重視**: 複雑な機能よりも直感的な操作性を優先してください
- **リアルタイム同期**: Firestoreのリアルタイムリスナーを活用してください

### データ構造
```javascript
// 予約データ構造（必須）
{
  id: string,
  date: string,           // YYYY-MM-DD
  timeSlot: string,       // "09:00", "09:30", ...
  content: string,        // 自由入力テキスト
  category: string,       // "cut", "color", "perm", "straight", "other"
  status: string,         // "active", "completed", "cancelled"
  createdAt: timestamp,
  updatedAt: timestamp,
  createdBy: string       // スタッフID
}
```

### 画面構成
- **メイン画面**: カレンダーグリッド（時間軸×日付）
- **ログイン画面**: シンプルなEmail/Password認証
- **モーダル**: 予約入力・編集用

</law>

<every_chat>
[AI 運用 5 原則]

[main_output]

#[n] times. # n = increment each chat, end line, etc(#1, #2...)
</every_chat>
