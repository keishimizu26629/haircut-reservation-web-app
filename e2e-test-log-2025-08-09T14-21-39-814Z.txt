[2025-08-09T14:21:39.815Z] [INFO] 🚀 Starting E2E Login Test Suite...
[2025-08-09T14:21:39.823Z] [INFO] =====================================
[2025-08-09T14:21:39.825Z] [INFO] 🌐 Testing site accessibility...
[2025-08-09T14:21:39.872Z] [SUCCESS] ✅ Site accessible: 200
[2025-08-09T14:21:39.874Z] [INFO] 📋 Content-Type: text/html; charset=utf-8
[2025-08-09T14:21:39.875Z] [INFO] 🔒 CSP Header: default-src 'self' https://firebaseapp.com https://*.firebaseapp.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://www.googleapis.com https://firestore.googleapis.com; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://apis.google.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://firebaseapp.com https://*.firebaseapp.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://www.googleapis.com https://firestore.googleapis.com wss://ws-mt1.pusher.com
[2025-08-09T14:21:39.876Z] [INFO] 📄 HTML Structure: Title=true, Nuxt=true, Firebase=true
[2025-08-09T14:21:39.877Z] [INFO] 🔐 Testing login page...
[2025-08-09T14:21:40.028Z] [SUCCESS] ✅ Login page accessible: 200
[2025-08-09T14:21:40.029Z] [INFO] 📋 Login Form Elements: Email=false, Password=false, Button=false
[2025-08-09T14:21:40.031Z] [INFO] 🔧 Testing diagnostic tool...
[2025-08-09T14:21:40.123Z] [SUCCESS] ✅ Diagnostic tool accessible: 200
[2025-08-09T14:21:40.125Z] [INFO] 🔧 Diagnostic Features: Firebase=false, LoginTest=false
[2025-08-09T14:21:40.127Z] [INFO] 🔥 Testing Firebase configuration...
[2025-08-09T14:21:40.136Z] [INFO] 🔥 Firebase Config: ApiKey=true, ProjectId=true, AuthDomain=true
[2025-08-09T14:21:40.139Z] [INFO] 📋 Generating manual test instructions...
[2025-08-09T14:21:40.140Z] [INFO] 
=== MANUAL E2E LOGIN TEST INSTRUCTIONS ===

🎯 Test Objective: Verify login functionality works end-to-end

📋 Pre-Test Checklist:
✅ Site is accessible: https://haircut-reservation-dev.web.app
✅ Login page loads: https://haircut-reservation-dev.web.app/login  
✅ Diagnostic tool available: https://haircut-reservation-dev.web.app/diagnose-login.html

🔐 Test Credentials:
Email: testaccount@test.com
Password: testtest

📝 Manual Test Steps:

STEP 1: Open Login Page
- Navigate to: https://haircut-reservation-dev.web.app/login
- Verify page loads without errors
- Check browser console for any errors
- Confirm login form is visible

STEP 2: Enter Credentials
- Email field: testaccount@test.com
- Password field: testtest
- Click "ログイン" button

STEP 3: Monitor Authentication
- Watch browser console for Firebase auth logs
- Look for authentication success messages
- Check for any CSP or security errors

STEP 4: Verify Redirect
- Should redirect to main calendar page (/)
- Verify user is authenticated
- Check that logout button is visible

STEP 5: Test Navigation
- Try accessing protected pages
- Verify authentication persists
- Test logout functionality

🔧 Diagnostic Tool Test:
- Open: https://haircut-reservation-dev.web.app/diagnose-login.html
- Click "ログインテスト" button
- Verify Firebase initialization status
- Check authentication state

❌ Troubleshooting:
- If page freezes: Check infinite redirect loops
- If login fails: Verify Firebase Auth errors
- If blank page: Check CSP violations
- If network errors: Check Firebase API calls

📊 Expected Results:
✅ Smooth login without freezing
✅ Successful authentication
✅ Proper redirect to calendar
✅ Persistent authentication state
✅ No console errors

[2025-08-09T14:21:40.142Z] [INFO] 📄 Manual test instructions saved to: manual-e2e-test-instructions.txt
[2025-08-09T14:21:40.144Z] [INFO] 🏁 E2E Test Results Summary:
[2025-08-09T14:21:40.146Z] [INFO] ============================
[2025-08-09T14:21:40.148Z] [INFO] ✅ PASS siteAccessible
[2025-08-09T14:21:40.150Z] [INFO] ✅ PASS loginPageWorking
[2025-08-09T14:21:40.151Z] [INFO] ✅ PASS diagnosticToolWorking
[2025-08-09T14:21:40.152Z] [INFO] ✅ PASS firebaseConfigValid
[2025-08-09T14:21:40.154Z] [INFO] 
🎯 Overall Status: ✅ ALL TESTS PASSED
[2025-08-09T14:21:40.155Z] [INFO] ✅ Ready for manual login testing!
[2025-08-09T14:21:40.156Z] [INFO] 🌐 Login URL: https://haircut-reservation-dev.web.app/login
[2025-08-09T14:21:40.157Z] [INFO] 🔧 Diagnostic URL: https://haircut-reservation-dev.web.app/diagnose-login.html
[2025-08-09T14:21:40.159Z] [INFO] 📄 Full test log saved to: e2e-test-log-2025-08-09T14-21-39-814Z.txt
